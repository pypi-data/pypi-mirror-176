"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_forms_apiForm_tsx-app_components_forms_fields_checkboxField_tsx-app_components-7d3156"],{"./app/actionCreators/savedSearches.tsx":(e,t,n)=>{n.d(t,{C2:()=>u,VH:()=>p,YO:()=>h,bG:()=>l,cB:()=>m,g_:()=>g,k0:()=>v,k9:()=>S});var s=n("./app/actionCreators/indicator.tsx"),r=n("./app/constants/index.tsx"),a=n("./app/locale.tsx"),i=n("./app/stores/savedSearchesStore.tsx"),o=n("./app/types/index.tsx"),c=n("./app/utils/handleXhrErrorResponse.tsx");function l(){i.Z.onReset()}function u(e,t){const n=`/organizations/${t}/searches/`;i.Z.onStartFetchSavedSearches();const r=e.requestPromise(n,{method:"GET"});return r.then((e=>{i.Z.onFetchSavedSearchesSuccess(e)})).catch((e=>{i.Z.onFetchSavedSearchesError(e),(0,s.Iw)((0,a.t)("Unable to load saved searches"))})),r}const d=e=>`/organizations/${e}/recent-searches/`;function p(e,t,n,s){const r=d(t),a=e.requestPromise(r,{method:"POST",data:{query:s,type:n}});return a.catch((0,c.Z)("Unable to save a recent search")),a}function m(e,t,n,s,r,a){const c=e.requestPromise(`/organizations/${t}/searches/`,{method:"POST",data:{type:o.L4.ISSUE,query:s,name:n,sort:r,visibility:a}});return c.then((e=>{i.Z.onCreateSavedSearchSuccess(e)})),c}function h(e,t,n,s){const a=d(t),i=e.requestPromise(a,{query:{query:s,type:n,limit:r.x}});return i.catch((e=>{401!==e.status&&403!==e.status&&(0,c.Z)("Unable to fetch recent searches")(e)})),i}const f=e=>`/organizations/${e}/pinned-searches/`;function v(e,t,n,s,r){const a=f(t);i.Z.onPinSearch(n,s,r);const o=e.requestPromise(a,{method:"PUT",data:{query:s,type:n,sort:r}});return o.then(i.Z.onPinSearchSuccess),o.catch((0,c.Z)("Unable to pin search")),o.catch((()=>{i.Z.onUnpinSearch(n)})),o}function g(e,t,n,s){const r=f(t);i.Z.onUnpinSearch(n);const a=e.requestPromise(r,{method:"DELETE",data:{type:n}});return a.catch((0,c.Z)("Unable to un-pin search")),a.catch((()=>{const{type:e,query:t}=s;i.Z.onPinSearch(e,t)})),a}function S(e,t,n){const s=`/organizations/${t}/searches/${n.id}/`;return e.requestPromise(s,{method:"DELETE"}).then((()=>i.Z.onDeleteSavedSearchSuccess(n))).catch((0,c.Z)("Unable to delete a saved search"))}},"./app/components/events/interfaces/spans/constants.tsx":(e,t,n)=>{n.d(t,{DX:()=>s,S5:()=>c,ZR:()=>o,bl:()=>a,h0:()=>i,rz:()=>r,tJ:()=>l});const s=120,r=4,a=s/r,i=20,o=s+i+20+1,c=18,l=10},"./app/components/events/interfaces/spans/utils.tsx":(e,t,n)=>{if(n.d(t,{BU:()=>W,IG:()=>A,Io:()=>K,PA:()=>O,PC:()=>F,PQ:()=>$,Rr:()=>V,TC:()=>I,Zv:()=>X,ct:()=>B,h_:()=>N,hw:()=>R,is:()=>k,k9:()=>Z,kP:()=>_,ll:()=>G,n0:()=>P,o0:()=>L,on:()=>J,rF:()=>U,ro:()=>j,sT:()=>Y,vu:()=>z,yk:()=>q,yn:()=>C}),"app"==n.j)var s=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js");n("../node_modules/core-js/modules/es.array.includes.js");var r=n("../node_modules/react-router/es/index.js"),a=n("../node_modules/lodash/isNumber.js"),i=n.n(a),o=n("../node_modules/lodash/isString.js"),c=n.n(o),l=n("../node_modules/lodash/maxBy.js"),u=n.n(l),d=n("../node_modules/lodash/set.js"),p=n.n(d),m=n("../node_modules/moment/moment.js"),h=n.n(m),f=n("./app/components/performance/waterfall/treeConnector.tsx"),v=n("./app/types/event.tsx");if("app"==n.j)var g=n("./app/types/utils.tsx");var S=n("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),y=n("./app/utils/fields/index.ts"),x=n("./app/utils/performance/vitals/constants.tsx"),T=n("./app/utils/performanceForSentry.tsx"),E=n("./app/components/events/interfaces/spans/constants.tsx");const _=e=>{const t=(0,T.Zz)();if(!t||0===e)return;const n=[10,100,200,300,400,500,600,700,800,900,1001].find((t=>e<=t))||-1;t.setTag("ui.spanCount",e),t.setTag("ui.spanCount.grouped",`<=${n}`)},b=e=>{const{startTimestamp:t,endTimestamp:n}=e;return t>n?{startTimestamp:n,endTimestamp:t}:e};let w;!function(e){e[e.Stable=0]="Stable",e[e.Reversed=1]="Reversed",e[e.Equal=2]="Equal"}(w||(w={}));const A=e=>{const{viewStart:t,viewEnd:n}=e,{startTimestamp:s,endTimestamp:r}=b({startTimestamp:e.traceStartTimestamp,endTimestamp:e.traceEndTimestamp}),a=r-s,i=s+t*a,o=r-(1-n)*a-i;return e=>{if(a<=0)return{type:"TRACE_TIMESTAMPS_EQUAL",isSpanVisibleInView:!0};if(o<=0)return{type:"INVALID_VIEW_WINDOW",isSpanVisibleInView:!0};const{startTimestamp:t,endTimestamp:n}=b(e),s=(e=>{const t=e.startTimestamp,n=e.endTimestamp;return t<n?w.Stable:t===n?w.Equal:w.Reversed})(e),r=(t-i)/o,c=(n-i)/o,l=c>0&&r<1;switch(s){case w.Equal:return{type:"TIMESTAMPS_EQUAL",start:r,width:1,isSpanVisibleInView:c>=0&&r<=1};case w.Reversed:return{type:"TIMESTAMPS_REVERSED",start:r,end:c,isSpanVisibleInView:l};case w.Stable:return{type:"TIMESTAMPS_STABLE",start:r,end:c,isSpanVisibleInView:l};default:return s}}};function P(e){return{trace_id:e.traceID,span_id:e.rootSpanID,parent_span_id:e.parentSpanID,start_timestamp:e.traceStartTimestamp,timestamp:e.traceEndTimestamp,op:e.op,description:e.description,data:{},status:e.rootSpanStatus,hash:e.hash,exclusive_time:e.exclusiveTime}}function I(e){return{start:h().unix(e.start).subtract(12,"hours").utc().format("YYYY-MM-DDTHH:mm:ss.SSS"),end:h().unix(e.end).add(12,"hours").utc().format("YYYY-MM-DDTHH:mm:ss.SSS")}}function R(e){return"type"in e&&"gap"===e.type}function j(e){if("type"in e){if("orphan"===e.type)return!0;if("gap"===e.type)return e.isOrphan}return!1}function V(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return R(e)?t:e.span_id}function q(e){if(!R(e))return e.op}function O(e){return e?.contexts?.trace}function Z(e){const t=e.entries.find((e=>e.type===v.UZ.SPANS)),n=t?.data??[],s=O(e),r=s&&s.trace_id||"",a=s&&s.span_id||"",o=s&&s.op||"transaction",l=s&&s.description,u=s&&s.parent_span_id,d=s&&s.status,m=s&&s.hash,h=s&&s.exclusive_time;if(!t||n.length<=0)return{op:o,childSpans:{},traceStartTimestamp:e.startTimestamp,traceEndTimestamp:e.endTimestamp,traceID:r,rootSpanID:a,rootSpanStatus:d,parentSpanID:u,spans:[],description:l,hash:m,exclusiveTime:h};const f=new Set(n.map((e=>e.span_id)));f.add(a);const S={op:o,childSpans:{},traceStartTimestamp:e.startTimestamp,traceEndTimestamp:e.endTimestamp,traceID:r,rootSpanID:a,rootSpanStatus:d,parentSpanID:u,spans:n,description:l,hash:m,exclusiveTime:h},y=n.reduce(((e,t)=>{let n=t;const s=function(e){return R(e)?"gap-span":e.parent_span_id}(n),r=s&&f.has(s);var o;o=s,c()(o)&&o.length>0&&r||(n.parent_span_id=a,n={type:"orphan",...n}),(0,g.hu)(n.parent_span_id);const l=e.childSpans[n.parent_span_id]??[];l.push(n),p()(e.childSpans,n.parent_span_id,l),(!e.traceStartTimestamp||n.start_timestamp<e.traceStartTimestamp)&&(e.traceStartTimestamp=n.start_timestamp);const u=i()(n.timestamp);return e.traceEndTimestamp?u&&n.timestamp>e.traceEndTimestamp?(e.traceEndTimestamp=n.timestamp,e):(n.start_timestamp>e.traceEndTimestamp&&(e.traceEndTimestamp=n.start_timestamp),e):u?(e.traceEndTimestamp=n.timestamp,e):(e.traceEndTimestamp=n.start_timestamp,e)}),S);return Object.values(y.childSpans).forEach((e=>{e.sort(D)})),y}function D(e,t){return j(e)&&!j(t)?1:!j(e)&&j(t)||e.start_timestamp<t.start_timestamp?-1:e.start_timestamp===t.start_timestamp?0:1}function C(e){return"number"!=typeof e&&"orphan"===e?.type}function N(e){return C(e)?e.depth:e}function F(e){const t=e.sdk?.name;return!!t&&["sentry.javascript.browser","sentry.javascript.react","sentry.javascript.gatsby","sentry.javascript.ember","sentry.javascript.vue","sentry.javascript.angular","sentry.javascript.nextjs","sentry.javascript.electron","sentry.javascript.remix","sentry.javascript.svelte"].includes(t.toLowerCase())}const L="app"==n.j?["mark","paint"]:null;function M(e){const t=Object.keys(e);return Object.values(x.r9).filter((e=>t.includes(e.slug))).some((t=>{const{value:n}=e[t.slug];return"number"==typeof n&&"number"==typeof t.poorThreshold&&n>=t.poorThreshold}))}function k(e,t){if(!e.measurements||!e.startTimestamp)return new Map;const{startTimestamp:n}=e,s=new Set([y.Zl.FCP,y.Zl.FP,y.Zl.FID,y.Zl.LCP,y.Zl.TTFB]),r=Object.keys(e.measurements).filter((e=>s.has(`measurements.${e}`))).map((t=>{const s=e.measurements[t];return{name:t,timestamp:n+s.value/1e3,value:s?s.value:void 0}})),a=new Map;return r.forEach((e=>{const n=e.name,s=e.value,r=t({startTimestamp:e.timestamp,endTimestamp:e.timestamp});if("TIMESTAMPS_EQUAL"!==r.type)return;const i=Math.round(100*r.start);for(const[t]of a)if(Math.abs(t-i)<=E.tJ){const r=a.get(t),{poorThreshold:i}=x.r9[`measurements.${n}`];return r.marks={...r.marks,[n]:{value:s,timestamp:e.timestamp,failedThreshold:!!s&&s>=i}},r.failedThreshold||(r.failedThreshold=M(r.marks)),void a.set(t,r)}const{poorThreshold:o}=x.r9[`measurements.${n}`],c={[n]:{value:s,timestamp:e.timestamp,failedThreshold:!!s&&s>=o}};a.set(i,{marks:c,failedThreshold:M(c)})})),a}function z(e,t){const n=t({startTimestamp:e,endTimestamp:e});switch(n.type){case"TRACE_TIMESTAMPS_EQUAL":case"INVALID_VIEW_WINDOW":return{warning:void 0,left:void 0,width:void 0,isSpanVisibleInView:n.isSpanVisibleInView};case"TIMESTAMPS_EQUAL":return{warning:void 0,left:n.start,width:1e-5,isSpanVisibleInView:n.isSpanVisibleInView};case"TIMESTAMPS_REVERSED":case"TIMESTAMPS_STABLE":return{warning:void 0,left:n.start,width:n.end-n.start,isSpanVisibleInView:n.isSpanVisibleInView};default:return n}}function U(e,t,n,s){return a=>{a.preventDefault();const i=B(e);t(i),r.browserHistory.push({...n,hash:i}),(0,S.Z)("performance_views.event_details.anchor_span",{organization:s,span_id:e})}}function B(e){return`#span-${e}`}function $(e,t){return void 0!==t?`${e.op}.${e.description}.${t}`:`${e.op}.${e.description}`}function G(e){return e.reduce(((e,t)=>{const{start_timestamp:n,timestamp:s}=t.span;let r=e.startTimestamp,a=e.endTimestamp;return n<r&&(r=n),a<s&&(a=s),{startTimestamp:r,endTimestamp:a}}),{startTimestamp:e[0].span.start_timestamp,endTimestamp:e[0].span.timestamp})}function Y(e,t){const{startTimestamp:n,endTimestamp:s}=G(e),r=t({startTimestamp:n,endTimestamp:s});switch(r.type){case"TRACE_TIMESTAMPS_EQUAL":case"INVALID_VIEW_WINDOW":return{warning:void 0,left:void 0,width:void 0,isSpanVisibleInView:r.isSpanVisibleInView};case"TIMESTAMPS_EQUAL":return{warning:void 0,left:r.start,width:1e-5,isSpanVisibleInView:r.isSpanVisibleInView};case"TIMESTAMPS_REVERSED":case"TIMESTAMPS_STABLE":return{warning:void 0,left:r.start,width:r.end-r.start,isSpanVisibleInView:r.isSpanVisibleInView};default:return r}}class K{constructor(e){(0,s.Z)(this,"spanDepthsInView",void 0),(0,s.Z)(this,"treeDepthSum",void 0),(0,s.Z)(this,"length",void 0),(0,s.Z)(this,"isRootSpanInView",void 0),this.spanDepthsInView=new Map,this.treeDepthSum=0,this.length=0,this.isRootSpanInView=e}addSpan(e,t){return!this.spanDepthsInView.has(e)&&(this.spanDepthsInView.set(e,t),this.length+=1,this.treeDepthSum+=t,0===t&&(this.isRootSpanInView=!0),!0)}removeSpan(e){if(!this.spanDepthsInView.has(e))return!1;const t=this.spanDepthsInView.get(e);return this.spanDepthsInView.delete(e),this.length-=1,this.treeDepthSum-=t,0===t&&(this.isRootSpanInView=!1),!0}has(e){return this.spanDepthsInView.has(e)}getScrollVal(){return this.isRootSpanInView?0:Math.round(this.treeDepthSum/this.length)*(f.Ll/2)-f.Y9/2}}function W(e){const t=u()(e||[],(e=>Q[e.level]))?.level;if(t)return H[t]}const H={fatal:"error",error:"error",default:"error",warning:"warning",sample:"info",info:"info",unknown:"muted"},Q={fatal:5,error:4,default:4,warning:3,sample:2,info:1,unknown:0};function X(e,t){const n=String(e).split("."),s=String(t).split(".");if(2!==n.length||2!==s.length)return{start:String(e),end:String(t)};const r=n.reduce(((e,t,n)=>t.length>s[n].length?(e.start.push(t),e.end.push(0===n?s[n].padStart(t.length,"0"):s[n].padEnd(t.length,"0")),e):(e.start.push(0===n?t.padStart(s[n].length,"0"):t.padEnd(s[n].length,"0")),e.end.push(s[n]),e)),{start:[],end:[]});return{start:r.start.join("."),end:r.end.join(".")}}function J(e,t){return!!t&&!e.some((e=>t.has(e.span.span_id)))}},"./app/components/forms/apiForm.tsx":(e,t,n)=>{n.d(t,{Z:()=>u});var s=n("../node_modules/react/index.js"),r=n("./app/actionCreators/indicator.tsx"),a=n("./app/components/forms/form.tsx"),i=n("./app/locale.tsx"),o=n("./app/utils/useApi.tsx"),c=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function l(e){let{onSubmit:t,apiMethod:n,apiEndpoint:l,...u}=e;const d=(0,o.Z)(),p=(0,s.useCallback)(((e,s,a)=>{t?.(e),(0,r.E3)((0,i.t)("Saving changes…")),d.request(l,{method:n,data:e,success:e=>{(0,r.B8)(),s(e)},error:e=>{(0,r.B8)(),a(e)}})}),[d,t,n,l]);return(0,c.tZ)(a.Z,{onSubmit:p,...u})}l.displayName="ApiForm";const u="app"==n.j?l:null},"./app/components/forms/fields/checkboxField.tsx":(e,t,n)=>{n.d(t,{Z:()=>f});var s=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=n("./app/components/checkbox.tsx"),a=n("./app/styles/space.tsx"),i=n("./app/components/forms/field/fieldDescription.tsx"),o=n("./app/components/forms/field/fieldHelp.tsx"),c=n("./app/components/forms/field/fieldLabel.tsx"),l=n("./app/components/forms/field/fieldRequiredBadge.tsx"),u=n("./app/components/forms/formField/index.tsx"),d=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function p(e){const{name:t,disabled:n,stacked:s,required:a,label:p,help:f}=e,v="function"==typeof f?f(e):f,g="string"==typeof p?p:void 0;return(0,d.tZ)(u.Z,{name:t,inline:!1,stacked:s,children:e=>{let{onChange:u,value:f,id:S}=e;return(0,d.BX)(h,{children:[(0,d.tZ)(m,{children:(0,d.tZ)(r.Z,{id:S,name:t,disabled:n,checked:!0===f,onChange:function(e){const t=e.target.checked;u?.(t,e)}})}),(0,d.BX)(i.Z,{htmlFor:S,"aria-label":g,children:[p&&(0,d.tZ)(c.Z,{disabled:n,children:(0,d.BX)("span",{children:[p,a&&(0,d.tZ)(l.Z,{})]})}),v&&(0,d.tZ)(o.Z,{stacked:s,inline:!0,children:v})]})]})}})}p.displayName="CheckboxField";const m=(0,s.Z)("span",{target:"e6z7ikk1"})("align-self:flex-start;display:flex;margin-right:",(0,a.Z)(1),";& input{margin:0;}"),h=(0,s.Z)("div",{target:"e6z7ikk0"})({name:"ho1qnd",styles:"display:flex;flex-direction:row"}),f="app"==n.j?p:null},"./app/components/modals/savedSearchModal/createSavedSearchModal.tsx":(e,t,n)=>{n.d(t,{Y:()=>S}),n("../node_modules/core-js/modules/es.array.includes.js");var s=n("../node_modules/react/index.js"),r=n("./app/actionCreators/indicator.tsx"),a=n("./app/actionCreators/savedSearches.tsx"),i=n("./app/components/alert.tsx"),o=n("./app/components/forms/index.tsx"),c=n("./app/components/modals/savedSearchModal/savedSearchModalContent.tsx"),l=n("./app/locale.tsx"),u=n("./app/types/index.tsx"),d=n("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),p=n("./app/utils/useApi.tsx"),m=n("./app/views/issueList/mutations/useCreateSavedSearch.tsx"),h=n("./app/views/issueList/utils.tsx"),f=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const v=[h.qh.DATE,h.qh.NEW,h.qh.FREQ,h.qh.PRIORITY,h.qh.USER];function g(e){let{organization:t,sort:n}=e;return function(e){return e?.features?.includes("issue-list-trend-sort")?[...v,h.qh.TREND]:v}(t).find((e=>e===n))?n:h.qh.DATE}function S(e){let{Header:t,Body:n,closeModal:h,organization:v,query:S,sort:y}=e;const x=v.features.includes("issue-list-saved-searches-v2"),T=(0,p.Z)(),[E,_]=(0,s.useState)(null),{mutateAsync:b}=(0,m.a)(),w={name:"",query:S,sort:g({organization:v,sort:y}),visibility:v.features.includes("issue-list-saved-searches-v2")?u.Ub.Owner:u.Ub.Organization};return(0,f.BX)(o.l0,{onSubmit:async(e,t,n,s)=>{s.preventDefault(),_(null),(0,r.E3)((0,l.t)("Saving Changes")),(0,d.Z)("search.saved_search_create",{name:e.name,organization:v,query:e.query,search_type:"issues",sort:e.sort,visibility:e.visibility});try{x?await b({orgSlug:v.slug,name:e.name,query:e.query,sort:e.sort,type:u.L4.ISSUE,visibility:e.visibility}):await(0,a.cB)(T,v.slug,e.name,e.query,e.sort,e.visibility),h(),(0,r.B8)(),t(e)}catch(e){(0,r.B8)(),n(e?.responseJSON?.detail?e.responseJSON.detail:(0,l.t)("Unable to save your changes."))}},onCancel:h,saveOnBlur:!1,initialData:w,submitLabel:(0,l.t)("Save"),onSubmitError:e=>_(e),children:[(0,f.tZ)(t,{children:(0,f.tZ)("h4",{children:(0,l.t)("Create a Saved Search")})}),(0,f.BX)(n,{children:[E&&(0,f.tZ)(i.Z,{type:"error",children:E}),(0,f.tZ)(c.A,{organization:v})]})]})}S.displayName="CreateSavedSearchModal"},"./app/components/performance/waterfall/treeConnector.tsx":(e,t,n)=>{n.d(t,{DN:()=>d,Ll:()=>l,U1:()=>p,UV:()=>u,Y9:()=>c,jd:()=>h,rw:()=>m});var s=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=n("./app/components/performance/waterfall/constants.tsx"),a=n("./app/components/performance/waterfall/utils.tsx"),i=n("./app/icons/index.tsx"),o=n("./app/styles/space.tsx");const c=30,l=c+16,u="app"==n.j?(0,s.Z)("div",{target:"e1xp7sks4"})("height:250%;border-left:2px ",(e=>e.orphanBranch?"dashed":"solid")," ",(e=>e.theme.border),";position:absolute;top:0;"):null,d=(0,s.Z)("div",{target:"e1xp7sks3"})("height:",(e=>e.isLast?r.dN/2+1:r.dN),"px;width:100%;border-left:",(e=>`2px ${e.orphanBranch?"dashed":"solid"} ${e.theme.border};`),";position:absolute;top:0;",(e=>e.isLast?`\n      border-bottom: 2px ${e.orphanBranch?"dashed":"solid"} ${e.theme.border};\n      border-bottom-left-radius: ${e.theme.borderRadius};`:`\n      &:before {\n        content: '';\n        height: 2px;\n        left: -2px;\n        border-bottom: 2px ${e.orphanBranch?"dashed":"solid"} ${e.theme.border};\n        width: calc(100% - 2px);\n        position: absolute;\n        bottom: calc(50% - 1px);\n      }`)," &:after{content:'';background-color:",(e=>e.theme.border),";border-radius:50%;height:6px;width:6px;position:absolute;right:0;top:",r.dN/2-3,"px;}"),p=(0,s.Z)("div",{target:"e1xp7sks2"})("height:16px;white-space:nowrap;min-width:30px;display:flex;align-items:center;justify-content:center;border-radius:99px;padding:0px ",(0,o.Z)(.5),";transition:all 0.15s ease-in-out;font-size:10px;line-height:0;z-index:1;box-shadow:",(e=>e.theme.dropShadowLightest),";",(e=>(0,a.uu)(e)),";"),m=(0,s.Z)("div",{target:"e1xp7sks1"})("position:relative;height:",r.dN,"px;width:",40,"px;min-width:",40,"px;margin-right:",(0,o.Z)(1),";z-index:",(e=>e.theme.zIndex.traceView.spanTreeToggler),";display:flex;justify-content:flex-end;align-items:center;"),h=(0,s.Z)(i.g6,{target:"e1xp7sks0"})("width:7px;margin-left:",(0,o.Z)(.25),";")},"./app/components/smartSearchBar/utils.tsx":(e,t,n)=>{n.d(t,{$l:()=>x,Az:()=>b,BG:()=>g,O7:()=>T,Um:()=>v,WF:()=>u,be:()=>l,iO:()=>_,il:()=>y,oe:()=>h,th:()=>f}),n("../node_modules/core-js/modules/es.array.at.js"),n("../node_modules/core-js/modules/es.string.at-alternative.js"),n("../node_modules/core-js/modules/es.array.includes.js");var s=n("./app/components/searchSyntax/parser.tsx"),r=n("./app/icons/index.tsx"),a=n("./app/locale.tsx"),i=n("./app/components/smartSearchBar/types.tsx"),o=n("./app/utils/fields/index.ts"),c=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return 0!==e.length&&" "!==e[e.length-1]?e+" ":e}function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return" "===e[e.length-1]?e.slice(0,e.length-1):e}function d(e){return e===i.q.TAG_VALUE?(0,a.t)("Values"):e===i.q.RECENT_SEARCH?(0,a.t)("Recent Searches"):e===i.q.DEFAULT?(0,a.t)("Common Search Terms"):e===i.q.TAG_OPERATOR?(0,a.t)("Operator Helpers"):e===i.q.PROPERTY?(0,a.t)("Properties"):(0,a.t)("Keys")}function p(e,t){if(e===i.q.RECENT_SEARCH)return(0,c.tZ)(r.jo,{size:"xs"});if(e===i.q.DEFAULT)return(0,c.tZ)(r.GK,{size:"xs"});switch(t){case"is":return(0,c.tZ)(r.oe,{size:"xs"});case"assigned":case"bookmarks":return(0,c.tZ)(r.qO,{size:"xs"});case"firstSeen":case"lastSeen":case"event.timestamp":return(0,c.tZ)(r.jo,{size:"xs"});default:return(0,c.tZ)(r.Ah,{size:"xs"})}}const m=(e,t,n,s)=>(n&&n>0&&(e=e.filter(((e,t)=>t<n||e.ignoreMaxSearchItems))),(s||0===s)&&(e=(e=e.flatMap((e=>{if(!e.children)return!e.value||e.value.length<=s?[e]:[];const t={...e,children:e.children.filter((e=>!e.value||e.value.length<=s))};return 0===t.children.length?[]:[t]}))).filter((e=>!e.value||e.value.length<=s)),t&&(t=t.filter((e=>!e.value||e.value.length<=s)))),{searchItems:e,recentSearchItems:t});function h(e,t,n,s,l,u,h){let f=arguments.length>7&&void 0!==arguments[7]?arguments[7]:o.pw;const v=f(n),g=0,{searchItems:S,recentSearchItems:y}=m(e,t,l,u),x={title:d(s),type:s===i.q.INVALID_TAG?s:"header",icon:p(s,n),children:[...S]},T=y&&y.length>0?{title:(0,a.t)("Recent Searches"),type:"header",icon:(0,c.tZ)(r.jo,{size:"xs"}),children:[...y]}:void 0;x.children&&x.children.length&&(x.children[g]={...x.children[g]});const E=S.flatMap((e=>e.children?e.value?[e,...e.children]:[...e.children]:[e]));return v?.valueType===o.nU.DATE&&s===i.q.TAG_OPERATOR?{searchGroups:[],flatSearchItems:[],activeSearchItem:-1}:h?{searchGroups:[...T?[T]:[],x],flatSearchItems:[...t||[],...E],activeSearchItem:-1}:{searchGroups:[x,...T?[T]:[]],flatSearchItems:[...E,...t||[]],activeSearchItem:-1}}function f(e){return{[s.oV.Default]:{type:i.q.TAG_OPERATOR,value:":",desc:`${e}:${(0,a.t)("[value]")}`,documentation:"is equal to"},[s.oV.GreaterThanEqual]:{type:i.q.TAG_OPERATOR,value:":>=",desc:`${e}:${(0,a.t)(">=[value]")}`,documentation:"is greater than or equal to"},[s.oV.LessThanEqual]:{type:i.q.TAG_OPERATOR,value:":<=",desc:`${e}:${(0,a.t)("<=[value]")}`,documentation:"is less than or equal to"},[s.oV.GreaterThan]:{type:i.q.TAG_OPERATOR,value:":>",desc:`${e}:${(0,a.t)(">[value]")}`,documentation:"is greater than"},[s.oV.LessThan]:{type:i.q.TAG_OPERATOR,value:":<",desc:`${e}:${(0,a.t)("<[value]")}`,documentation:"is less than"},[s.oV.Equal]:{type:i.q.TAG_OPERATOR,value:":=",desc:`${e}:${(0,a.t)("=[value]")}`,documentation:"is equal to"},[s.oV.NotEqual]:{type:i.q.TAG_OPERATOR,value:"!:",desc:`!${e}:${(0,a.t)("[value]")}`,documentation:"is not equal to"}}}function v(e){const t=e.invalid?.expectedType??[e.filter],n=t.map((e=>s.J$[e]??[])),r=[...new Set([...t,...n.flat()])];return[...new Set(r.map((e=>s.iq[e].validOps)).flat())]}const g=[{text:"Delete",shortcutType:i.P.Delete,hotkeys:{actual:"ctrl+option+backspace"},icon:(0,c.tZ)(r.Fz,{size:"xs",color:"gray300"}),canRunShortcut:e=>e?.type===s.WU.Filter},{text:"Exclude",shortcutType:i.P.Negate,hotkeys:{actual:"ctrl+option+1"},icon:(0,c.tZ)(r.qV,{size:"xs",color:"gray300"}),canRunShortcut:e=>e?.type===s.WU.Filter&&!e.negated},{text:"Include",shortcutType:i.P.Negate,hotkeys:{actual:"ctrl+option+1"},icon:(0,c.tZ)(r.qV,{size:"xs",color:"gray300"}),canRunShortcut:e=>e?.type===s.WU.Filter&&e.negated},{text:"Previous",shortcutType:i.P.Previous,hotkeys:{actual:"ctrl+option+left"},icon:(0,c.tZ)(r.CC,{direction:"left",size:"xs",color:"gray300"}),canRunShortcut:(e,t)=>t>1||t>0&&e?.type!==s.WU.Filter},{text:"Next",shortcutType:i.P.Next,hotkeys:{actual:"ctrl+option+right"},icon:(0,c.tZ)(r.CC,{direction:"right",size:"xs",color:"gray300"}),canRunShortcut:(e,t)=>t>1||t>0&&e?.type!==s.WU.Filter}],S=(e,t)=>t===o.IV.FUNCTION?e.replace(/\(.*\)/g,"(...)"):e,y=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.pw;return[...e].reduce(((e,s)=>{const r=`${s}:`,a=s.split("."),i=t[s]?.kind===o.IV.FUNCTION?n(s.split("(")[0]):n(s),c=t[s]?.kind??i?.kind??o.IV.FIELD,l={value:r,title:S(s,c),documentation:i?.desc??"-",kind:c,deprecated:i?.deprecated,featureFlag:i?.featureFlag},u=e.at(-1),[d]=a;if(c!==o.IV.FUNCTION&&u){if(u.children&&u.title===d)return u.children.push(l),e;if(u.title&&u.title.split(".")[0]===d)return u.title===d?[...e.slice(0,-1),{title:d,value:u.value,documentation:u.documentation,kind:u.kind,children:[l]}]:[...e.slice(0,-1),{title:d,value:null,documentation:"-",kind:u.kind,children:[u,l]}]}return[...e,l]}),[])},x=(e,t,n)=>e.map((e=>({...e,children:e.children?.map((e=>e.value===t.value?{...e,active:n}:e.children&&e.children.length>0?{...e,children:e.children.map((e=>e.value===t.value?{...e,active:n}:e))}:e))}))),T=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.pw;return e.flatMap((e=>{const s=e.replaceAll(/\(.*\)/g,""),r=n(s),a=t.toLocaleLowerCase(),i=[...r?.desc?[r.desc]:[],...r?.keywords??[]].join(" ").toLocaleLowerCase(),o=s.includes(a),c=i.includes(a);return o||c?[{matchedInKey:o,matchedInKeywords:c,key:e}]:[]})).sort(((e,t)=>e.matchedInKey&&!t.matchedInKey?-1:t.matchedInKey&&!e.matchedInKey?1:e.key<t.key?-1:1)).map((e=>{let{key:t}=e;return t}))},E=[{title:(0,a.t)("Last hour"),value:"-1h",desc:"-1h",type:i.q.TAG_VALUE},{title:(0,a.t)("Last 24 hours"),value:"-24h",desc:"-24h",type:i.q.TAG_VALUE},{title:(0,a.t)("Last 7 days"),value:"-7d",desc:"-7d",type:i.q.TAG_VALUE},{title:(0,a.t)("Last 14 days"),value:"-14d",desc:"-14d",type:i.q.TAG_VALUE},{title:(0,a.t)("Last 30 days"),value:"-30d",desc:"-30d",type:i.q.TAG_VALUE},{title:(0,a.t)("After a custom datetime"),value:">",desc:">YYYY-MM-DDThh:mm:ss",type:i.q.TAG_VALUE_ISO_DATE},{title:(0,a.t)("Before a custom datetime"),value:"<",desc:"<YYYY-MM-DDThh:mm:ss",type:i.q.TAG_VALUE_ISO_DATE},{title:(0,a.t)("At a custom datetime"),value:"=",desc:"=YYYY-MM-DDThh:mm:ss",type:i.q.TAG_VALUE_ISO_DATE}],_=e=>[{searchItems:E,recentSearchItems:[],tagName:e,type:i.q.TAG_VALUE}],b=e=>{const t={sizeKeys:[],durationKeys:[],percentageKeys:[],numericKeys:[]};return e&&Object.keys(e).forEach((n=>{const{fieldType:s}=e[n];switch(s){case"size":t.sizeKeys.push(n);break;case"duration":t.durationKeys.push(n);break;case"percentage":t.percentageKeys.push(n);break;default:t.numericKeys.push(n)}})),{sizeKeys:new Set(t.sizeKeys),durationKeys:new Set(t.durationKeys),percentageKeys:new Set(t.percentageKeys),numericKeys:new Set(t.numericKeys)}}},"./app/stores/savedSearchesStore.tsx":(e,t,n)=>{n.d(t,{Z:()=>i});var s=n("../node_modules/lodash/findIndex.js"),r=n.n(s);const a={state:{savedSearches:[],hasError:!1,isLoading:!0},init(){this.reset()},reset(){this.state={savedSearches:[],hasError:!1,isLoading:!0}},get(){return this.state},getFilteredSearches(e,t){return this.state.savedSearches.filter((n=>!(n.isPinned&&n.type===e&&!n.isGlobal&&n.id!==t))).map((e=>void 0!==t&&t===e.id?e:{...e,isPinned:!1}))},updateExistingSearch(e,t){const n=r()(this.state.savedSearches,(t=>t.id===e));if(-1===n)return null;const s={...this.state.savedSearches[n],...t};return this.state.savedSearches[n]=s,s},findByQuery(e,t){return this.state.savedSearches.find((n=>e===n.query&&t===n.sort))},onReset(){this.reset(),this.trigger(this.state)},onStartFetchSavedSearches(){this.state={...this.state,isLoading:!0},this.trigger(this.state)},onFetchSavedSearchesSuccess(e){Array.isArray(e)||(e=[]),this.state={...this.state,savedSearches:e,isLoading:!1},this.trigger(this.state)},onFetchSavedSearchesError(e){this.state={...this.state,savedSearches:[],isLoading:!1,hasError:!0},this.trigger(this.state)},onCreateSavedSearchSuccess(e){this.state={...this.state,savedSearches:[...this.state.savedSearches,e]},this.trigger(this.state)},onDeleteSavedSearchSuccess(e){this.state={...this.state,savedSearches:this.state.savedSearches.filter((t=>t.id!==e.id))},this.trigger(this.state)},onPinSearch(e,t,n){const s=this.findByQuery(t,n);s&&this.updateExistingSearch(s.id,{isPinned:!0});const r=s?[]:[{id:null,name:"My Pinned Search",type:e,query:t,sort:n,isPinned:!0}];this.state={...this.state,savedSearches:[...r,...this.getFilteredSearches(e,s&&s.id)]},this.trigger(this.state)},onPinSearchSuccess(e){const t=this.findByQuery(e.query,e.sort);t&&this.updateExistingSearch(t.id,e),this.trigger(this.state)},onUnpinSearch(e){this.state={...this.state,savedSearches:this.getFilteredSearches(e)},this.trigger(this.state)}},i=(0,n("../node_modules/reflux/src/index.js").createStore)(a)},"./app/utils/discover/charts.tsx":(e,t,n)=>{n.d(t,{CX:()=>i,Xp:()=>d,gu:()=>c,x1:()=>l});var s=n("./app/locale.tsx"),r=n("./app/utils.tsx"),a=n("./app/utils/formatters.tsx");function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"number";return(0,r.ri)(e)?o(e,t):"—"}function o(e,t){if(!(0,r.ri)(e))return"—";switch(t){case"integer":case"number":return e.toLocaleString();case"percentage":return(0,a.rl)(e,2);case"duration":return(0,a.g9)(e/1e3,2,!0);case"size":return(0,r.F)(e);default:return e.toString()}}function c(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3?arguments[3]:void 0;return l(e,t,n,s)}function l(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3?arguments[3]:void 0;switch(t){case"integer":case"number":return n?(0,a.Du)(e):e.toLocaleString();case"percentage":return(0,a.rl)(e,0);case"duration":return u(e,s);case"size":return(0,r.F)(e,0);default:return e.toString()}}function u(e,t){if(t??=p(e),0===e)return"0";switch(t){case a.ps:{const t=(e/a.ps).toFixed(0);return(0,s.t)("%swk",t)}case a.x4:{const t=(e/a.x4).toFixed(0);return(0,s.t)("%sd",t)}case a.kr:{const t=(e/a.kr).toFixed(0);return(0,s.t)("%shr",t)}case a.EB:{const t=(e/a.EB).toFixed(0);return(0,s.t)("%smin",t)}case a.sh:{const t=(e/a.sh).toFixed(0);return(0,s.t)("%ss",t)}default:const t=e.toFixed(0);return(0,s.t)("%sms",t)}}function d(e,t){let n=0;const s=function(e,t){let n;if(e[0]?.data){let s,r=e[0];e.forEach(((n,a)=>{let{seriesName:i,data:o}=n;!1!==t?.selected?.[i]&&o.length&&(r=e[a],s??=e[a])})),s?.data&&(n={max:Math.max(...s.data.map((e=>{let{value:t}=e;return t})).filter((e=>!!e))),min:Math.min(...r.data.map((e=>{let{value:t}=e;return t})).filter((e=>!!e)))})}return n}(e,t);if(s){const e=(s.max+s.min)/2;n=p((s.max-s.min)/5),(e/n).toFixed(0).length>6&&(n=p(e))}return n}function p(e){return e>=a.ps?a.ps:e>=a.x4?a.x4:e>=a.kr?a.kr:e>=a.EB?a.EB:e>=a.sh?a.sh:1}},"./app/utils/performance/contexts/metricsCardinality.tsx":(e,t,n)=>{n.d(t,{BT:()=>x,e0:()=>E}),n("../node_modules/core-js/modules/es.array.includes.js");var s=n("../node_modules/react/index.js"),r=n("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),a=n("./app/utils/dates.tsx"),i=n("./app/utils/discover/eventView.tsx"),o=n("./app/utils/performance/contexts/metricsEnhancedSetting.tsx"),c=n("../node_modules/lodash/omit.js"),l=n.n(c),u=n("./app/utils/discover/genericDiscoverQuery.tsx"),d=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function p(e){let{eventView:t,location:n}=e;return l()(t.getEventsAPIPayload(n),["field","sort","per_page","query"])}function m(e){let{children:t,...n}=e;return(0,d.tZ)(u.ZP,{route:"metrics-compatibility-sums",getRequestPayload:p,...n,children:e=>{let{tableData:n,...s}=e;return t({tableData:n,...s})}})}function h(e){let{eventView:t,location:n}=e;return l()(t.getEventsAPIPayload(n),["field","sort","per_page","query"])}function f(e){let{children:t,...n}=e;return(0,d.tZ)(u.ZP,{route:"metrics-compatibility",getRequestPayload:h,...n,children:e=>{let{tableData:n,...s}=e;return t({tableData:n,...s})}})}m.displayName="MetricsCompatibilityQuery",f.displayName="MetricsCompatibilitySumsQuery";var v=n("./app/utils/performance/contexts/utils.tsx");const[g,S,y]=(0,v.n)({name:"MetricsCardinalityContext",strict:!1}),x=e=>{if(!(0,o.gp)(e.organization))return(0,d.tZ)(g,{value:{isLoading:!1,outcome:{forceTransactionsOnly:!0}},children:e.children});const t={location:e.location,orgSlug:e.organization.slug,cursor:"0:0:0"},n=i.ZP.fromLocation(e.location);n.fields=[{field:"tpm()"}];const r=function(e){const t=e.clone();return t.start||t.end||(t.statsPeriod?(0,a.YJ)(t.statsPeriod)>1&&(t.statsPeriod="1h",t.start=void 0,t.end=void 0):(t.statsPeriod="1h",t.start=void 0,t.end=void 0)),t}(n);return(0,d.tZ)(s.Fragment,{children:(0,d.tZ)(m,{eventView:r,...t,children:n=>(0,d.tZ)(f,{eventView:r,...t,children:t=>{const s=n.isLoading||t.isLoading,r=n.isLoading||t.isLoading?void 0:function(e,t,n){const s={forceTransactionsOnly:!0},r=n.features.includes("performance-mep-bannerless-ui");if(!e)return s;const a=e.compatible_projects;return t?s:e?function(e){return!_(e).metricsCount}(e)?s:function(e,t){const n=_(e);return t?n.nullCount/n.metricsCount>.01:n.nullCount>0}(e,r)?{shouldWarnIncompatibleSDK:!0,forceTransactionsOnly:!0,compatibleProjects:a}:function(e){const t=_(e);return t.unparamCount>=t.metricsCount}(e)?{shouldNotifyUnnamedTransactions:!0,forceTransactionsOnly:!0,compatibleProjects:a}:function(e,t){const n=_(e);return t?n.unparamCount/n.metricsCount>.01:n.unparamCount>0}(e,r)?{shouldNotifyUnnamedTransactions:!0,compatibleProjects:a,forceTransactionsOnly:!1}:{forceTransactionsOnly:!1}:s}(n.tableData&&t.tableData?{...n.tableData,...t.tableData}:null,!!n.error&&!!t.error,e.organization);return(0,d.tZ)(T,{sendOutcomeAnalytics:e.sendOutcomeAnalytics,organization:e.organization,value:{isLoading:s,outcome:r},children:e.children})}})})})};x.displayName="MetricsCardinalityProvider";const T=e=>{const t=e.value.outcome?.shouldWarnIncompatibleSDK??!1,n=e.value.outcome?.shouldNotifyUnnamedTransactions??!1,a=!e.value.outcome?.forceTransactionsOnly;return(0,s.useEffect)((()=>{!e.value.isLoading&&e.sendOutcomeAnalytics&&(0,r.Z)("performance_views.mep.metrics_outcome",{organization:e.organization,is_on_metrics:a,fallback_from_null:t,fallback_from_unparam:n})}),[e.organization,e.value.isLoading,a,n,t,e.sendOutcomeAnalytics]),(0,d.tZ)(g,{...e,children:e.children})};T.displayName="Provider",y.Consumer;const E=S;function _(e){let{sum:t}=e;try{const e=Number(t.metrics);return{metricsCount:e,unparamCount:Number(t.metrics_unparam),nullCount:Number(t.metrics_null)}}catch(e){return{metricsCount:0,unparamCount:0,nullCount:0}}}},"./app/utils/performance/contexts/metricsEnhancedSetting.tsx":(e,t,n)=>{n.d(t,{Ar:()=>f,Eg:()=>y,gp:()=>g,kP:()=>S,nP:()=>p,nl:()=>m,oR:()=>h,tm:()=>v}),n("../node_modules/core-js/modules/es.array.includes.js");var s=n("../node_modules/react/index.js"),r=n("../node_modules/react-router/es/index.js"),a=(n("./app/utils/localStorage.tsx"),n("./app/utils/queryString.tsx")),i=n("./app/utils/useOrganization.tsx"),o=n("./app/utils/performance/contexts/utils.tsx"),c=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const[l,u,d]=(0,o.n)({name:"MetricsEnhancedSettingContext"}),p=d.Consumer;let m,h;!function(e){e.unset="unset",e.metrics="metrics",e.transactions="transactions"}(m||(m={})),function(e){e.auto="auto",e.metricsOnly="metricsOnly",e.transactionsOnly="transactionsOnly"}(h||(h={}));const f="metricSetting",v="metricSearchSetting";function g(e){const t=function(e){return e.features.includes("performance-use-metrics")}(e),n=e.features.includes("performance-transaction-name-only-search"),s=e.features.includes("server-side-sampling")&&e.features.includes("mep-rollout-flag");return t||n||s}const S=e=>{let{children:t,location:n,_hasMEPState:o,forceTransactions:u}=e;const d=g((0,i.Z)()),p=[h.metricsOnly,h.transactionsOnly],v=n?(0,a.ro)(n.query[f]):h.metricsOnly;let S=h.metricsOnly;u&&(S=h.transactionsOnly);const y=p.find((e=>e===v))??S,x=void 0!==o,[T,E]=(0,s.useReducer)(((e,t)=>t),y),_=(0,s.useCallback)((e=>{n&&(r.browserHistory.replace({...n,query:{...n.query,[f]:e}}),E(e))}),[n,E]),[b,w]=(0,s.useReducer)(((e,t)=>t),m.unset),A=x?o:T,P=d&&A===h.auto,I=d&&A===h.metricsOnly,R=d&&A===h.transactionsOnly,j=`${A}`;return(0,c.tZ)(l,{value:{autoSampleState:b,metricSettingState:A,shouldQueryProvideMEPAutoParams:P,shouldQueryProvideMEPMetricParams:I,shouldQueryProvideMEPTransactionParams:R,memoizationKey:j,setMetricSettingState:_,setAutoSampleState:w},children:t})};S.displayName="MEPSettingProvider";const y=u},"./app/utils/performance/quickTrace/utils.tsx":(e,t,n)=>{n.d(t,{$J:()=>y,Ci:()=>_,R8:()=>f,S2:()=>x,_Z:()=>S,eF:()=>g,eW:()=>m,hp:()=>d,q2:()=>p,xB:()=>T,y3:()=>E}),n("../node_modules/core-js/modules/es.error.cause.js");var s=n("../node_modules/lodash/omit.js"),r=n.n(s),a=n("../node_modules/moment-timezone/index.js"),i=n.n(a),o=n("./app/components/events/interfaces/spans/utils.tsx"),c=n("./app/constants/pageFilters.tsx"),l=n("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),u=n("./app/utils/discover/eventView.tsx");function d(e){return"transaction"===e.type}function p(e,t){return d(t)?e.event_id===t.id:void 0!==e.errors&&e.errors.some((e=>e.event_id===t.id))}function m(e,t){const n=[],s=[],r=[{event:t,path:[]}];for(;r.length;){const t=r.shift();if(p(t.event,e)){for(const e of t.path)n.push(e);s.push(t.event)}else{const e=[...t.path,h(t.event)];for(const n of t.event.children)r.push({event:n,path:e})}}if(!s.length)throw new Error("No relevant path exists!");for(;s.length;){const e=s.shift();for(const t of e.children)s.push(t);n.push(h(e))}return n}function h(e){return r()(e,["children"])}function f(e,t,n){const{type:s,trace:r}=e;if("empty"===s||null===r)throw new Error("Current event not in trace navigator!");const a="full"===s,i=r.find((e=>p(e,t)))??null;if(null===i)throw new Error("Current event not in trace navigator!");const o=i.parent_event_id?r.find((e=>e.event_id===i.parent_event_id))??null:null,c=r.find((e=>e.event_id!==i.event_id&&e.event_id!==o?.event_id&&0===e.generation))??null,u=a?[]:null,d=[],m=a?[]:null,h=new Set;return r.forEach((e=>{h.add(e.project_id),(e=>e.parent_event_id===i.event_id)(e)?d.push(e):a&&((e=>null!==i.generation&&null!==e.generation&&e.generation>0&&i.generation-1>e.generation)(e)?u?.push(e):(e=>null!==i.generation&&null!==e.generation&&i.generation+1<e.generation)(e)&&m?.push(e))})),a&&h.size>1&&function(e,t){(0,l.Z)("quick_trace.connected_services",{organization:e.id,projects:t})}(n,h.size),{root:c,ancestors:null===u?null:v(u),parent:o,current:i,children:v(d),descendants:null===m?null:v(m)}}function v(e){return e.sort(((e,t)=>t["transaction.duration"]-e["transaction.duration"]))}function g(e){let{eventView:t,location:n}=e;return r()(t.getEventsAPIPayload(n),["field","sort","per_page"])}function S(e){let{start:t,end:n,statsPeriod:s}=e;return u.ZP.fromSavedQuery({id:void 0,version:2,name:"",fields:["transaction.duration"],projects:[c.mP],query:"",environment:[],start:t,end:n,range:s??void 0})}function y(e){const t=d(e)?e.startTimestamp:i()(e.dateReceived?e.dateReceived:e.dateCreated).valueOf()/1e3,n=d(e)?e.endTimestamp:t;return(0,o.TC)({start:t,end:n})}function x(e,t,n){let s=n;const r=[e];for(;r.length;){const e=r.pop();for(const t of e.children)r.push(t);s=t(s,e)}return s}function T(e,t){return x(e,((e,n)=>(t(n)&&e.push(n),e)),[])}function E(e){return Boolean(e.event_id)}function _(e){return Boolean(e.event_id)}},"./app/views/performance/landing/metricsDataSwitcher.tsx":(e,t,n)=>{n.d(t,{d:()=>d});var s=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=n("../node_modules/react/index.js"),a=n("../node_modules/react-router/es/index.js"),i=n("./app/components/loadingIndicator.tsx"),o=n("./app/utils/performance/contexts/metricsCardinality.tsx"),c=n("./app/utils/performance/contexts/metricsEnhancedSetting.tsx"),l=n("./app/utils/queryString.tsx"),u=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(e){const t=(0,c.gp)(e.organization),n=(0,o.e0)();return t?n.isLoading&&!e.hideLoadingIndicator?(0,u.tZ)(r.Fragment,{children:(0,u.tZ)(m,{children:(0,u.tZ)(i.Z,{})})}):n.outcome?(0,u.tZ)(r.Fragment,{children:(0,u.tZ)(p,{eventView:e.eventView,location:e.location,outcome:n.outcome,switcherChildren:e.children})}):(0,u.tZ)(r.Fragment,{children:e.children({forceTransactionsOnly:!0})}):(0,u.tZ)(r.Fragment,{children:e.children({forceTransactionsOnly:!0})})}function p(e){let{switcherChildren:t,outcome:n,location:s,eventView:i}=e;const{query:o}=s,d=(0,l.ro)(o[c.tm],""),p=(0,l.ro)(o.query,""),m=d===c.oR.transactionsOnly,h=p&&m&&!n.forceTransactionsOnly;return(0,r.useEffect)((()=>{h&&a.browserHistory.push({pathname:s.pathname,query:{...s.query,cursor:void 0,query:void 0,[c.tm]:void 0}})}),[h,s]),p&&m&&!n.forceTransactionsOnly&&(i.query=""),(0,u.tZ)(r.Fragment,{children:t(n)})}d.displayName="MetricsDataSwitcher",p.displayName="MetricsSwitchHandler";const m=(0,s.Z)("div",{target:"e1r04u5n0"})({name:"zl1inp",styles:"display:flex;justify-content:center"})},"./app/views/performance/trends/types.tsx":(e,t,n)=>{let s,r,a;n.d(t,{A2:()=>a,ER:()=>s,Z2:()=>r}),function(e){e.IMPROVED="improved",e.REGRESSION="regression"}(s||(s={})),function(e){e.P50="p50",e.P75="p75",e.P95="p95",e.P99="p99",e.AVG="avg"}(r||(r={})),function(e){e.DURATION="transaction.duration",e.LCP="measurements.lcp",e.FCP="measurements.fcp",e.FID="measurements.fid",e.CLS="measurements.cls",e.SPANS_DB="spans.db",e.SPANS_HTTP="spans.http",e.SPANS_BROWSER="spans.browser",e.SPANS_RESOURCE="spans.resource"}(a||(a={}))},"./app/views/performance/trends/utils.tsx":(e,t,n)=>{n.d(t,{CE:()=>_,HF:()=>D,IO:()=>b,Kt:()=>A,P4:()=>O,RP:()=>V,T1:()=>v,Ws:()=>E,_1:()=>h,_H:()=>P,bg:()=>f,cs:()=>g,ed:()=>w,es:()=>S,iF:()=>R,j_:()=>q,kM:()=>I,vq:()=>C,vt:()=>T,wx:()=>j}),n("../node_modules/core-js/modules/es.array.includes.js");var s=n("../node_modules/downsample/methods/ASAP.js"),r=n("../node_modules/moment/moment.js"),a=n.n(r),i=n("./app/components/charts/utils.tsx"),o=n("./app/locale.tsx"),c=n("./app/utils/discover/fields.tsx"),l=n("./app/utils/queryString.tsx"),u=n("./app/utils/theme.tsx"),d=n("./app/utils/tokenizeSearch.tsx"),p=n("./app/views/performance/utils.tsx"),m=n("./app/views/performance/trends/types.tsx");const h="14d",f="15min",v=[{label:"p50",field:m.Z2.P50,alias:"percentile_range",legendLabel:"p50"},{label:"p75",field:m.Z2.P75,alias:"percentile_range",legendLabel:"p75"},{label:"p95",field:m.Z2.P95,alias:"percentile_range",legendLabel:"p95"},{label:"p99",field:m.Z2.P99,alias:"percentile_range",legendLabel:"p99"},{label:"average",field:m.Z2.AVG,alias:"avg_range",legendLabel:"average"}],g=[{label:"Duration",column:m.A2.DURATION},{label:"LCP",column:m.A2.LCP},{label:"FCP",column:m.A2.FCP},{label:"FID",column:m.A2.FID},{label:"CLS",column:m.A2.CLS},{label:"Spans (http)",column:m.A2.SPANS_HTTP},{label:"Spans (db)",column:m.A2.SPANS_DB},{label:"Spans (browser)",column:m.A2.SPANS_BROWSER},{label:"Spans (resource)",column:m.A2.SPANS_RESOURCE}],S={[m.ER.IMPROVED]:{lighter:u.ZP.green200,default:u.ZP.green300},[m.ER.REGRESSION]:{lighter:u.ZP.red200,default:u.ZP.red300}},y={[m.ER.IMPROVED]:"improvedSelected",[m.ER.REGRESSION]:"regressionSelected"},x={[m.ER.IMPROVED]:"improvedUnselectedSeries",[m.ER.REGRESSION]:"regressionUnselectedSeries"},T={[m.ER.IMPROVED]:"improvedCursor",[m.ER.REGRESSION]:"regressionCursor"};function E(){const e={};return Object.values(T).forEach((t=>e[t]=void 0)),e}function _(e,t){const n=t??(0,l.ro)(e?.query?.trendFunction);return v.find((e=>{let{field:t}=e;return t===n}))||v[0]}function b(e,t,n){const s=(0,l.ro)(e?.query?.trendParameter),r=g.find((e=>{let{label:t}=e;return t===s}));return r||function(e,t){return function(e){switch(e){case p.iy.FRONTEND:return{label:"LCP",column:m.A2.LCP};case p.iy.ANY:case p.iy.BACKEND:case p.iy.FRONTEND_OTHER:default:return{label:"Duration",column:m.A2.DURATION}}}((0,p.Bh)(e,t))}(t,n)}function w(e,t){return(0,c.sN)({kind:"function",function:[e,t,void 0,void 0]})}function A(e,t){return{fromSeconds:e/1e3,toSeconds:t/1e3,showDigits:e>1e3||t>1e3||e<10||t<10}}function P(e,t){if(e.project&&t)return t.find((t=>t.slug===e.project))?.id}function I(e,t,n,s,r){const a=_(t),o=b(t,s,e.project),c=[...r?[]:["transaction"],"project"].map((e=>({field:e}))),u={field:"trend_percentage()",kind:"asc"};e.trendType=n,n===m.ER.REGRESSION&&(u.kind="desc"),a&&o&&(e.trendFunction=w(a.field,o.column)),e.query=function(e){const t=new d.MY(e);return t.hasFilter("count_percentage()")||t.addFilterValues("count_percentage()",[">0.25","<4"]),t.hasFilter("trend_percentage()")||t.addFilterValues("trend_percentage()",[">0%"]),t.hasFilter("confidence()")||t.addFilterValues("confidence()",[">6"]),t.formatString()}(e.query),e.interval=function(e,t){const n=(0,l.ro)(e?.query?.interval),{start:s,end:r,statsPeriod:a}=t,o={start:s||null,end:r||null,period:a},c=(0,i.ZS)(o,"high");return n||c}(t,e),e.sorts=[u],e.fields=c}function R(e,t){const{query:n}=t,s=n.start&&n.end;return n.statsPeriod||s||(e.statsPeriod=h),e}function j(e,t){const n=Math.abs(e);return{seconds:n/1e3,fixedDigits:n>1e3||n<10?1:0,changeLabel:t===m.ER.REGRESSION?(0,o.t)("slower"):(0,o.t)("faster")}}function V(e){const t=a()();return e.map((e=>({...e,received_at:t,transaction:e.transaction})))}function q(e){return y[e]}function O(e){return x[e]}const Z=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return(0,s.Cl)(e,t)},D=e=>["p50","p75"].find((t=>e.includes(t)));function C(e,t){let n=Number.MAX_SAFE_INTEGER,s=0;if(!e)return{maxValue:s,minValue:n,smoothedResults:void 0};const r=[];for(const a of e){const e=a.data,i=[],o=Z(e.map((e=>{let{name:t,value:n}=e;return[Number(t),n]})));for(let e=0;e<o.length;e++){const t=o[e],r=t.y;if(i.push({name:t.x,value:r}),!isNaN(r)){const e=Math.round(r);n=Math.min(e,n),s=Math.max(e,s)}}r.push({seriesName:t||a.seriesName||"Current",data:i,lineStyle:a.lineStyle,color:a.color})}return{minValue:n,maxValue:s,smoothedResults:r}}},"./app/views/performance/utils.tsx":(e,t,n)=>{n.d(t,{Bh:()=>b,C$:()=>w,Ik:()=>A,JY:()=>D,Ov:()=>j,Pv:()=>S,R8:()=>V,U7:()=>v,Ws:()=>R,YL:()=>C,al:()=>q,bY:()=>F,de:()=>I,iL:()=>P,iy:()=>y,m_:()=>O,n4:()=>Z,og:()=>g,p9:()=>L,rL:()=>N,uq:()=>x}),n("../node_modules/core-js/modules/es.array.includes.js");var s=n("../node_modules/react-router/es/index.js"),r=n("./app/constants/pageFilters.tsx"),a=n("./app/data/platformCategories.tsx"),i=n("./app/locale.tsx"),o=n("./app/utils/analytics.tsx"),c=n("./app/utils/dates.tsx"),l=n("./app/utils/discover/eventView.tsx"),u=n("./app/utils/discover/fields.tsx"),d=n("./app/utils/formatters.tsx");if("app"==n.j)var p=n("./app/utils/getCurrentSentryReactTransaction.tsx");var m=n("./app/utils/queryString.tsx"),h=n("./app/utils/tokenizeSearch.tsx"),f=n("./app/views/performance/trends/utils.tsx");const v="app"==n.j?["environment","project","query","start","end","statsPeriod"]:null,g="<< unparameterized >>";let S,y;function x(e){const t=e.source===S.DISCOVER?["transaction","project","transaction.source","epm()"]:["transaction","project","transaction.source","epm()","p50()","p95()"],n={id:void 0,name:e.source===S.DISCOVER?(0,i.t)("Unparameterized Transactions"):(0,i.t)("Performance - Unparameterized Transactions"),query:'event.type:transaction transaction.source:"url"',projects:[],fields:t,version:2},s=l.ZP.fromNewQueryWithLocation(n,e.location).withSorts([{field:"epm",kind:"desc"}]).getResultsViewUrlTarget(e.organization.slug);return s.query.showUnparameterizedBanner="true",s}!function(e){e.PERFORMANCE="performance",e.DISCOVER="discover"}(S||(S={})),function(e){e.ANY="any",e.FRONTEND="frontend",e.BACKEND="backend",e.FRONTEND_OTHER="frontend_other",e.MOBILE="mobile"}(y||(y={}));const T=[...a.tQ],E=a.y3.filter((e=>"native"!==e)),_=[...a.ai];function b(e,t){if(0===t.length||t[0]===r.mP)return y.ANY;const n=e.filter((e=>t.includes(parseInt(`${e.id}`,10))));return 0===n.length||n.some((e=>!e.platform))?y.ANY:n.every((e=>T.includes(e.platform)))?y.FRONTEND:n.every((e=>E.includes(e.platform)))?y.BACKEND:n.every((e=>_.includes(e.platform)))?y.MOBILE:y.ANY}function w(e,t){const n=b(e,t.project);return n===y.FRONTEND&&new h.MY(t.query).getFilterValues("!transaction.op").some((e=>"pageload"===e))?y.FRONTEND_OTHER:n}function A(e,t){return w(t,e)===y.FRONTEND}function P(e,t){return w(t,e)===y.FRONTEND||w(t,e)===y.FRONTEND_OTHER}function I(e){return`/organizations/${e.slug}/performance/`}function R(e){return`/organizations/${e.slug}/performance/trends/`}function j(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(0,m.ro)(e.query.query,t).trim()}function V(e){let{location:t,organization:n,projectPlatforms:r}=e;(0,o.ec)({eventKey:"performance_views.change_view",eventName:"Performance Views: Change View",organization_id:parseInt(n.id,10),view_name:"TRENDS",project_platforms:r});const a=q({location:t,organization:n});s.browserHistory.push(a)}function q(e){let{location:t,organization:n,initialConditions:s,additionalQuery:r}=e;const a={...t.query,...r},i=(0,m.ro)(t.query.query,""),o=new h.MY(i),c=s??new h.MY([]);return o.hasFilter("tpm()")?c.setFilterValues("tpm()",o.getFilterValues("tpm()")):c.setFilterValues("tpm()",[">0.01"]),o.hasFilter("transaction.duration")?c.setFilterValues("transaction.duration",o.getFilterValues("transaction.duration")):c.setFilterValues("transaction.duration",[">0",`<${f.bg}`]),a.query=c.formatString(),{pathname:R(n),query:{...a}}}function O(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{excludeTagKeys:new Set(["event.type","project"])};return e.getFilterKeys().forEach((n=>{const s=n.startsWith("!")?n.substr(1):n;(s.match(/\w+\(.*\)/)||u.J8.includes(s)||t.excludeTagKeys.has(s))&&e.removeFilter(n)})),e}function Z(e){const t=(0,p.Z)(),n=(0,c.Ri)(e.datetime.period,e.datetime.start,e.datetime.end),s=Math.floor(86400*n);t?.setTag("query.period",s.toString());let r=">30d";s<=86400?r="<=1d":s<=604800?r="<=7d":s<=1209600?r="<=14d":s<=2592e3&&(r="<=30d"),t?.setTag("query.period.grouped",r)}function D(e){const{transaction:t}=e.query;return(0,m.ro)(t)}function C(e){return(0,d.g9)(e/1e3,e>1e3?2:0,!0)}function N(e){return!e.project.length||1===e.project.length&&e.project[0]===r.mP}function F(e,t){const n=e.query.project,s=Array.isArray(n)?new Set(n):new Set([n]);return t.reduce(((e,t)=>(s.has(t.id)&&e.push(t.platform??"undefined"),e)),[])}function L(e,t){return F(e,t).join(", ")}}}]);
//# sourceMappingURL=../sourcemaps/app_components_forms_apiForm_tsx-app_components_forms_fields_checkboxField_tsx-app_components-7d3156.b914118e6f58578b988537848e4a8918.js.map