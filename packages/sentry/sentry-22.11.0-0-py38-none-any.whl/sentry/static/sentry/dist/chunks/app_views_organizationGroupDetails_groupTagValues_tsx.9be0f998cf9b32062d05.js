"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_organizationGroupDetails_groupTagValues_tsx"],{"./app/components/dataExport.tsx":(e,i,t)=>{t.d(i,{ZP:()=>g,tD:()=>P});var n=t("../node_modules/react/index.js"),o=t("../node_modules/lodash/debounce.js"),a=t.n(o),r=t("./app/actionCreators/indicator.tsx"),s=t("./app/components/acl/feature.tsx"),d=t("./app/components/button.tsx"),l=t("./app/locale.tsx"),h=t("./app/utils/withApi.tsx"),c=t("./app/utils/withOrganization.tsx"),p=t("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");let P;function u(e){let{api:i,children:t,disabled:o,organization:h,payload:c,icon:P}=e;const u=(0,n.useRef)(!1),[g,m]=(0,n.useState)(!1);(0,n.useEffect)((()=>{g&&m(!1)}),[c.queryType,c.queryInfo]),(0,n.useEffect)((()=>()=>{u.current=!0}),[]);const y=(0,n.useCallback)((()=>{m(!0),i.requestPromise(`/organizations/${h.slug}/data-export/`,{includeAllArgs:!0,method:"POST",data:{query_type:c.queryType,query_info:c.queryInfo}}).then((e=>{let[i,t,n]=e;u.current||(0,r.S9)(201===n?.status?(0,l.t)("Sit tight. We'll shoot you an email when your data is ready for download."):(0,l.t)("It looks like we're already working on it. Sit tight, we'll email you."))})).catch((e=>{if(u.current)return;const i=e?.responseJSON?.detail??(0,l.t)("We tried our hardest, but we couldn't export your data. Give it another go.");(0,r.Iw)(i),m(!1)}))}),[c.queryInfo,c.queryType,h.slug,i]);return(0,p.tZ)(s.Z,{features:["organizations:discover-query"],children:g?(0,p.tZ)(d.ZP,{size:"sm",priority:"default",title:(0,l.t)("You can get on with your life. We'll email you when your data's ready."),disabled:!0,icon:P,children:(0,l.t)("We're working on it...")}):(0,p.tZ)(d.ZP,{onClick:a()(y,500),disabled:o||!1,size:"sm",priority:"default",title:(0,l.t)("Put your data to work. Start your export and we'll email you when it's finished."),icon:P,children:t||(0,l.t)("Export All to CSV")})})}!function(e){e.IssuesByTag="Issues-by-Tag",e.Discover="Discover"}(P||(P={})),u.displayName="DataExport";const g=(0,h.Z)((0,c.Z)(u))},"./app/components/deviceName.tsx":(e,i,t)=>{t.d(i,{H:()=>s,q:()=>r});var n=t("../node_modules/react/index.js");const o={"iPod1,1":"iPod touch","iPod2,1":"iPod touch (2nd generation)","iPod3,1":"iPod touch (3rd generation)","iPod4,1":"iPod touch (4th generation)","iPod5,1":"iPod touch (5th generation)","iPod7,1":"iPod touch (6th generation)","iPod9,1":"iPod touch (7th generation)","iPhone1,1":"iPhone","iPhone1,2":"iPhone 3G","iPhone2,1":"iPhone 3GS","iPhone3,1":"iPhone 4","iPhone3,2":"iPhone 4","iPhone3,3":"iPhone 4","iPhone4,1":"iPhone 4S","iPhone5,1":"iPhone 5","iPhone5,2":"iPhone 5","iPhone5,3":"iPhone 5c","iPhone5,4":"iPhone 5c","iPhone6,1":"iPhone 5s","iPhone6,2":"iPhone 5s","iPhone8,4":"iPhone SE (1st generation)","iPhone7,2":"iPhone 6","iPhone7,1":"iPhone 6 Plus","iPhone8,1":"iPhone 6s","iPhone8,2":"iPhone 6s Plus","iPhone9,1":"iPhone 7","iPhone9,3":"iPhone 7","iPhone9,2":"iPhone 7 Plus","iPhone9,4":"iPhone 7 Plus","iPhone10,1":"iPhone 8","iPhone10,4":"iPhone 8","iPhone10,2":"iPhone 8 Plus","iPhone10,5":"iPhone 8 Plus","iPhone10,3":"iPhone X","iPhone10,6":"iPhone X","iPhone11,8":"iPhone XR","iPhone11,2":"iPhone XS","iPhone11,4":"iPhone XS Max","iPhone11,6":"iPhone XS Max","iPhone12,1":"iPhone 11","iPhone12,3":"iPhone 11 Pro","iPhone12,5":"iPhone 11 Pro Max","iPhone12,8":"iPhone SE (2nd generation)","iPhone13,1":"iPhone 12 mini","iPhone13,2":"iPhone 12","iPhone13,3":"iPhone 12 Pro","iPhone13,4":"iPhone 12 Pro Max","iPad6,7":"iPad Pro (12.9-inch)","iPad6,8":"iPad Pro (12.9-inch)","iPad6,3":"iPad Pro (9.7-inch)","iPad6,4":"iPad Pro (9.7-inch)","iPad7,1":"iPad Pro (12.9-inch, 2nd generation)","iPad7,2":"iPad Pro (12.9-inch, 2nd generation)","iPad7,3":"iPad Pro (10.5-inch)","iPad7,4":"iPad Pro (10.5-inch)","iPad8,1":"iPad Pro (11-inch)","iPad8,2":"iPad Pro (11-inch)","iPad8,3":"iPad Pro (11-inch)","iPad8,4":"iPad Pro (11-inch)","iPad8,5":"iPad Pro (12.9-inch) (3rd generation)","iPad8,6":"iPad Pro (12.9-inch) (3rd generation)","iPad8,7":"iPad Pro (12.9-inch) (3rd generation)","iPad8,8":"iPad Pro (12.9-inch) (3rd generation)","iPad8,9":"iPad Pro (11-inch) (2nd generation)","iPad8,10":"iPad Pro (11-inch) (2nd generation)","iPad8,11":"iPad Pro (12.9-inch) (4th generation)","iPad8,12":"iPad Pro (12.9-inch) (4th generation)","iPad2,5":"iPad mini","iPad2,6":"iPad mini","iPad2,7":"iPad mini","iPad4,4":"iPad mini 2","iPad4,5":"iPad mini 2","iPad4,6":"iPad mini 2","iPad4,7":"iPad mini 3","iPad4,8":"iPad mini 3","iPad4,9":"iPad mini 3","iPad5,1":"iPad mini 4","iPad5,2":"iPad mini 4","iPad11,1":"iPad mini (5th generation)","iPad11,2":"iPad mini (5th generation)","iPad4,1":"iPad Air","iPad4,2":"iPad Air","iPad4,3":"iPad Air","iPad5,3":"iPad Air 2","iPad5,4":"iPad Air 2","iPad11,3":"iPad Air (3rd generation)","iPad11,4":"iPad Air (3rd generation)","iPad13,1":"iPad Air (4th generation)","iPad13,2":"iPad Air (4th generation)","iPad1,1":"iPad","iPad2,1":"iPad 2","iPad2,2":"iPad 2","iPad2,3":"iPad 2","iPad2,4":"iPad 2","iPad3,1":"iPad (3rd generation)","iPad3,2":"iPad (3rd generation)","iPad3,3":"iPad (3rd generation)","iPad3,4":"iPad (4th generation)","iPad3,5":"iPad (4th generation)","iPad3,6":"iPad (4th generation)","iPad6,11":"iPad (5th generation)","iPad6,12":"iPad (5th generation)","iPad7,5":"iPad (6th generation)","iPad7,6":"iPad (6th generation)","iPad7,11":"iPad (7th generation)","iPad7,12":"iPad (7th generation)","iPad11,6":"iPad (8th generation)","iPad11,7":"iPad (8th generation)","AudioAccessory1,1":"HomePod","AudioAccessory1,2":"HomePod","AudioAccessory5,1":"HomePod mini","Watch1,1":"Apple Watch (1st generation)","Watch1,2":"Apple Watch (1st generation)","Watch2,6":"Apple Watch Series 1","Watch2,7":"Apple Watch Series 1","Watch2,3":"Apple Watch Series 2","Watch2,4":"Apple Watch Series 2","Watch3,1":"Apple Watch Series 3","Watch3,2":"Apple Watch Series 3","Watch3,3":"Apple Watch Series 3","Watch3,4":"Apple Watch Series 3","Watch4,1":"Apple Watch Series 4","Watch4,2":"Apple Watch Series 4","Watch4,3":"Apple Watch Series 4","Watch4,4":"Apple Watch Series 4","Watch5,1":"Apple Watch Series 5","Watch5,2":"Apple Watch Series 5","Watch5,3":"Apple Watch Series 5","Watch5,4":"Apple Watch Series 5","Watch5,9":"Apple Watch SE","Watch5,10":"Apple Watch SE","Watch5,11":"Apple Watch SE","Watch5,12":"Apple Watch SE","Watch6,1":"Apple Watch Series 6","Watch6,2":"Apple Watch Series 6","Watch6,3":"Apple Watch Series 6","Watch6,4":"Apple Watch Series 6","AppleTV1,1":"Apple TV (1st generation)","AppleTV2,1":"Apple TV (2nd generation)","AppleTV3,1":"Apple TV (3rd generation)","AppleTV3,2":"Apple TV (3rd generation)","AppleTV5,3":"Apple TV (4th generation)","AppleTV6,2":"Apple TV 4K","AirPods1,1":"AirPods (1st generation)","AirPods2,1":"AirPods (2nd generation)","iProd8,1":"AirPods Pro"};var a=t("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function r(i){if("string"!=typeof i)return null;if(null===e)return i;const[t,...n]=i.split(" "),a=o[t];return void 0===a?i:`${a} ${n.join(" ")}`}function s(e){let{value:i,children:t}=e;const o=(0,n.useMemo)((()=>r(i)),[i]);return o?(0,a.tZ)("span",{"data-test-id":"loaded-device-name",children:t?t(o):o}):null}e=t.hmd(e)},"./app/components/dropdownLink.tsx":(e,i,t)=>{t.d(i,{Z:()=>p});var n=t("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),o=t("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),a=t("../node_modules/classnames/index.js"),r=t.n(a),s=t("./app/components/deprecatedDropdownMenu.tsx"),d=t("./app/icons/index.tsx"),l=t("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const h=e=>(0,n.iv)(".dropdown-menu{&>li>a{color:",e.textColor,";&:hover,&:focus{color:inherit;background-color:",e.hover,";}}& .disabled{cursor:not-allowed;&:hover{background:inherit;color:inherit;}}}.dropdown-submenu:hover>span{color:",e.textColor,";background:",e.hover,";}","");function c(e){let{anchorMiddle:i,title:t,customTitle:n,children:a,menuClasses:c,className:p,topLevelClasses:P,anchorRight:u=!1,disabled:g=!1,caret:m=!0,alwaysRenderMenu:y=!0,...x}=e;const Z=(0,o.u)();return(0,l.tZ)(s.Z,{alwaysRenderMenu:y,...x,children:e=>{let{isOpen:o,getRootProps:s,getActorProps:x,getMenuProps:A}=e;const f=y||o,w=r()("dropdown-actor",p,{"dropdown-menu-right":u,"dropdown-toggle":!0,hover:o,disabled:g}),v=r()("dropdown",P,{"pull-right":u,"anchor-right":u,"anchor-middle":i,open:o}),{onClick:W,...S}=x({className:w});return(0,l.BX)("span",{css:h(Z),...s({className:v}),"data-test-id":"dropdown-link",children:[(0,l.tZ)("a",{onClick:g?void 0:W,...S,children:n||(0,l.BX)("div",{className:"dropdown-actor-title",children:[t,m&&(0,l.tZ)(d.g6,{direction:o?"up":"down",size:"xs"})]})}),f&&(0,l.tZ)("ul",{...A({className:r()(c,"dropdown-menu")}),children:a})]})}})}c.displayName="DropdownLink";const p=c},"./app/views/organizationGroupDetails/groupTagValues.tsx":(e,i,t)=>{t.r(i),t.d(i,{default:()=>j});var n=t("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=t("../node_modules/react/index.js"),a=t("./app/components/acl/feature.tsx"),r=t("./app/components/asyncComponent.tsx"),s=t("./app/components/button.tsx"),d=t("./app/components/buttonBar.tsx"),l=t("./app/components/dataExport.tsx"),h=t("./app/components/deviceName.tsx"),c=t("./app/components/dropdownLink.tsx"),p=t("./app/components/globalSelectionLink.tsx"),P=t("./app/components/idBadge/userBadge.tsx"),u=t("./app/components/layouts/thirds.tsx"),g=t("./app/components/links/externalLink.tsx"),m=t("./app/components/links/link.tsx"),y=t("./app/components/pagination.tsx"),x=t("./app/components/panels/index.tsx"),Z=t("./app/components/timeSince.tsx"),A=t("./app/icons/index.tsx"),f=t("./app/locale.tsx"),w=t("./app/styles/space.tsx"),v=t("./app/utils.tsx"),W=t("./app/utils/discover/eventView.tsx"),S=t("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class b extends r.Z{getEndpoints(){const{environments:e}=this.props,{groupId:i,tagKey:t}=this.props.params;return[["tag",`/issues/${i}/tags/${t}/`],["tagValueList",`/issues/${i}/tags/${t}/values/`,{query:{environment:e,sort:this.getSort()}}]]}getSort(){return this.props.location.query.sort||"count"}renderLoading(){return this.renderBody()}renderResults(){const{baseUrl:e,project:i,environments:t,group:n,params:{orgId:r,tagKey:d}}=this.props,{tagValueList:l,tag:u}=this.state,g=["title","release","environment","user.display","timestamp"];return l?.map(((l,y)=>{const x=u?.totalValues?`${(0,v.aQ)(l.count,u?.totalValues).toFixed(2)}%`:"--",w=l.key??d,b=l.query||`${w}:"${l.value}"`,j=W.ZP.fromSavedQuery({id:void 0,name:w??"",fields:[...void 0!==w?[w]:[],...g.filter((e=>e!==w))],orderby:"-timestamp",query:`issue:${n.shortId} ${b}`,projects:[Number(i?.id)],environment:t,version:2,range:"90d"}),k=`/organizations/${r}/issues/`;return(0,S.BX)(o.Fragment,{children:[(0,S.BX)(C,{children:[(0,S.tZ)(E,{"data-test-id":"group-tag-value",children:(0,S.tZ)(p.Z,{to:{pathname:`${e}events/`,query:{query:b}},children:"user"===w?(0,S.tZ)(P.Z,{user:{...l,id:l.identifier??""},avatarSize:20,hideEmail:!0}):(0,S.tZ)(h.H,{value:l.name})})}),l.email&&(0,S.tZ)($,{href:`mailto:${l.email}`,"data-test-id":"group-tag-mail",children:(0,S.tZ)(A.h,{size:"xs",color:"gray300"})}),(0,v.CB)(l.value)&&(0,S.tZ)($,{href:l.value,"data-test-id":"group-tag-url",children:(0,S.tZ)(A.V$,{size:"xs",color:"gray300"})})]}),(0,S.tZ)(_,{children:x}),(0,S.tZ)(_,{children:l.count.toLocaleString()}),(0,S.tZ)(_,{children:(0,S.tZ)(Z.Z,{date:l.lastSeen})}),(0,S.tZ)(_,{children:(0,S.BX)(c.Z,{anchorRight:!0,alwaysRenderMenu:!1,caret:!1,title:(0,S.tZ)(s.ZP,{tooltipProps:{containerDisplayMode:"flex"},size:"sm",type:"button","aria-label":(0,f.t)("Show more"),icon:(0,S.tZ)(A.YR,{size:"xs"})}),children:[(0,S.tZ)(a.Z,{features:["organizations:discover-basic"],children:(0,S.tZ)("li",{children:(0,S.tZ)(m.Z,{to:j.getResultsViewUrlTarget(r),children:(0,f.t)("Open in Discover")})})}),(0,S.tZ)("li",{children:(0,S.tZ)(p.Z,{to:{pathname:k,query:{query:b}},children:(0,f.t)("Search All Issues with Tag Value")})})]})})]},y)}))}renderBody(){const{group:e,params:{orgId:i,tagKey:t},location:{query:n},environments:o}=this.props,{tagValueList:a,tag:r,tagValueListPageLinks:h,loading:c}=this.state,{cursor:p,page:P,...g}=n,m="user"===t?(0,f.t)("Affected Users"):t,y=this.getSort(),x=(0,S.tZ)(A.CC,{color:"gray300",size:"xs",direction:"down"}),Z=(0,S.BX)(z,{to:{pathname:location.pathname,query:{...g,sort:"date"}},children:[(0,f.t)("Last Seen")," ","date"===y&&x]}),w=(0,S.BX)(z,{to:{pathname:location.pathname,query:{...g,sort:"count"}},children:[(0,f.t)("Count")," ","count"===y&&x]});return(0,S.tZ)(u.uT,{children:(0,S.BX)(u.or,{fullWidth:!0,children:[(0,S.BX)(k,{children:[(0,S.tZ)(T,{children:(0,f.t)("Tag Details")}),(0,S.BX)(d.ZP,{gap:1,children:[(0,S.tZ)(s.ZP,{size:"sm",priority:"default",href:`/${i}/${e.project.slug}/issues/${e.id}/tags/${t}/export/`,children:(0,f.t)("Export Page to CSV")}),(0,S.tZ)(l.ZP,{payload:{queryType:l.tD.IssuesByTag,queryInfo:{project:e.project.id,group:e.id,key:t}}})]})]}),(0,S.tZ)(V,{isLoading:c,isEmpty:0===a?.length,headers:[m,(0,S.tZ)(q,{children:(0,f.t)("Percent")},"percent"),w,Z,""],emptyMessage:(0,f.t)("Sorry, the tags for this issue could not be found."),emptyAction:o?.length?(0,f.t)("No tags were found for the currently selected environments"):null,children:a&&r&&this.renderResults()}),(0,S.tZ)(L,{pageLinks:h})]})})}}const j=b,k=(0,n.Z)("div",{target:"e8ib56610"})("display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;justify-content:space-between;margin-bottom:",(0,w.Z)(2),";"),T=(0,n.Z)("h3",{target:"e8ib5669"})({name:"ti75j2",styles:"margin:0"}),V=(0,n.Z)(x.KB,{target:"e8ib5668"})("white-space:nowrap;font-size:",(e=>e.theme.fontSizeMedium),";overflow:auto;@media (min-width: ",(e=>e.theme.breakpoints.small),"){overflow:initial;}&>*{padding:",(0,w.Z)(1)," ",(0,w.Z)(2),";}"),q=(0,n.Z)("div",{target:"e8ib5667"})({name:"2qga7i",styles:"text-align:right"}),z=(0,n.Z)(m.Z,{target:"e8ib5666"})({name:"7p2agl",styles:"text-align:right;color:inherit;:hover{color:inherit;}"}),$=(0,n.Z)(g.Z,{target:"e8ib5665"})("margin-left:",(0,w.Z)(.5),";"),B=(0,n.Z)("div",{target:"e8ib5664"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),C=(0,n.Z)(B,{target:"e8ib5663"})((e=>e.theme.overflowEllipsis),";display:flex;min-width:320px;"),E=(0,n.Z)("span",{target:"e8ib5662"})((e=>e.theme.overflowEllipsis),";width:auto;"),_=(0,n.Z)(B,{target:"e8ib5661"})({name:"1f60if8",styles:"justify-content:flex-end"}),L=(0,n.Z)(y.Z,{target:"e8ib5660"})({name:"ti75j2",styles:"margin:0"})}}]);
//# sourceMappingURL=../sourcemaps/app_views_organizationGroupDetails_groupTagValues_tsx.bd8638fa31f1950a5e0809f6137bc293.js.map