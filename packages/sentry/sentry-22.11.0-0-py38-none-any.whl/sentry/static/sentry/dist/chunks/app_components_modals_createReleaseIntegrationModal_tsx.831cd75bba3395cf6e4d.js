"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_modals_createReleaseIntegrationModal_tsx"],{"./app/components/modals/createReleaseIntegrationModal.tsx":(e,t,r)=>{r.r(t),r.d(t,{default:()=>p});var a=r("../node_modules/react/index.js"),n=r("./app/actionCreators/indicator.tsx"),o=r("./app/components/forms/fieldFromConfig.tsx"),s=r("./app/components/forms/form.tsx"),i=r("./app/locale.tsx"),l=r("./app/utils/useApi.tsx"),c=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(e){let{Body:t,Header:r,closeModal:d,project:p,organization:u,onCreateSuccess:m,onCancel:g}=e;const h=(0,l.Z)(),w=[{name:"name",type:"string",placeholder:`${p.slug} Release Integration`,label:(0,i.t)("Name"),help:(0,c.tZ)(a.Fragment,{children:(0,i.t)("Name of new integration.")}),defaultValue:`${p.slug} Release Integration`,required:!0}];return(0,c.BX)(a.Fragment,{children:[(0,c.tZ)(r,{children:(0,c.tZ)("h3",{children:(0,i.t)("Create a Release Integration")})}),(0,c.tZ)(t,{children:(0,c.tZ)(s.Z,{onCancel:()=>{g(),d()},onSubmit:async(e,t,r)=>{try{t(await h.requestPromise("/sentry-apps/",{method:"POST",data:{...e,organization:u.slug,isAlertable:!1,isInternal:!0,scopes:["project:read","project:write","team:read","team:write","project:releases","event:read","event:write","org:read","org:write","member:read","member:write"],verifyInstall:!1,overview:`This internal integration was auto-generated to setup Releases for the ${p.slug} project. It is needed to provide the token used to create a release. If this integration is deleted, your Releases workflow will stop working!`}}))}catch(e){r(e)}},onSubmitSuccess:e=>{m(e),(0,n.S9)((0,i.t)("Created Release Integration")),d()},onSubmitError:e=>{(0,n.Iw)((0,i._N)("Something went wrong! [error]",{error:e}))},children:w.map((e=>(0,c.tZ)(o.Z,{field:e},e.name)))})})]})}d.displayName="CreateReleaseIntegrationModal";const p=d},"./app/utils/useApi.tsx":(e,t,r)=>{r.d(t,{Z:()=>o});var a=r("../node_modules/react/index.js"),n=r("./app/api.tsx");const o=function(){let{persistInFlight:e,api:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=(0,a.useRef)();void 0===r.current&&void 0===t&&(r.current=new n.KU);const o=t??r.current,s=(0,a.useCallback)((()=>{e||o.clear()}),[o,e]);return(0,a.useEffect)((()=>s),[s]),o}}}]);
//# sourceMappingURL=../sourcemaps/app_components_modals_createReleaseIntegrationModal_tsx.f6f729e6d2f788523768db3e9ecdc589.js.map