"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_performance_vitalDetail_index_tsx","app_views_performance_transactionSummary_utils_tsx"],{"./app/components/createAlertButton.tsx":(e,t,n)=>{n.d(t,{K:()=>f,Z:()=>v});var r=n("../node_modules/react-router/es/index.js"),s=n("./app/actionCreators/indicator.tsx"),a=n("./app/actionCreators/navigation.tsx"),i=n("./app/components/acl/access.tsx"),o=n("./app/components/assistant/guideAnchor.tsx"),c=n("./app/components/button.tsx"),l=n("./app/components/links/link.tsx"),u=n("./app/icons/index.tsx"),p=n("./app/locale.tsx"),d=n("./app/utils/useApi.tsx"),m=n("./app/views/alerts/wizard/options.tsx"),g=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function f(e){let{projects:t,eventView:n,organization:r,referrer:s,onClick:a,alertType:i,disableMetricDataset:o,...c}=e;const l=t.find((e=>e.id===`${n.project[0]}`)),u=n.generateQueryStringObject();u.query?.includes(`project:${l?.slug}`)&&(u.query=u.query.replace(`project:${l?.slug}`,""));const d=i?m.FZ[i]:m.F4,f={pathname:`/organizations/${r.slug}/alerts/new/metric/`,query:{...u,createFromDiscover:!0,disableMetricDataset:o,referrer:s,...d,project:l?.slug,aggregate:u.yAxis??d.aggregate}};return(0,g.tZ)(h,{organization:r,onClick:()=>{a?.()},to:f,"aria-label":(0,p.t)("Create Alert"),...c})}f.displayName="CreateAlertFromViewButton";const h=(0,r.withRouter)((e=>{let{organization:t,projectSlug:n,iconProps:r,referrer:m,router:f,hideIcon:h,showPermissionGuide:v,alertOption:y,onEnter:S,...x}=e;const _=(0,d.Z)(),E=e=>{const n=new URLSearchParams;return m&&n.append("referrer",m),":projectId"!==e&&n.append("project",e),y&&n.append("alert_option",y),`/organizations/${t.slug}/alerts/wizard/?${n.toString()}`};function T(e){e.preventDefault(),S?.(),(0,a.T)(E(":projectId"),f)}async function w(){const e=`/organizations/${t.slug}/`;(0,s.E3)();try{await _.requestPromise(e,{method:"PUT",data:{alertsMemberWrite:!0}}),(0,s.S9)((0,p.t)("Successfully updated organization settings"))}catch(e){(0,s.Iw)((0,p.t)("Unable to update organization settings"))}}const Z=(0,p._N)("Ask your organization owner or manager to [settingsLink:enable alerts access] for you.",{settingsLink:(0,g.tZ)(l.Z,{to:`/settings/${t.slug}`})}),C=e=>(0,g.tZ)(c.ZP,{disabled:!e,title:e?void 0:Z,icon:!h&&(0,g.tZ)(u.vr,{...r}),to:n?E(n):void 0,tooltipProps:{isHoverable:!0,position:"top",overlayStyle:{maxWidth:"270px"}},onClick:n?S:T,...x,children:x.children??(0,p.t)("Create Alert")}),b=!t.alertsMemberWrite&&!!v;return(0,g.tZ)(i.Z,{organization:t,access:["alerts:write"],children:e=>{let{hasAccess:n}=e;return b?(0,g.tZ)(i.Z,{organization:t,access:["org:write"],children:e=>{let{hasAccess:t}=e;return(0,g.tZ)(o.Z,{target:t?"alerts_write_owner":"alerts_write_member",onFinish:t?w:void 0,children:C(n)})}}):C(n)}})})),v=h},"./app/components/events/searchBar.tsx":(e,t,n)=>{n.d(t,{Z:()=>j}),n("../node_modules/core-js/modules/es.error.cause.js"),n("../node_modules/core-js/modules/es.array.includes.js");var r=n("../node_modules/react/index.js"),s=n("../node_modules/@sentry/browser/node_modules/@sentry/core/esm/exports.js"),a=n("../node_modules/lodash/assign.js"),i=n.n(a),o=n("../node_modules/lodash/flatten.js"),c=n.n(o),l=n("../node_modules/lodash/memoize.js"),u=n.n(l),p=n("../node_modules/lodash/omit.js"),d=n.n(p),m=n("./app/actionCreators/tags.tsx"),g=n("./app/components/smartSearchBar/index.tsx"),f=n("./app/constants/index.tsx"),h=n("./app/types/index.tsx"),v=n("./app/utils.tsx"),y=n("./app/utils/discover/fields.tsx"),S=n("./app/utils/fields/index.ts"),x=n("./app/utils/measurements/measurements.tsx"),_=n("./app/utils/useApi.tsx"),E=n("./app/utils/withTags.tsx"),T=n("./app/views/dashboardsV2/utils.tsx"),w=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const Z=new RegExp(`^${f.c$}|\\${f.ir}`,"g"),C=new Set(Object.keys(y.wZ)),b=Object.keys(y.wZ).reduce(((e,t)=>(e[t]={...y.wZ[t],kind:S.IV.FIELD},e)),{}),A=d()(b,y.J8),R=y.$4.reduce(((e,t)=>(e[t]={name:t,kind:S.IV.METRICS},e)),{}),I=Object.keys(y.jg).reduce(((e,t)=>(e[t]={...y.jg[t],kind:S.IV.FIELD},e)),{});function N(e){const{maxSearchItems:t,organization:n,tags:a,omitTags:o,fields:l,projectIds:p,includeSessionTagsValues:f,maxMenuHeight:E,customMeasurements:N}=e,j=(0,_.Z)(),O=(0,r.useRef)(!1),q=(0,r.useMemo)((()=>(e=>e?.length?e.reduce(((e,t)=>(C.has(t.field)||(0,y.GO)(t.field)||(0,T.nk)(t.field)||(e[t.field]={key:t.field,name:t.field,kind:S.IV.FUNCTION}),e)),{}):[])(l)),[l]),P=(0,r.useMemo)((()=>Object.keys(a).reduce(((e,t)=>(e[t]={...a[t],kind:S.IV.TAG},e)),{})),[a]);(0,r.useEffect)((()=>{M.cache.clear?.()}),[p]);const M=u()(((e,t,r)=>{const s=p?.map(String);return(0,y.h1)(e.key)||(0,y.Xr)(e.key)?Promise.resolve([]):(0,m.Fo)({api:j,orgSlug:n.slug,tagKey:e.key,search:t,projectIds:s,endpointParams:r,includeTransactions:!0,includeSessions:f}).then((e=>c()(e.filter((e=>{let{name:t}=e;return(0,v.ri)(t)})).map((e=>{let{name:t}=e;return t})))),(()=>{throw new Error("Unable to fetch event field values")}))}),((e,t)=>{let{key:n}=e;return`${n}-${t}`})),k=e=>{let t;!O.current&&Object.keys(a).length>0&&(t=s.Yr({name:"SearchBar.getTagList"}),O.current=!0);const r=((e,t)=>{const n=Object.keys(e).reduce(((t,n)=>(t[n]={...e[n],kind:S.IV.MEASUREMENT},t)),{});return t?Object.keys(t).reduce(((e,n)=>(e[n]={...t[n],kind:S.IV.MEASUREMENT},e)),n):n})(e,N),c=n.features.includes("performance-view")?Object.assign({},r,q,R,b):Object.assign({},A);i()(c,P,b,I),c.has={key:S.Sh.HAS,name:"Has property",values:Object.keys(c).sort(((e,t)=>e.toLowerCase().localeCompare(t.toLowerCase()))),predefined:!0,kind:S.IV.FIELD};const l=o&&o.length>0?d()(c,o):c;if(t){const e=Object.keys(l).length;t.setTag("tags.totalCount",e);const n=[1,5,10,20,50,100,200,300,400,500,600,700,800,900,1e3,1e4].find((t=>e<=t));t.setTag("tags.totalCount.grouped",`<=${n}`),t.finish()}return l};return(0,w.tZ)(x.Z,{children:n=>{let{measurements:r}=n;return(0,w.tZ)(g.Z,{hasRecentSearches:!0,savedSearchType:h.L4.EVENT,onGetTagValues:M,supportedTags:k(r),prepareQuery:e=>e.replace(Z,""),maxSearchItems:t,excludedTags:["environment"],maxMenuHeight:E??300,customPerformanceMetrics:N,...e})}})}N.displayName="SearchBar";const j=(0,E.Z)(N)},"./app/utils/performance/histogram/utils.tsx":(e,t,n)=>{n.d(t,{GT:()=>i,_W:()=>a,te:()=>s}),n("../node_modules/core-js/modules/es.error.cause.js");var r=n("./app/utils/formatters.tsx");function s(e){return e.length>=2?e[1].bin-e[0].bin:0}function a(e){const t=s(e);return e.map((e=>{const n=e.bin;return{start:n,end:n+t}}))}function i(e){let{precision:t,type:n,additionalFieldsFn:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=e=>{switch(n){case"duration":const s=t??(e<1e3?0:3);return(0,r.g9)(e/1e3,s,!0);case"number":const a=10**(t??0);return(Math.round((e+Number.EPSILON)*a)/a).toLocaleString();default:throw new Error(`Unable to format type: ${n}`)}};return e.map((e=>({value:e.count,name:a(e.bin),...s?.(e.bin)??{}})))}},"./app/utils/performance/quickTrace/utils.tsx":(e,t,n)=>{n.d(t,{$J:()=>S,Ci:()=>T,R8:()=>f,S2:()=>x,_Z:()=>y,eF:()=>v,eW:()=>m,hp:()=>p,q2:()=>d,xB:()=>_,y3:()=>E}),n("../node_modules/core-js/modules/es.error.cause.js");var r=n("../node_modules/lodash/omit.js"),s=n.n(r),a=n("../node_modules/moment-timezone/index.js"),i=n.n(a),o=n("./app/components/events/interfaces/spans/utils.tsx"),c=n("./app/constants/pageFilters.tsx"),l=n("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),u=n("./app/utils/discover/eventView.tsx");function p(e){return"transaction"===e.type}function d(e,t){return p(t)?e.event_id===t.id:void 0!==e.errors&&e.errors.some((e=>e.event_id===t.id))}function m(e,t){const n=[],r=[],s=[{event:t,path:[]}];for(;s.length;){const t=s.shift();if(d(t.event,e)){for(const e of t.path)n.push(e);r.push(t.event)}else{const e=[...t.path,g(t.event)];for(const n of t.event.children)s.push({event:n,path:e})}}if(!r.length)throw new Error("No relevant path exists!");for(;r.length;){const e=r.shift();for(const t of e.children)r.push(t);n.push(g(e))}return n}function g(e){return s()(e,["children"])}function f(e,t,n){const{type:r,trace:s}=e;if("empty"===r||null===s)throw new Error("Current event not in trace navigator!");const a="full"===r,i=s.find((e=>d(e,t)))??null;if(null===i)throw new Error("Current event not in trace navigator!");const o=i.parent_event_id?s.find((e=>e.event_id===i.parent_event_id))??null:null,c=s.find((e=>e.event_id!==i.event_id&&e.event_id!==o?.event_id&&0===e.generation))??null,u=a?[]:null,p=[],m=a?[]:null,g=new Set;return s.forEach((e=>{g.add(e.project_id),(e=>e.parent_event_id===i.event_id)(e)?p.push(e):a&&((e=>null!==i.generation&&null!==e.generation&&e.generation>0&&i.generation-1>e.generation)(e)?u?.push(e):(e=>null!==i.generation&&null!==e.generation&&i.generation+1<e.generation)(e)&&m?.push(e))})),a&&g.size>1&&function(e,t){(0,l.Z)("quick_trace.connected_services",{organization:e.id,projects:t})}(n,g.size),{root:c,ancestors:null===u?null:h(u),parent:o,current:i,children:h(p),descendants:null===m?null:h(m)}}function h(e){return e.sort(((e,t)=>t["transaction.duration"]-e["transaction.duration"]))}function v(e){let{eventView:t,location:n}=e;return s()(t.getEventsAPIPayload(n),["field","sort","per_page"])}function y(e){let{start:t,end:n,statsPeriod:r}=e;return u.ZP.fromSavedQuery({id:void 0,version:2,name:"",fields:["transaction.duration"],projects:[c.mP],query:"",environment:[],start:t,end:n,range:r??void 0})}function S(e){const t=p(e)?e.startTimestamp:i()(e.dateReceived?e.dateReceived:e.dateCreated).valueOf()/1e3,n=p(e)?e.endTimestamp:t;return(0,o.TC)({start:t,end:n})}function x(e,t,n){let r=n;const s=[e];for(;s.length;){const e=s.pop();for(const t of e.children)s.push(t);r=t(r,e)}return r}function _(e,t){return x(e,((e,n)=>(t(n)&&e.push(n),e)),[])}function E(e){return Boolean(e.event_id)}function T(e){return Boolean(e.event_id)}},"./app/utils/performance/urls.ts":(e,t,n)=>{n.d(t,{D:()=>a});var r=n("./app/components/events/interfaces/spans/utils.tsx"),s=n("./app/utils.tsx");function a(e,t,n,a,i){const o={...a||{},transaction:n};(0,s.ri)(o.transaction)||delete o.transaction;const c={pathname:`/organizations/${e}/performance/${t}/`,query:o,hash:(0,s.ri)(i)?(0,r.ct)(i):void 0};return(0,s.ri)(c.hash)||delete c.hash,c}},"./app/utils/withTags.tsx":(e,t,n)=>{n.d(t,{Z:()=>c});var r=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=n("../node_modules/react/index.js"),a=n("./app/stores/tagStore.tsx"),i=n("./app/utils/getDisplayName.tsx"),o=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const c=function(e){class t extends s.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{tags:a.Z.getState()}),(0,r.Z)(this,"unsubscribe",a.Z.listen((e=>this.setState({tags:e})),void 0))}componentWillUnmount(){this.unsubscribe()}render(){const{tags:t,...n}=this.props;return(0,o.tZ)(e,{tags:t??this.state.tags,...n})}}return t.displayName="WithTags",(0,r.Z)(t,"displayName",`withTags(${(0,i.Z)(e)})`),t}},"./app/views/alerts/rules/metric/types.tsx":(e,t,n)=>{n.d(t,{F4:()=>a,GM:()=>c,LO:()=>g,Lm:()=>f,Tb:()=>d,Us:()=>m,XH:()=>p,Yh:()=>l,hd:()=>h,lK:()=>u,lT:()=>s,qz:()=>o,t6:()=>i});var r=n("./app/locale.tsx");let s,a,i,o,c,l,u,p,d,m;!function(e){e[e.ABOVE=0]="ABOVE",e[e.BELOW=1]="BELOW"}(s||(s={})),function(e){e.CRITICAL="critical",e.WARNING="warning",e.RESOLVE="resolve"}(a||(a={})),function(e){e.COUNT="count",e.CHANGE="change",e.PERCENT="percent"}(i||(i={})),function(e){e.ERRORS="events",e.TRANSACTIONS="transactions",e.GENERIC_METRICS="generic_metrics",e.SESSIONS="sessions",e.METRICS="metrics"}(o||(o={})),function(e){e.DEFAULT="default",e.ERROR="error",e.TRANSACTION="transaction",e.USER="user",e.SESSION="session"}(c||(c={})),function(e){e.ERROR_DEFAULT="error_default",e.DEFAULT="default",e.ERROR="error",e.TRANSACTION="transaction"}(l||(l={})),function(e){e.CRASH_FREE_SESSIONS="percentage(sessions_crashed, sessions) AS _crash_rate_alert_aggregate",e.CRASH_FREE_USERS="percentage(users_crashed, users) AS _crash_rate_alert_aggregate"}(u||(u={})),function(e){e.SIX_HOURS="6h",e.ONE_DAY="1d",e.THREE_DAYS="3d",e.SEVEN_DAYS="10000m",e.FOURTEEN_DAYS="14d",e.THIRTY_DAYS="30d"}(p||(p={})),function(e){e[e.ONE_MINUTE=1]="ONE_MINUTE",e[e.FIVE_MINUTES=5]="FIVE_MINUTES",e[e.TEN_MINUTES=10]="TEN_MINUTES",e[e.FIFTEEN_MINUTES=15]="FIFTEEN_MINUTES",e[e.THIRTY_MINUTES=30]="THIRTY_MINUTES",e[e.ONE_HOUR=60]="ONE_HOUR",e[e.TWO_HOURS=120]="TWO_HOURS",e[e.FOUR_HOURS=240]="FOUR_HOURS",e[e.ONE_DAY=1440]="ONE_DAY"}(d||(d={})),function(e){e.EMAIL="email",e.SLACK="slack",e.PAGERDUTY="pagerduty",e.MSTEAMS="msteams",e.SENTRY_APP="sentry_app"}(m||(m={}));const g={[m.EMAIL]:(0,r.t)("Emaiâ€‹l"),[m.SLACK]:(0,r.t)("Slack"),[m.PAGERDUTY]:(0,r.t)("Pagerduty"),[m.MSTEAMS]:(0,r.t)("MS Teams"),[m.SENTRY_APP]:(0,r.t)("Notification")};let f;!function(e){e.SPECIFIC="specific",e.USER="user",e.TEAM="team",e.SENTRY_APP="sentry_app"}(f||(f={}));const h={[f.USER]:(0,r.t)("Member"),[f.TEAM]:(0,r.t)("Team")}},"./app/views/alerts/wizard/options.tsx":(e,t,n)=>{n.d(t,{A_:()=>l,F4:()=>p,F7:()=>d,FZ:()=>u,LH:()=>m,S:()=>g,VS:()=>o,gb:()=>c}),n("../node_modules/core-js/modules/es.array.includes.js");var r=n("./app/locale.tsx"),s=n("./app/views/alerts/rules/metric/types.tsx");let a,i;!function(e){e[e.ERROR=0]="ERROR",e[e.PERFORMANCE=1]="PERFORMANCE",e[e.CRASH_RATE=2]="CRASH_RATE"}(a||(a={})),function(e){e.DISCOVER="discover",e.METRICS="metrics",e.METRICS_ENHANCED="metricsEnhanced"}(i||(i={}));const o={[s.qz.ERRORS]:a.ERROR,[s.qz.TRANSACTIONS]:a.PERFORMANCE,[s.qz.GENERIC_METRICS]:a.PERFORMANCE,[s.qz.METRICS]:a.CRASH_RATE,[s.qz.SESSIONS]:a.CRASH_RATE},c={issues:(0,r.t)("Issues"),num_errors:(0,r.t)("Number of Errors"),users_experiencing_errors:(0,r.t)("Users Experiencing Errors"),throughput:(0,r.t)("Throughput"),trans_duration:(0,r.t)("Transaction Duration"),apdex:(0,r.t)("Apdex"),failure_rate:(0,r.t)("Failure Rate"),lcp:(0,r.t)("Largest Contentful Paint"),fid:(0,r.t)("First Input Delay"),cls:(0,r.t)("Cumulative Layout Shift"),custom:(0,r.t)("Custom Metric"),crash_free_sessions:(0,r.t)("Crash Free Session Rate"),crash_free_users:(0,r.t)("Crash Free User Rate")},l=e=>[{categoryHeading:(0,r.t)("Errors"),options:["issues","num_errors","users_experiencing_errors"]},...e.features.includes("crash-rate-alerts")?[{categoryHeading:(0,r.t)("Sessions"),options:["crash_free_sessions","crash_free_users"]}]:[],{categoryHeading:(0,r.t)("Performance"),options:["throughput","trans_duration","apdex","failure_rate","lcp","fid","cls"]},{categoryHeading:(0,r.t)("Other"),options:["custom"]}],u={num_errors:{aggregate:"count()",dataset:s.qz.ERRORS,eventTypes:s.GM.ERROR},users_experiencing_errors:{aggregate:"count_unique(user)",dataset:s.qz.ERRORS,eventTypes:s.GM.ERROR},throughput:{aggregate:"count()",dataset:s.qz.TRANSACTIONS,eventTypes:s.GM.TRANSACTION},trans_duration:{aggregate:"p95(transaction.duration)",dataset:s.qz.TRANSACTIONS,eventTypes:s.GM.TRANSACTION},apdex:{aggregate:"apdex(300)",dataset:s.qz.TRANSACTIONS,eventTypes:s.GM.TRANSACTION},failure_rate:{aggregate:"failure_rate()",dataset:s.qz.TRANSACTIONS,eventTypes:s.GM.TRANSACTION},lcp:{aggregate:"p95(measurements.lcp)",dataset:s.qz.TRANSACTIONS,eventTypes:s.GM.TRANSACTION},fid:{aggregate:"p95(measurements.fid)",dataset:s.qz.TRANSACTIONS,eventTypes:s.GM.TRANSACTION},cls:{aggregate:"p95(measurements.cls)",dataset:s.qz.TRANSACTIONS,eventTypes:s.GM.TRANSACTION},custom:{aggregate:"p95(measurements.fp)",dataset:s.qz.TRANSACTIONS,eventTypes:s.GM.TRANSACTION},crash_free_sessions:{aggregate:s.lK.CRASH_FREE_SESSIONS,dataset:s.qz.SESSIONS,eventTypes:s.GM.SESSION},crash_free_users:{aggregate:s.lK.CRASH_FREE_USERS,dataset:s.qz.SESSIONS,eventTypes:s.GM.USER}},p=u.num_errors,d=new Set(["num_errors","users_experiencing_errors","throughput","apdex","failure_rate","crash_free_sessions","crash_free_users"]),m=new Set(["trans_duration","lcp","fid","cls"]);function g(e,t){return e===s.qz.ERRORS?i.DISCOVER:t?i.METRICS_ENHANCED:e===s.qz.GENERIC_METRICS?i.METRICS:i.DISCOVER}},"./app/views/performance/breadcrumb.tsx":(e,t,n)=>{n.d(t,{Z:()=>h});var r=n("./app/components/breadcrumbs.tsx"),s=n("./app/locale.tsx"),a=n("./app/utils/queryString.tsx"),i=n("./app/views/performance/transactionSummary/tabs.tsx"),o=n("./app/views/performance/transactionSummary/transactionEvents/utils.tsx"),c=n("./app/views/performance/transactionSummary/transactionSpans/utils.tsx"),l=n("./app/views/performance/transactionSummary/transactionTags/utils.tsx"),u=n("./app/views/performance/transactionSummary/transactionVitals/utils.tsx"),p=n("./app/views/performance/transactionSummary/utils.tsx"),d=n("./app/views/performance/vitalDetail/utils.tsx"),m=n("./app/views/performance/utils.tsx"),g=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function f(e){return(0,g.tZ)(r.Z,{crumbs:function(){const t=[],{organization:n,location:r,transaction:g,vitalName:f,spanSlug:h,eventSlug:v,traceSlug:y,tab:S}=e,x={pathname:(0,m.de)(n),query:{...r.query,transaction:void 0}};if(t.push({to:x,label:(0,s.t)("Performance"),preservePageFilters:!0}),f){const e=(0,d.i4)({orgSlug:n.slug,vitalName:"fcp",projectID:(0,a.ro)(r.query.project),query:r.query});t.push({to:e,label:(0,s.t)("Vital Detail"),preservePageFilters:!0})}else if(g){const e={orgSlug:n.slug,transaction:g.name,projectID:g.project,query:r.query};switch(S){case i.Z.Tags:{const n=(0,l.vG)(e);t.push({to:n,label:(0,s.t)("Tags"),preservePageFilters:!0});break}case i.Z.Events:{const n=(0,o.xr)(e);t.push({to:n,label:(0,s.t)("All Events"),preservePageFilters:!0});break}case i.Z.WebVitals:{const n=(0,u.Pl)(e);t.push({to:n,label:(0,s.t)("Web Vitals"),preservePageFilters:!0});break}case i.Z.Spans:{const n=(0,c.hN)(e);t.push({to:n,label:(0,s.t)("Spans"),preservePageFilters:!0});break}case i.Z.TransactionSummary:default:{const n=(0,p.e1)(e);t.push({to:n,label:(0,s.t)("Transaction Summary"),preservePageFilters:!0})}}}return g&&h?t.push({to:"",label:(0,s.t)("Span Summary")}):g&&v?t.push({to:"",label:(0,s.t)("Event Details")}):y&&t.push({to:"",label:(0,s.t)("Trace View")}),t}()})}f.displayName="Breadcrumb";const h=f},"./app/views/performance/traceDetails/utils.tsx":(e,t,n)=>{n.d(t,{Rg:()=>i,YA:()=>a,uM:()=>o});var r=n("./app/constants/pageFilters.tsx"),s=n("./app/utils/performance/quickTrace/utils.tsx");function a(e,t,n,s){const{start:a,end:i,statsPeriod:o}=n;return{pathname:`/organizations/${e.slug}/performance/trace/${t}/`,query:{...s,statsPeriod:o,[r.V.PAGE_START]:a,[r.V.PAGE_END]:i}}}function i(e){const t={projects:new Set,errors:new Set,transactions:new Set,startTimestamp:Number.MAX_SAFE_INTEGER,endTimestamp:0,maxGeneration:0};return e.reduce(((e,t)=>(0,s.S2)(t,((e,t)=>{for(const n of t.errors??[])e.errors.add(n.event_id);return e.transactions.add(t.event_id),e.projects.add(t.project_slug),e.startTimestamp=Math.min(e.startTimestamp,t.start_timestamp),e.endTimestamp=Math.max(e.endTimestamp,t.timestamp),e.maxGeneration=Math.max(e.maxGeneration,t.generation),e}),e)),t)}function o(e){return null===e.parent_span_id}},"./app/views/performance/transactionSummary/tabs.tsx":(e,t,n)=>{var r;n.d(t,{Z:()=>s}),function(e){e.TransactionSummary="summary",e.WebVitals="vitals",e.Tags="tags",e.Events="events",e.Spans="spans",e.Anomalies="anomalies",e.Replays="replays"}(r||(r={}));const s=r},"./app/views/performance/transactionSummary/transactionEvents/utils.tsx":(e,t,n)=>{n.d(t,{Kc:()=>m,Lc:()=>g,Zq:()=>d,_S:()=>c,q3:()=>o,qg:()=>p,tb:()=>u,xr:()=>l}),n("../node_modules/core-js/modules/es.array.includes.js");var r=n("./app/locale.tsx"),s=n("./app/utils/queryString.tsx"),a=n("./app/views/performance/transactionSummary/filter.tsx"),i=n("./app/views/performance/transactionSummary/utils.tsx");let o;function c(e,t){const{p99:n,p95:s,p75:i,p50:c}=t||{p99:0,p95:0,p75:0,p50:0};return{[o.p50]:{name:o.p50,query:c?[["transaction.duration",`<=${c.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,a.T$)(e)||"transaction.duration"},label:(0,r.t)("p50")},[o.p75]:{name:o.p75,query:i?[["transaction.duration",`<=${i.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,a.T$)(e)||"transaction.duration"},label:(0,r.t)("p75")},[o.p95]:{name:o.p95,query:s?[["transaction.duration",`<=${s.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,a.T$)(e)||"transaction.duration"},label:(0,r.t)("p95")},[o.p99]:{name:o.p99,query:n?[["transaction.duration",`<=${n.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,a.T$)(e)||"transaction.duration"},label:(0,r.t)("p99")},[o.p100]:{name:o.p100,label:(0,r.t)("p100")}}}function l(e){let{orgSlug:t,transaction:n,projectID:r,query:s}=e;return{pathname:`/organizations/${t}/performance/summary/events/`,query:{transaction:n,project:r,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query}}}function u(e){return t=(0,s.ro)(e.query.showTransactions,o.p100),Object.values(o).includes(t)?t:o.p100;var t}function p(e,t){const n=c(t),r=n[e].sort?.kind,s=n[e].sort?.field,a={showTransactions:e};return r&&s&&(a.sort=`${"desc"===r?"-":""}${s}`),a}function d(e){switch(e){case i.K0.OUTLIER:return o.p100;case i.K0.SLOW:return o.p95;default:return}}function m(e){return{p100:e?.["p100()"],p99:e?.["p99()"],p95:e?.["p95()"],p75:e?.["p75()"],p50:e?.["p50()"]}}function g(e){return e.withColumns([{kind:"function",function:["p100","",void 0,void 0]},{kind:"function",function:["p99","",void 0,void 0]},{kind:"function",function:["p95","",void 0,void 0]},{kind:"function",function:["p75","",void 0,void 0]},{kind:"function",function:["p50","",void 0,void 0]}])}!function(e){e.p50="p50",e.p75="p75",e.p95="p95",e.p99="p99",e.p100="p100"}(o||(o={}))},"./app/views/performance/transactionSummary/transactionSpans/types.tsx":(e,t,n)=>{let r,s;n.d(t,{g:()=>s,p:()=>r}),function(e){e.P50_EXCLUSIVE_TIME="p50ExclusiveTime",e.P75_EXCLUSIVE_TIME="p75ExclusiveTime",e.P95_EXCLUSIVE_TIME="p95ExclusiveTime",e.P99_EXCLUSIVE_TIME="p99ExclusiveTime"}(r||(r={})),function(e){e.COUNT="count",e.AVG_OCCURRENCE="avgOccurrence",e.SUM_EXCLUSIVE_TIME="sumExclusiveTime"}(s||(s={}))},"./app/views/performance/transactionSummary/transactionSpans/utils.tsx":(e,t,n)=>{n.d(t,{CS:()=>f,E5:()=>h,KK:()=>x,TK:()=>S,W6:()=>_,bc:()=>g,hN:()=>m,mV:()=>Z,uQ:()=>w,xz:()=>E,zW:()=>T});var r=n("../node_modules/lodash/pick.js"),s=n.n(r),a=n("./app/constants/index.tsx"),i=n("./app/locale.tsx"),o=n("./app/utils.tsx"),c=n("./app/utils/discover/eventView.tsx"),l=n("./app/utils/discover/fields.tsx"),u=n("./app/utils/queryString.tsx"),p=n("./app/utils/tokenizeSearch.tsx"),d=n("./app/views/performance/transactionSummary/transactionSpans/types.tsx");function m(e){let{orgSlug:t,transaction:n,projectID:r,query:s}=e;const a=function(e){let{orgSlug:t}=e;return`/organizations/${t}/performance/summary/spans/`}({orgSlug:t});return{pathname:a,query:{transaction:n,project:r,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query}}}const g=30,f=s()(a.wh,["1h","24h","7d","14d","30d"]),h=[{prefix:(0,i.t)("Sort By"),label:(0,i.t)("Total Self Time"),field:d.g.SUM_EXCLUSIVE_TIME},{prefix:(0,i.t)("Sort By"),label:(0,i.t)("Average Count"),field:d.g.AVG_OCCURRENCE},{prefix:(0,i.t)("Sort By"),label:(0,i.t)("Total Count"),field:d.g.COUNT},{prefix:(0,i.t)("Sort By"),label:(0,i.t)("p50 Self Time"),field:d.p.P50_EXCLUSIVE_TIME},{prefix:(0,i.t)("Sort By"),label:(0,i.t)("p75 Self Time"),field:d.p.P75_EXCLUSIVE_TIME},{prefix:(0,i.t)("Sort By"),label:(0,i.t)("p95 Self Time"),field:d.p.P95_EXCLUSIVE_TIME},{prefix:(0,i.t)("Sort By"),label:(0,i.t)("p99 Self Time"),field:d.p.P99_EXCLUSIVE_TIME}],v=d.g.SUM_EXCLUSIVE_TIME;function y(e){return h.find((t=>t.field===e))||h.find((e=>e.field===v))}function S(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sort";const n=(0,u.ro)(e?.query?.[t])??v;return y(n)}function x(e){return y(e.sorts.length?e.sorts[0].field:v)}function _(e){if(!(0,o.ri)(e))return;const t=e.lastIndexOf(":");return t<0?void 0:{op:e.slice(0,t),group:e.slice(t+1)}}function E(e){let{location:t,transactionName:n}=e;const r=(0,u.ro)(t.query.query,""),s=new p.MY(r);s.setFilterValues("event.type",["transaction"]),s.setFilterValues("transaction",[n]),Object.keys(s.filters).forEach((e=>{(0,l.h1)(e)&&s.removeFilter(e)}));const a=c.ZP.fromNewQueryWithLocation({id:void 0,version:2,name:n,fields:[...Object.values(d.g),...Object.values(d.p)],query:s.formatString(),projects:[]},t),i=S(t);return a.withSorts([{field:i.field,kind:"desc"}])}function T(e){const t=e.withColumns([{kind:"function",function:["count","",void 0,void 0]}]),n=new p.MY(e.query);return Object.keys(n.filters).forEach((e=>{(0,l.h1)(e)&&n.removeFilter(e)})),t.query=n.formatString(),t}const w={[d.g.SUM_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.75)","count()","count_unique(id)","sumArray(spans_exclusive_time)"],[d.g.AVG_OCCURRENCE]:["percentileArray(spans_exclusive_time, 0.75)","count()","count_unique(id)","equation|count() / count_unique(id)","sumArray(spans_exclusive_time)"],[d.g.COUNT]:["percentileArray(spans_exclusive_time, 0.75)","count()","count_unique(id)","sumArray(spans_exclusive_time)"],[d.p.P50_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.5)","count()","count_unique(id)","sumArray(spans_exclusive_time)"],[d.p.P75_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.75)","count()","count_unique(id)","sumArray(spans_exclusive_time)"],[d.p.P95_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.95)","count()","count_unique(id)","sumArray(spans_exclusive_time)"],[d.p.P99_EXCLUSIVE_TIME]:["percentileArray(spans_exclusive_time, 0.99)","count()","count_unique(id)","sumArray(spans_exclusive_time)"]};function Z(e){return e.replace("exclusive","self")}},"./app/views/performance/transactionSummary/transactionTags/utils.tsx":(e,t,n)=>{n.d(t,{Zn:()=>a,bZ:()=>i,oT:()=>l,oc:()=>c,vG:()=>o}),n("../node_modules/core-js/modules/es.array.includes.js");var r=n("./app/utils/analytics.tsx"),s=n("./app/utils/queryString.tsx");function a(e){return(0,s.ro)(e.query.tagKey)}function i(e){(0,r.ec)({eventKey:"performance_views.tags.interaction",eventName:"Performance Views: Tag Page - Interaction",organization_id:parseInt(e.id,10)})}function o(e){let{orgSlug:t,transaction:n,projectID:r,query:s}=e;const a=function(e){let{orgSlug:t}=e;return`/organizations/${t}/performance/summary/tags/`}({orgSlug:t});return{pathname:a,query:{transaction:n,project:r,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query,tagKey:s.tagKey}}}function c(e){let t=(0,s.ro)(e.query?.tagSort)??"-frequency";return["sumdelta"].find((e=>t?.includes(e)))&&(t="-frequency"),t}function l(e){const t=Object.keys(e).find((e=>e.includes("histogram")));if(!t)return;const n=t.split("_");return{histogramField:t,bucketSize:parseInt(n[n.length-3],10),offset:parseInt(n[n.length-2],10),multiplier:parseInt(n[n.length-1],10)}}},"./app/views/performance/transactionSummary/transactionVitals/utils.tsx":(e,t,n)=>{n.d(t,{A1:()=>l,L0:()=>o,Pl:()=>s,eH:()=>i,jb:()=>c,oZ:()=>a});var r=n("./app/utils/performance/histogram/utils.tsx");function s(e){let{orgSlug:t,transaction:n,projectID:r,query:s}=e;const a=function(e){let{orgSlug:t}=e;return`/organizations/${t}/performance/summary/vitals/`}({orgSlug:t});return{pathname:a,query:{transaction:n,project:r,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query}}}function a(e,t){const n=(0,r.te)(e);return!e.length||t>=e[e.length-1].bin+n?null:t<e[0].bin?-1:Math.floor((t-e[0].bin)/n)}function i(e){if(e.length<2)return null;for(let t=0;t<e.length;t++){const n=e[t];for(let r=t+1;r<e.length;r++){const s=e[r];if(n.bin!==s.bin&&n.count!==s.count)return{point1:{x:t,y:Math.min(n.count,s.count)},point2:{x:r,y:Math.max(n.count,s.count)}}}}return{point1:{x:0,y:0},point2:{x:1,y:1}}}function o(e,t){const n=e.convertToPixel({xAxisIndex:0,yAxisIndex:0},[t.point1.x,t.point1.y]);if(isNaN(n?.[0])||isNaN(n?.[1]))return null;const r=e.convertToPixel({xAxisIndex:0,yAxisIndex:0},[t.point2.x,t.point2.y]);return isNaN(r?.[0])||isNaN(r?.[1])?null:{point1:{x:n[0],y:n[1]},point2:{x:r[0],y:r[1]}}}function c(e,t,n){if(t.point1.x===t.point2.x||t.point1.y===t.point2.y||n.point1.x===n.point2.x||n.point1.y===n.point2.y)return null;const r=(e.x-t.point1.x)/(t.point2.x-t.point1.x),s=(e.y-t.point1.y)/(t.point2.y-t.point1.y);return{x:n.point1.x+(n.point2.x-n.point1.x)*r,y:n.point1.y+(n.point2.y-n.point1.y)*s}}function l(e,t){return!(e&&!t.some((t=>!e[t])))||Object.values(e).filter((e=>0===e.total)).length>0}},"./app/views/performance/transactionSummary/utils.tsx":(e,t,n)=>{n.d(t,{K0:()=>u,MF:()=>h,PU:()=>d,Z6:()=>g,e1:()=>m,uI:()=>v,vd:()=>f,xf:()=>p});var r=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=n("./app/styles/space.tsx"),a=n("./app/utils/discover/urls.tsx"),i=n("./app/utils/getRouteStringFromRoutes.tsx"),o=n("./app/utils/performance/urls.ts"),c=n("./app/utils/tokenizeSearch.tsx"),l=n("./app/views/performance/traceDetails/utils.tsx");let u;function p(e){const t=d(e);return t.removeFilter("transaction"),t}function d(e){const t=new c.MY(e);return t.removeFilter("event.type"),t}function m(e){let{orgSlug:t,transaction:n,projectID:r,query:s,unselectedSeries:a="p100()",display:i,trendFunction:o,trendColumn:c,showTransactions:l,additionalQuery:u}=e;const d=function(e){let{orgSlug:t}=e;return`/organizations/${t}/performance/summary/`}({orgSlug:t});let m;return m="string"==typeof s.query?p(s.query).formatString():s.query,{pathname:d,query:{transaction:n,project:r,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:m,unselectedSeries:a,showTransactions:l,display:i,trendFunction:o,trendColumn:c,referrer:"performance-transaction-summary",...u}}}function g(e){return(t,n,r)=>{const s=`${n.trace}`;return s?(0,l.YA)(t,s,e,{}):{}}}function f(e){return(t,n,r,s)=>{const i=(0,a.JE)(n);return(0,o.D)(t.slug,i,e,r,s)}}function h(e){return(t,n,r)=>{const s=n.replayId;if(!s)return{};const a=`${n["project.name"]}:${s}`,o=(0,i.Z)(e);if(!n.timestamp)return{pathname:`/organizations/${t.slug}/replays/${a}/`,query:{referrer:o}};const c=new Date(n.timestamp).getTime()-n["transaction.duration"];return{pathname:`/organizations/${t.slug}/replays/${a}/`,query:{event_t:c,referrer:o}}}}!function(e){e.FASTEST="fastest",e.SLOW="slow",e.OUTLIER="outlier",e.RECENT="recent"}(u||(u={}));const v=(0,r.Z)("div",{target:"e1radvp0"})("margin-top:",(0,s.Z)(3),";")},"./app/views/performance/vitalDetail/index.tsx":(e,t,n)=>{n.r(t),n.d(t,{default:()=>Ne});var r=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=n("../node_modules/react/index.js"),i=n("../node_modules/react-router/es/index.js"),o=n("../node_modules/lodash/isEqual.js"),c=n.n(o),l=n("./app/actionCreators/tags.tsx"),u=n("./app/components/noProjectMessage.tsx"),p=n("./app/components/organizations/pageFilters/container.tsx"),d=n("./app/components/sentryDocumentTitle.tsx"),m=n("./app/locale.tsx"),g=n("./app/styles/organization.tsx"),f=n("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),h=n("./app/utils/fields/index.ts"),v=n("./app/utils/performance/contexts/performanceEventViewContext.tsx"),y=n("./app/utils/queryString.tsx"),S=n("./app/utils/withApi.tsx"),x=n("./app/utils/withOrganization.tsx"),_=n("./app/utils/withPageFilters.tsx"),E=n("./app/utils/withProjects.tsx"),T=n("./app/views/performance/data.tsx"),w=n("./app/views/performance/utils.tsx"),Z=n("../node_modules/lodash/omit.js"),C=n.n(Z),b=n("./app/components/acl/feature.tsx"),A=n("./app/components/alert.tsx"),R=n("./app/components/buttonBar.tsx"),I=n("./app/components/charts/utils.tsx"),N=n("./app/components/createAlertButton.tsx"),j=n("./app/components/datePageFilter.tsx"),O=n("./app/components/dropdownMenuControl.tsx"),q=n("./app/components/environmentPageFilter.tsx"),P=n("./app/components/events/searchBar.tsx"),M=n("./app/components/layouts/thirds.tsx"),k=n("./app/components/loadingIndicator.tsx"),V=n("./app/components/organizations/pageFilterBar.tsx"),z=n("./app/components/organizations/pageFilters/parse.tsx"),F=n("./app/components/performance/teamKeyTransactionsManager.tsx"),D=n("./app/components/projectPageFilter.tsx"),L=n("./app/icons/index.tsx"),U=n("./app/styles/space.tsx"),B=n("./app/utils/dates.tsx"),H=n("./app/utils/performance/vitals/constants.tsx"),$=n("./app/utils/teams.tsx"),G=n("./app/utils/tokenizeSearch.tsx"),X=n("./app/views/performance/breadcrumb.tsx"),W=(n("../node_modules/core-js/modules/es.array.includes.js"),n("./app/components/gridEditable/index.tsx")),Y=n("./app/components/gridEditable/sortLink.tsx"),K=n("./app/components/links/link.tsx"),Q=n("./app/components/pagination.tsx"),J=n("./app/components/tag.tsx"),ee=n("./app/utils/analytics.tsx"),te=n("./app/utils/discover/eventView.tsx"),ne=n("./app/utils/discover/fieldRenderers.tsx"),re=n("./app/utils/discover/fields.tsx"),se=n("./app/utils/discover/genericDiscoverQuery.tsx"),ae=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function ie(e){return(0,ae.tZ)(se.ZP,{route:"events",...e})}ie.displayName="VitalsCardsDiscoverQuery";const oe=ie;var ce=n("./app/views/eventsV2/table/cellAction.tsx"),le=n("./app/views/performance/transactionSummary/transactionOverview/charts.tsx"),ue=n("./app/views/performance/transactionSummary/utils.tsx"),pe=n("./app/views/performance/vitalDetail/utils.tsx");const de=["Transaction","Project","Unique Users","Count"];class me extends a.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{widths:[]}),(0,r.Z)(this,"handleCellAction",(e=>(t,n)=>{const{eventView:r,location:s,organization:a}=this.props;(0,ee.ec)({eventKey:"performance_views.overview.cellaction",eventName:"Performance Views: Cell Action Clicked",organization_id:parseInt(a.id,10),action:t});const o=(0,ue.PU)(r.query);(0,ce.rh)(o,t,e,n),i.browserHistory.push({pathname:s.pathname,query:{...s.query,cursor:void 0,query:o.formatString()}})})),(0,r.Z)(this,"renderBodyCellWithData",((e,t)=>(n,r)=>this.renderBodyCell(e,n,r,t))),(0,r.Z)(this,"renderHeadCellWithMeta",((e,t)=>(n,r)=>this.renderHeadCell(n,((e,t)=>{const n=pe.a7[t];return[...de,`p50(${n})`,`p75(${n})`,`p95(${n})`,"Status"][e]})(r,e),t))),(0,r.Z)(this,"renderPrependCellWithData",((e,t)=>{const{eventView:n}=this.props,r=n.getColumns().find((e=>"team_key_transaction"===e.name));return(n,s)=>{if(r){if(n){const t=(0,ae.tZ)(L.GK,{color:"yellow300",isSolid:!0,"data-test-id":"key-transaction-header"},"keyTransaction");return[this.renderHeadCell(r,t,e?.meta?.fields)]}return[this.renderBodyCell(e,r,s,t)]}return[]}})),(0,r.Z)(this,"handleSummaryClick",(()=>{const{organization:e,projects:t,location:n}=this.props;(0,ee.ec)({eventKey:"performance_views.overview.navigate.summary",eventName:"Performance Views: Overview view summary",organization_id:parseInt(e.id,10),project_platforms:(0,w.p9)(n,t)})})),(0,r.Z)(this,"handleResizeColumn",((e,t)=>{const n=[...this.state.widths];n[e]=t.width?Number(t.width):W.z7,this.setState({widths:n})}))}renderBodyCell(e,t,n,r){const{eventView:s,organization:a,projects:i,location:o,summaryConditions:c}=this.props;if(!e||!e.meta?.fields)return n[t.key];const l=e.meta?.fields,u=String(t.key);if(u===(0,pe.Ve)(r))return n[u]?(0,ae.tZ)(ge,{children:(0,ae.tZ)(ve,{children:(0,m.t)("Poor")})}):n[(0,pe.q4)(r)]?(0,ae.tZ)(ge,{children:(0,ae.tZ)(he,{children:(0,m.t)("Meh")})}):(0,ae.tZ)(ge,{children:(0,ae.tZ)(fe,{children:(0,m.t)("Good")})});const p=(0,ne.Js)(u,l,!1)(n,{organization:a,location:o}),d=[ce.eX.ADD,ce.eX.EXCLUDE,ce.eX.SHOW_GREATER_THAN,ce.eX.SHOW_LESS_THAN];if("transaction"===u){const e=function(e,t){const n=e?.project||void 0;if(void 0===typeof n)return;const r=t.find((e=>e.slug===n));return r?r.id:void 0}(n,i),o=s.clone(),l=new G.MY(c);l.addFilterValues("has",[`${r}`]),o.query=l.formatString();const u=String(n.transaction)||"",g=(0,ue.e1)({orgSlug:a.slug,transaction:u,query:o.generateQueryStringObject(),projectID:e,showTransactions:ue.K0.RECENT,display:le.D.VITALS});return(0,ae.tZ)(ce.ZP,{column:t,dataRow:n,handleCellAction:this.handleCellAction(t),allowActions:d,children:(0,ae.tZ)(K.Z,{to:g,"aria-label":(0,m.t)("See transaction summary of the transaction %s",u),onClick:this.handleSummaryClick,children:p})})}return u.startsWith("team_key_transaction")?p:(0,ae.tZ)(ce.ZP,{column:t,dataRow:n,handleCellAction:this.handleCellAction(t),allowActions:d,children:p})}renderHeadCell(e,t,n){const{eventView:r,location:s}=this.props,a=n?{}:void 0;n&&Object.keys(n).forEach((e=>{a[(0,re.LY)(e)]=n[e]}));const i=(0,re.qG)(e.name,e.type,a),o={field:e.name,width:e.width},c=r.sortForField(o,a),l=(0,te.M3)(o,a);return(0,ae.tZ)(Y.Z,{align:i,title:t||o.field,direction:c?c.kind:void 0,canSort:l,generateSortLink:function(){if(!a)return;const e=r.sortOnField(o,a).generateQueryStringObject();return{...s,query:{...s.query,sort:e.sort}}}})}getSortedEventView(e){const{eventView:t}=this.props,n=(0,re.LY)((0,pe.Ve)(e)),r=(0,re.LY)((0,pe.q4)(e)),s=t.sorts.some((e=>e.field.includes(n)||e.field.includes(r)))?[]:[{field:"team_key_transaction",kind:"desc"},{field:n,kind:"desc"},{field:r,kind:"desc"}];return t.withSorts([...s,...t.sorts])}render(){const{eventView:e,organization:t,location:n}=this.props,{widths:r}=this.state,s=e.clone();s.fields=[...e.fields];const i=s.getColumns().filter((e=>"team_key_transaction"!==e.name)).slice(0,-1).map(((e,t)=>"number"==typeof r[t]?{...e,width:r[t]}:e)),o=(0,pe.iF)(n),c=this.getSortedEventView(o),l=c.getSorts();return(0,ae.tZ)("div",{children:(0,ae.tZ)(oe,{eventView:c,orgSlug:t.slug,location:n,limit:10,referrer:"api.performance.vital-detail",children:e=>{let{pageLinks:t,isLoading:r,tableData:s}=e;return(0,ae.BX)(a.Fragment,{children:[(0,ae.tZ)(W.ZP,{isLoading:r,data:s?s.data:[],columnOrder:i,columnSortBy:l,grid:{onResizeColumn:this.handleResizeColumn,renderHeadCell:this.renderHeadCellWithMeta(o,s?.meta?.fields),renderBodyCell:this.renderBodyCellWithData(s,o),renderPrependColumns:this.renderPrependCellWithData(s,o),prependColumnWidths:["max-content"]},location:n}),(0,ae.tZ)(Q.Z,{pageLinks:t})]})}})})}}me.displayName="Table";const ge=(0,s.Z)("div",{target:"ebw8yf93"})({name:"1gnrgb9",styles:"text-align:right;justify-self:flex-end;flex-grow:1"}),fe=(0,s.Z)(J.Z,{target:"ebw8yf92"})("div{background-color:",(e=>e.theme[pe.fL[pe.SP.GOOD]]),";}span{color:",(e=>e.theme.white),";}"),he=(0,s.Z)(J.Z,{target:"ebw8yf91"})("div{background-color:",(e=>e.theme[pe.fL[pe.SP.MEH]]),";}span{color:",(e=>e.theme.white),";}"),ve=(0,s.Z)(J.Z,{target:"ebw8yf90"})("div{background-color:",(e=>e.theme[pe.fL[pe.SP.POOR]]),";}span{color:",(e=>e.theme.white),";}"),ye=me;var Se=n("./app/views/performance/vitalDetail/vitalChart.tsx"),xe=n("./app/views/performance/vitalDetail/vitalInfo.tsx");const _e=[h.Zl.FCP,h.Zl.LCP,h.Zl.FID,h.Zl.CLS];function Ee(e){const[t,n]=(0,a.useState)(void 0);function r(t){const{location:n}=e,r=(0,z.fK)({...n.query||{},query:t}),s=C()(r,"cursor");i.browserHistory.push({pathname:n.pathname,query:s})}const{location:s,organization:o,vitalName:c}=e,l=c||h.Zl.LCP;return(0,ae.BX)(a.Fragment,{children:[(0,ae.BX)(M.h4,{children:[(0,ae.BX)(M.oB,{children:[(0,ae.tZ)(X.Z,{organization:o,location:s,vitalName:l}),(0,ae.tZ)(M.Dx,{children:pe.jo[l]})]}),(0,ae.tZ)(M.kP,{children:(0,ae.BX)(R.ZP,{gap:1,children:[function(){const{vitalName:t,location:n,organization:r}=e;if(_e.indexOf(t)<0)return null;const s=_e.reduce(((e,s)=>{const a={key:s,label:pe.a7[s],onAction:function(){i.browserHistory.push({pathname:n.pathname,query:{...n.query,vitalName:s,cursor:void 0}}),(0,f.Z)("performance_views.vital_detail.switch_vital",{organization:r,from_vital:pe.a7[t]??"undefined",to_vital:pe.a7[s]??"undefined"})}};return t===s?e.unshift(a):e.push(a),e}),[]);return(0,ae.tZ)(O.Z,{items:s,triggerLabel:pe.a7[t],triggerProps:{"aria-label":`Web Vitals: ${pe.a7[t]}`,prefix:(0,m.t)("Web Vitals")},position:"bottom-start"})}(),(0,ae.tZ)(b.Z,{organization:o,features:["incidents"],children:t=>{let{hasFeature:n}=t;return n&&function(){const{eventView:t,organization:n,projects:r,vitalName:s}=e;return(0,ae.tZ)(N.K,{eventView:t,organization:n,projects:r,"aria-label":(0,m.t)("Create Alert"),alertType:pe.W0[s],referrer:"performance"})}()}})]})})]}),(0,ae.BX)(M.uT,{children:[t?(0,ae.tZ)(A.Z,{type:"error",showIcon:!0,children:t}):null,(0,ae.BX)(M.or,{fullWidth:!0,children:[(0,ae.tZ)(we,{children:pe.il[c]}),(0,ae.tZ)(Ce,{children:Object.values(H.AR).map((e=>(0,ae.BX)(be,{children:[pe.cD[c]?.includes(e)?(0,ae.tZ)(L.DL,{color:"green300",size:"sm"}):(0,ae.tZ)(L.bM,{color:"red300",size:"sm"}),e]},e)))}),function(t){const{location:s,organization:i,eventView:o,projects:c}=e,{fields:l,start:u,end:p,statsPeriod:d,environment:m,project:g}=o,f=(0,y.ro)(s.query.query,""),h=i.slug,v=u?(0,B.hC)(u):null,S=p?(0,B.hC)(p):null,x=(0,I.ZS)({start:v,end:S,period:d},"high"),_=function(e){const t=new G.MY(e);return t.freeText=[],t.formatString()}((0,w.Ov)(s));return(0,ae.BX)(a.Fragment,{children:[(0,ae.BX)(Ae,{children:[(0,ae.BX)(V.Z,{condensed:!0,children:[(0,ae.tZ)(D.Z,{}),(0,ae.tZ)(q.Z,{}),(0,ae.tZ)(j.Z,{alignDropdown:"left"})]}),(0,ae.tZ)(P.Z,{searchSource:"performance_vitals",organization:i,projectIds:g,query:f,fields:l,onSearch:r})]}),(0,ae.tZ)(Se.Z,{organization:i,query:f,project:g,environment:m,start:v,end:S,statsPeriod:d,interval:x}),(0,ae.tZ)(Ze,{children:(0,ae.tZ)(xe.Z,{orgSlug:h,location:s,vital:t,project:g,environment:m,start:u,end:p,statsPeriod:d})}),(0,ae.tZ)($.Z,{provideUserTeams:!0,children:e=>{let{teams:t,initiallyLoaded:r}=e;return r?(0,ae.tZ)(F.z,{organization:i,teams:t,selectedTeams:["myteams"],selectedProjects:g.map(String),children:(0,ae.tZ)(ye,{eventView:o,projects:c,organization:i,location:s,setError:n,summaryConditions:_})}):(0,ae.tZ)(k.Z,{})}})]})}(l)]})]})]})}Ee.displayName="VitalDetailContent";const Te=(0,E.Z)(Ee),we=(0,s.Z)("div",{target:"e150wv1u4"})("font-size:",(e=>e.theme.fontSizeMedium),";margin-bottom:",(0,U.Z)(3),";"),Ze=(0,s.Z)("div",{target:"e150wv1u3"})("margin-bottom:",(0,U.Z)(3),";"),Ce=(0,s.Z)("div",{target:"e150wv1u2"})("display:inline-flex;gap:",(0,U.Z)(2),";margin-bottom:",(0,U.Z)(3),";"),be=(0,s.Z)("div",{target:"e150wv1u1"})("display:flex;align-items:center;gap:",(0,U.Z)(1),";"),Ae=(0,s.Z)("div",{target:"e150wv1u0"})("display:grid;gap:",(0,U.Z)(2),";margin-bottom:",(0,U.Z)(2),";@media (min-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:auto 1fr;}");class Re extends a.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{eventView:(0,T.AM)(this.props.location)})}static getDerivedStateFromProps(e,t){return{...t,eventView:(0,T.AM)(e.location)}}componentDidMount(){const{api:e,organization:t,selection:n,location:r,projects:s}=this.props;(0,l.QK)(e,t.slug,n),(0,w.n4)(n),(0,f.Z)("performance_views.vital_detail.view",{organization:t,project_platforms:(0,w.p9)(r,s)})}componentDidUpdate(e){const{api:t,organization:n,selection:r}=this.props;c()(e.selection.projects,r.projects)&&c()(e.selection.datetime,r.datetime)||((0,l.QK)(t,n.slug,r),(0,w.n4)(r))}getDocumentTitle(){const e=(0,w.JY)(this.props.location);return"string"==typeof e&&String(e).trim().length>0?[String(e).trim(),(0,m.t)("Performance")].join(" - "):[(0,m.t)("Vital Detail"),(0,m.t)("Performance")].join(" - ")}render(){const{organization:e,location:t,router:n,api:r}=this.props,{eventView:s}=this.state;if(!s)return i.browserHistory.replace({pathname:`/organizations/${e.slug}/performance/`,query:{...t.query}}),null;const a=(0,y.ro)(t.query.vitalName),o=-1===Object.values(h.Zl).indexOf(a)?void 0:a;return(0,ae.tZ)(d.Z,{title:this.getDocumentTitle(),orgSlug:e.slug,children:(0,ae.tZ)(v.bq,{value:{eventView:this.state.eventView},children:(0,ae.tZ)(p.Z,{children:(0,ae.tZ)(Ie,{children:(0,ae.tZ)(u.Z,{organization:e,children:(0,ae.tZ)(Te,{location:t,organization:e,eventView:s,router:n,vitalName:o||h.Zl.LCP,api:r})})})})})})}}Re.displayName="VitalDetail";const Ie=(0,s.Z)(g.JH,{target:"ekkkevo0"})({name:"1hcx8jb",styles:"padding:0"}),Ne=(0,S.Z)((0,_.Z)((0,E.Z)((0,x.Z)(Re))))},"./app/views/performance/vitalDetail/vitalChart.tsx":(e,t,n)=>{n.d(t,{S:()=>A,Z:()=>C});var r=n("../node_modules/react-router/es/index.js"),s=n("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),a=n("./app/components/charts/chartZoom.tsx"),i=n("./app/components/charts/errorPanel.tsx"),o=n("./app/components/charts/eventsRequest.tsx"),c=n("./app/components/charts/lineChart.tsx"),l=n("./app/components/charts/releaseSeries.tsx"),u=n("./app/components/charts/styles.tsx"),p=n("./app/components/charts/transitionChart.tsx"),d=n("./app/components/charts/transparentLoadingMask.tsx"),m=n("./app/components/panels/index.tsx"),g=n("./app/components/questionTooltip.tsx"),f=n("./app/icons/index.tsx"),h=n("./app/locale.tsx"),v=n("./app/utils/discover/charts.tsx"),y=n("./app/utils/discover/fields.tsx"),S=n("./app/utils/fields/index.ts"),x=n("./app/utils/getDynamicText.tsx"),_=n("./app/utils/useApi.tsx"),E=n("./app/views/performance/trends/utils.tsx"),T=n("./app/views/performance/vitalDetail/utils.tsx"),w=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function Z(e){let{project:t,environment:n,location:v,organization:y,query:S,statsPeriod:Z,router:C,start:b,end:A,interval:R}=e;const I=(0,_.Z)(),N=(0,s.u)(),j=(0,T.iF)(v),O=`p75(${j})`,{utc:q,legend:P,vitalPoor:M,markLines:k,chartOptions:V}=(0,T.EX)({theme:N,location:v,yAxis:O,vital:j});function z(e){const{selected:t}=e,n=Object.keys(t).filter((e=>!t[e])),s={...v,query:{...v.query,unselectedSeries:n}};r.browserHistory.push(s)}return(0,w.tZ)(m.s_,{children:(0,w.BX)(u.BO,{children:[(0,w.BX)(u.ws,{children:[(0,T.Uy)(j),(0,w.tZ)(g.Z,{size:"sm",position:"top",title:(0,h.t)("The durations shown should fall under the vital threshold.")})]}),(0,w.tZ)(a.Z,{router:C,period:Z,start:b,end:A,utc:q,children:e=>(0,w.tZ)(o.Z,{api:I,organization:y,period:Z,project:t,environment:n,start:b,end:A,interval:R,showLoading:!1,query:S,includePrevious:!1,yAxis:[O],partial:!0,children:r=>{let{timeseriesData:s,errored:a,loading:o,reloading:u}=r;if(a)return(0,w.tZ)(i.Z,{children:(0,w.tZ)(f.FC,{color:"gray500",size:"lg"})});const m=s&&N.charts.getColorPalette(s.length-2)||[],{smoothedResults:g}=(0,E.vq)(s),h=g?g.map(((e,t)=>{let{seriesName:n,...r}=e;return{seriesName:(0,E.HF)(n)||"p75",...r,color:m[t],lineStyle:{opacity:1,width:2}}})):[],v=(0,T.vk)(h),y=Math.max(v,M);return V.yAxis.max=1.1*y,(0,w.tZ)(l.Z,{start:b,end:A,period:Z,utc:q,projects:t,environments:n,children:t=>{let{releaseSeries:n}=t;return(0,w.BX)(p.Z,{loading:o,reloading:u,children:[(0,w.tZ)(d.Z,{visible:u}),(0,x.Z)({value:(0,w.tZ)(c.w,{...e,...V,legend:P,onLegendSelectChanged:z,series:[...k,...n,...h]}),fixed:"Web Vitals Chart"})]})}})}})})]})})}Z.displayName="VitalChart";const C=(0,r.withRouter)(Z);function b(e,t){return e===t?.poorCountField.replace("equation|","")?T.SP.POOR:e===t?.mehCountField.replace("equation|","")?T.SP.MEH:e===t?.goodCountField.replace("equation|","")?T.SP.GOOD:void 0}function A(e){const{field:t,data:n,loading:r,reloading:a,height:i,grid:o,utc:l,vitalFields:u}=e,m=(0,s.u)();if(!n||!u)return null;const g={grid:o,seriesOptions:{showSymbol:!1},tooltip:{trigger:"axis",valueFormatter:(e,n)=>(0,v.CX)(e,(0,y.Px)(u[0]===S.Zl.CLS?n:t))},xAxis:{show:!1},xAxes:void 0,yAxis:{axisLabel:{color:m.chartLabel,showMaxLabel:!1,formatter:e=>(0,v.gu)(e,(0,y.Px)(t))}},utc:l,isGroupedByDate:!0,showTimeInTooltip:!0},f=n.filter((e=>!!b(e.seriesName,u))),h=f?.length?f.map((e=>{let{seriesName:t,...n}=e;const r=b(t,u)||"count";return{seriesName:r,...n,color:m[T.fL[r]],lineStyle:{opacity:1,width:2}}})):[];return(0,w.tZ)("div",{children:(0,w.BX)(p.Z,{loading:r,reloading:a,children:[(0,w.tZ)(d.Z,{visible:a}),(0,x.Z)({value:(0,w.tZ)(c.w,{height:i,...g,onLegendSelectChanged:()=>{},series:[...h],isGroupedByDate:!0}),fixed:"Web Vitals Chart"})]})})}A.displayName="_VitalChart"},"./app/views/performance/vitalDetail/vitalInfo.tsx":(e,t,n)=>{n.d(t,{Z:()=>o});var r=n("./app/utils/performance/vitals/vitalsCardsDiscoverQuery.tsx"),s=n("./app/views/performance/landing/vitalsCards.tsx"),a=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){let{vital:t,location:n,isLoading:i,hideBar:o,hideStates:c,hideVitalPercentNames:l,hideVitalThresholds:u,hideDurationDetail:p}=e;const d=Array.isArray(t)?t:[t],m={vital:t,showBar:!o,showStates:!c,showVitalPercentNames:!l,showVitalThresholds:!u,showDurationDetail:!p};return(0,a.tZ)(r.Z,{location:n,vitals:d,children:e=>{let{isLoading:t,vitalsData:n}=e;return(0,a.tZ)(s.JO,{...m,isLoading:i||t,data:n})}})}i.displayName="VitalInfo";const o=i}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_vitalDetail_index_tsx.498123db84dc330971d90959c4338c33.js.map