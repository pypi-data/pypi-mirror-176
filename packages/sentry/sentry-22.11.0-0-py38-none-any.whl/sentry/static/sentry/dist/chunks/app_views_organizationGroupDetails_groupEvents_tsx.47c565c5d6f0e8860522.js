"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_organizationGroupDetails_groupEvents_tsx"],{"./app/components/acl/role.tsx":(e,t,i)=>{i.d(t,{u:()=>o}),i("../node_modules/core-js/modules/es.array.includes.js");var s=i("../node_modules/react/index.js"),n=i("./app/stores/configStore.tsx"),a=i("./app/utils/isActiveSuperuser.tsx"),r=i("./app/utils/isRenderFunc.tsx");const o=(0,i("./app/utils/withOrganization.tsx").Z)((function(e){let{role:t,organization:i,children:o}=e;const d=n.Z.get("user"),c=(0,s.useMemo)((()=>function(e,t,i){if(!e)return!1;if((0,a.M)())return!0;if(!Array.isArray(t.orgRoleList))return!1;const s=t.orgRoleList.map((e=>e.id));if(!s.includes(i)||!s.includes(t.role??""))return!1;const n=s.indexOf(i);return s.indexOf(t.role??"")>=n}(d,i,t)),[i,t,d]);return(0,r.l)(o)?o({hasRole:c}):c?o:null}))},"./app/components/attachmentUrl.tsx":(e,t,i)=>{i.d(t,{Z:()=>d});var s=i("../node_modules/react/index.js"),n=i("./app/components/acl/role.tsx"),a=i("./app/utils/withOrganization.tsx"),r=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function o(e){let{attachment:t,organization:i,eventId:s,projectId:a,children:o}=e;return(0,r.tZ)(n.u,{role:i.attachmentsRole,children:e=>{let{hasRole:n}=e;return o(n?`/api/0/projects/${i.slug}/${a}/events/${s}/attachments/${t.id}/`:null)}})}o.displayName="AttachmentUrl";const d=(0,a.Z)((0,s.memo)(o))},"./app/components/deviceName.tsx":(e,t,i)=>{i.d(t,{H:()=>o,q:()=>r});var s=i("../node_modules/react/index.js");const n={"iPod1,1":"iPod touch","iPod2,1":"iPod touch (2nd generation)","iPod3,1":"iPod touch (3rd generation)","iPod4,1":"iPod touch (4th generation)","iPod5,1":"iPod touch (5th generation)","iPod7,1":"iPod touch (6th generation)","iPod9,1":"iPod touch (7th generation)","iPhone1,1":"iPhone","iPhone1,2":"iPhone 3G","iPhone2,1":"iPhone 3GS","iPhone3,1":"iPhone 4","iPhone3,2":"iPhone 4","iPhone3,3":"iPhone 4","iPhone4,1":"iPhone 4S","iPhone5,1":"iPhone 5","iPhone5,2":"iPhone 5","iPhone5,3":"iPhone 5c","iPhone5,4":"iPhone 5c","iPhone6,1":"iPhone 5s","iPhone6,2":"iPhone 5s","iPhone8,4":"iPhone SE (1st generation)","iPhone7,2":"iPhone 6","iPhone7,1":"iPhone 6 Plus","iPhone8,1":"iPhone 6s","iPhone8,2":"iPhone 6s Plus","iPhone9,1":"iPhone 7","iPhone9,3":"iPhone 7","iPhone9,2":"iPhone 7 Plus","iPhone9,4":"iPhone 7 Plus","iPhone10,1":"iPhone 8","iPhone10,4":"iPhone 8","iPhone10,2":"iPhone 8 Plus","iPhone10,5":"iPhone 8 Plus","iPhone10,3":"iPhone X","iPhone10,6":"iPhone X","iPhone11,8":"iPhone XR","iPhone11,2":"iPhone XS","iPhone11,4":"iPhone XS Max","iPhone11,6":"iPhone XS Max","iPhone12,1":"iPhone 11","iPhone12,3":"iPhone 11 Pro","iPhone12,5":"iPhone 11 Pro Max","iPhone12,8":"iPhone SE (2nd generation)","iPhone13,1":"iPhone 12 mini","iPhone13,2":"iPhone 12","iPhone13,3":"iPhone 12 Pro","iPhone13,4":"iPhone 12 Pro Max","iPad6,7":"iPad Pro (12.9-inch)","iPad6,8":"iPad Pro (12.9-inch)","iPad6,3":"iPad Pro (9.7-inch)","iPad6,4":"iPad Pro (9.7-inch)","iPad7,1":"iPad Pro (12.9-inch, 2nd generation)","iPad7,2":"iPad Pro (12.9-inch, 2nd generation)","iPad7,3":"iPad Pro (10.5-inch)","iPad7,4":"iPad Pro (10.5-inch)","iPad8,1":"iPad Pro (11-inch)","iPad8,2":"iPad Pro (11-inch)","iPad8,3":"iPad Pro (11-inch)","iPad8,4":"iPad Pro (11-inch)","iPad8,5":"iPad Pro (12.9-inch) (3rd generation)","iPad8,6":"iPad Pro (12.9-inch) (3rd generation)","iPad8,7":"iPad Pro (12.9-inch) (3rd generation)","iPad8,8":"iPad Pro (12.9-inch) (3rd generation)","iPad8,9":"iPad Pro (11-inch) (2nd generation)","iPad8,10":"iPad Pro (11-inch) (2nd generation)","iPad8,11":"iPad Pro (12.9-inch) (4th generation)","iPad8,12":"iPad Pro (12.9-inch) (4th generation)","iPad2,5":"iPad mini","iPad2,6":"iPad mini","iPad2,7":"iPad mini","iPad4,4":"iPad mini 2","iPad4,5":"iPad mini 2","iPad4,6":"iPad mini 2","iPad4,7":"iPad mini 3","iPad4,8":"iPad mini 3","iPad4,9":"iPad mini 3","iPad5,1":"iPad mini 4","iPad5,2":"iPad mini 4","iPad11,1":"iPad mini (5th generation)","iPad11,2":"iPad mini (5th generation)","iPad4,1":"iPad Air","iPad4,2":"iPad Air","iPad4,3":"iPad Air","iPad5,3":"iPad Air 2","iPad5,4":"iPad Air 2","iPad11,3":"iPad Air (3rd generation)","iPad11,4":"iPad Air (3rd generation)","iPad13,1":"iPad Air (4th generation)","iPad13,2":"iPad Air (4th generation)","iPad1,1":"iPad","iPad2,1":"iPad 2","iPad2,2":"iPad 2","iPad2,3":"iPad 2","iPad2,4":"iPad 2","iPad3,1":"iPad (3rd generation)","iPad3,2":"iPad (3rd generation)","iPad3,3":"iPad (3rd generation)","iPad3,4":"iPad (4th generation)","iPad3,5":"iPad (4th generation)","iPad3,6":"iPad (4th generation)","iPad6,11":"iPad (5th generation)","iPad6,12":"iPad (5th generation)","iPad7,5":"iPad (6th generation)","iPad7,6":"iPad (6th generation)","iPad7,11":"iPad (7th generation)","iPad7,12":"iPad (7th generation)","iPad11,6":"iPad (8th generation)","iPad11,7":"iPad (8th generation)","AudioAccessory1,1":"HomePod","AudioAccessory1,2":"HomePod","AudioAccessory5,1":"HomePod mini","Watch1,1":"Apple Watch (1st generation)","Watch1,2":"Apple Watch (1st generation)","Watch2,6":"Apple Watch Series 1","Watch2,7":"Apple Watch Series 1","Watch2,3":"Apple Watch Series 2","Watch2,4":"Apple Watch Series 2","Watch3,1":"Apple Watch Series 3","Watch3,2":"Apple Watch Series 3","Watch3,3":"Apple Watch Series 3","Watch3,4":"Apple Watch Series 3","Watch4,1":"Apple Watch Series 4","Watch4,2":"Apple Watch Series 4","Watch4,3":"Apple Watch Series 4","Watch4,4":"Apple Watch Series 4","Watch5,1":"Apple Watch Series 5","Watch5,2":"Apple Watch Series 5","Watch5,3":"Apple Watch Series 5","Watch5,4":"Apple Watch Series 5","Watch5,9":"Apple Watch SE","Watch5,10":"Apple Watch SE","Watch5,11":"Apple Watch SE","Watch5,12":"Apple Watch SE","Watch6,1":"Apple Watch Series 6","Watch6,2":"Apple Watch Series 6","Watch6,3":"Apple Watch Series 6","Watch6,4":"Apple Watch Series 6","AppleTV1,1":"Apple TV (1st generation)","AppleTV2,1":"Apple TV (2nd generation)","AppleTV3,1":"Apple TV (3rd generation)","AppleTV3,2":"Apple TV (3rd generation)","AppleTV5,3":"Apple TV (4th generation)","AppleTV6,2":"Apple TV 4K","AirPods1,1":"AirPods (1st generation)","AirPods2,1":"AirPods (2nd generation)","iProd8,1":"AirPods Pro"};var a=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function r(t){if("string"!=typeof t)return null;if(null===e)return t;const[i,...s]=t.split(" "),a=n[i];return void 0===a?t:`${a} ${s.join(" ")}`}function o(e){let{value:t,children:i}=e;const n=(0,s.useMemo)((()=>r(t)),[t]);return n?(0,a.tZ)("span",{"data-test-id":"loaded-device-name",children:i?i(n):n}):null}e=i.hmd(e)},"./app/components/events/searchBar.tsx":(e,t,i)=>{i.d(t,{Z:()=>_}),i("../node_modules/core-js/modules/es.error.cause.js"),i("../node_modules/core-js/modules/es.array.includes.js");var s=i("../node_modules/react/index.js"),n=i("../node_modules/@sentry/browser/node_modules/@sentry/core/esm/exports.js"),a=i("../node_modules/lodash/assign.js"),r=i.n(a),o=i("../node_modules/lodash/flatten.js"),d=i.n(o),c=i("../node_modules/lodash/memoize.js"),l=i.n(c),p=i("../node_modules/lodash/omit.js"),h=i.n(p),u=i("./app/actionCreators/tags.tsx"),P=i("./app/components/smartSearchBar/index.tsx"),m=i("./app/constants/index.tsx"),g=i("./app/types/index.tsx"),y=i("./app/utils.tsx"),x=i("./app/utils/discover/fields.tsx"),Z=i("./app/utils/fields/index.ts"),v=i("./app/utils/measurements/measurements.tsx"),f=i("./app/utils/useApi.tsx"),j=i("./app/utils/withTags.tsx"),S=i("./app/views/dashboardsV2/utils.tsx"),b=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const A=new RegExp(`^${m.c$}|\\${m.ir}`,"g"),W=new Set(Object.keys(x.wZ)),T=Object.keys(x.wZ).reduce(((e,t)=>(e[t]={...x.wZ[t],kind:Z.IV.FIELD},e)),{}),I=h()(T,x.J8),w=x.$4.reduce(((e,t)=>(e[t]={name:t,kind:Z.IV.METRICS},e)),{}),k=Object.keys(x.jg).reduce(((e,t)=>(e[t]={...x.jg[t],kind:Z.IV.FIELD},e)),{});function E(e){const{maxSearchItems:t,organization:i,tags:a,omitTags:o,fields:c,projectIds:p,includeSessionTagsValues:m,maxMenuHeight:j,customMeasurements:E}=e,_=(0,f.Z)(),N=(0,s.useRef)(!1),z=(0,s.useMemo)((()=>(e=>e?.length?e.reduce(((e,t)=>(W.has(t.field)||(0,x.GO)(t.field)||(0,S.nk)(t.field)||(e[t.field]={key:t.field,name:t.field,kind:Z.IV.FUNCTION}),e)),{}):[])(c)),[c]),C=(0,s.useMemo)((()=>Object.keys(a).reduce(((e,t)=>(e[t]={...a[t],kind:Z.IV.TAG},e)),{})),[a]);(0,s.useEffect)((()=>{q.cache.clear?.()}),[p]);const q=l()(((e,t,s)=>{const n=p?.map(String);return(0,x.h1)(e.key)||(0,x.Xr)(e.key)?Promise.resolve([]):(0,u.Fo)({api:_,orgSlug:i.slug,tagKey:e.key,search:t,projectIds:n,endpointParams:s,includeTransactions:!0,includeSessions:m}).then((e=>d()(e.filter((e=>{let{name:t}=e;return(0,y.ri)(t)})).map((e=>{let{name:t}=e;return t})))),(()=>{throw new Error("Unable to fetch event field values")}))}),((e,t)=>{let{key:i}=e;return`${i}-${t}`})),R=e=>{let t;!N.current&&Object.keys(a).length>0&&(t=n.Yr({name:"SearchBar.getTagList"}),N.current=!0);const s=((e,t)=>{const i=Object.keys(e).reduce(((t,i)=>(t[i]={...e[i],kind:Z.IV.MEASUREMENT},t)),{});return t?Object.keys(t).reduce(((e,i)=>(e[i]={...t[i],kind:Z.IV.MEASUREMENT},e)),i):i})(e,E),d=i.features.includes("performance-view")?Object.assign({},s,z,w,T):Object.assign({},I);r()(d,C,T,k),d.has={key:Z.Sh.HAS,name:"Has property",values:Object.keys(d).sort(((e,t)=>e.toLowerCase().localeCompare(t.toLowerCase()))),predefined:!0,kind:Z.IV.FIELD};const c=o&&o.length>0?h()(d,o):d;if(t){const e=Object.keys(c).length;t.setTag("tags.totalCount",e);const i=[1,5,10,20,50,100,200,300,400,500,600,700,800,900,1e3,1e4].find((t=>e<=t));t.setTag("tags.totalCount.grouped",`<=${i}`),t.finish()}return c};return(0,b.tZ)(v.Z,{children:i=>{let{measurements:s}=i;return(0,b.tZ)(P.Z,{hasRecentSearches:!0,savedSearchType:g.L4.EVENT,onGetTagValues:q,supportedTags:R(s),prepareQuery:e=>e.replace(A,""),maxSearchItems:t,excludedTags:["environment"],maxMenuHeight:j??300,customPerformanceMetrics:E,...e})}})}E.displayName="SearchBar";const _=(0,j.Z)(E)},"./app/components/searchBar.tsx":(e,t,i)=>{i.d(t,{Z:()=>g});var s=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=i("../node_modules/react/index.js"),a=i("./app/components/button.tsx"),r=i("./app/components/inputGroup.tsx"),o=i("./app/icons/index.tsx"),d=i("./app/icons/iconClose.tsx"),c=i("./app/locale.tsx"),l=i("./app/styles/space.tsx"),p=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function h(e){let{query:t,defaultQuery:i="",onChange:s,onSearch:a,width:l,size:h,className:g,...y}=e;const x=(0,n.useRef)(null),[Z,v]=(0,n.useState)(t??i);(0,n.useEffect)((()=>{"string"==typeof t&&v(t)}),[t]);const f=(0,n.useCallback)((e=>{const{value:t}=e.target;v(t),s?.(t)}),[s]),j=(0,n.useCallback)((e=>{e.preventDefault(),x.current?.blur(),a?.(Z)}),[a,Z]),S=(0,n.useCallback)((()=>{v(""),s?.(""),a?.("")}),[s,a]);return(0,p.tZ)(u,{onSubmit:j,className:g,children:(0,p.BX)(r.BZ,{children:[(0,p.tZ)(r.t_,{disablePointerEvents:!0,children:(0,p.tZ)(o.jV,{color:"subText",size:"xs"===h?"xs":"sm"})}),(0,p.tZ)(P,{...y,ref:x,type:"text",name:"query",autoComplete:"off",value:Z,onChange:f,width:l,size:h}),(0,p.tZ)(r.Oj,{children:!!Z&&(0,p.tZ)(m,{type:"button",size:"zero",borderless:!0,onClick:S,icon:(0,p.tZ)(d.b,{size:"xs"}),"aria-label":(0,c.t)("Clear")})})]})})}h.displayName="SearchBar";const u=(0,s.Z)("form",{target:"e4xnwji2"})({name:"4bgdod",styles:"display:block;position:relative"}),P=(0,s.Z)(r.II,{target:"e4xnwji1"})((e=>e.width&&`width: ${e.width};`),";"),m=(0,s.Z)(a.ZP,{target:"e4xnwji0"})("color:",(e=>e.theme.subText),";padding:",(0,l.Z)(.5),";"),g=h},"./app/utils/withTags.tsx":(e,t,i)=>{i.d(t,{Z:()=>d});var s=i("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=i("../node_modules/react/index.js"),a=i("./app/stores/tagStore.tsx"),r=i("./app/utils/getDisplayName.tsx"),o=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const d=function(e){class t extends n.Component{constructor(){super(...arguments),(0,s.Z)(this,"state",{tags:a.Z.getState()}),(0,s.Z)(this,"unsubscribe",a.Z.listen((e=>this.setState({tags:e})),void 0))}componentWillUnmount(){this.unsubscribe()}render(){const{tags:t,...i}=this.props;return(0,o.tZ)(e,{tags:t??this.state.tags,...i})}}return t.displayName="WithTags",(0,s.Z)(t,"displayName",`withTags(${(0,r.Z)(e)})`),t}},"./app/views/organizationGroupDetails/groupEvents.tsx":(e,t,i)=>{i.r(t),i.d(t,{GroupEvents:()=>D,default:()=>H});var s=i("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(i("../node_modules/core-js/modules/es.array.includes.js"),i("../node_modules/react/index.js")),r=i("../node_modules/react-router/es/index.js"),o=i("../node_modules/lodash/pick.js"),d=i.n(o),c=i("./app/components/emptyStateWarning.tsx"),l=i("./app/components/environmentPageFilter.tsx"),p=i("./app/components/events/searchBar.tsx"),h=i("./app/components/attachmentUrl.tsx"),u=i("./app/components/avatar/userAvatar.tsx"),P=i("./app/components/button.tsx"),m=i("./app/components/dateTime.tsx"),g=i("./app/components/deviceName.tsx"),y=i("./app/components/fileSize.tsx"),x=i("./app/components/globalSelectionLink.tsx"),Z=i("./app/icons/index.tsx"),v=i("./app/locale.tsx"),f=i("./app/utils/getRouteStringFromRoutes.tsx"),j=i("./app/utils/useRoutes.tsx"),S=i("./app/utils/withOrganization.tsx"),b=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function A(e){let{className:t,event:i,projectId:s,orgId:n,groupId:a,tagList:r,hasUser:o,organization:d}=e;const c=(0,j.V)(),l=i.crashFile?(0,b.tZ)(h.Z,{projectId:s,eventId:i.id,attachment:i.crashFile,children:e=>e?(0,b.BX)("small",{children:["event.minidump"===i.crashFile?.type?"Minidump":"Crash file",":"," ",(0,b.tZ)("a",{href:`${e}?download=1`,children:i.crashFile?.name})," (",(0,b.tZ)(y.Z,{bytes:i.crashFile?.size||0}),")"]}):null}):null,p=Object.fromEntries(i.tags.map((e=>[e.key,e.value]))),S=Boolean(p.replayId),A={pathname:`/organizations/${d.slug}/replays/${s}:${p.replayId}/`,query:{referrer:(0,f.Z)(c),event_t:i.dateCreated?new Date(i.dateCreated).getTime():void 0}};return(0,b.BX)("tr",{className:t,children:[(0,b.tZ)("td",{children:(0,b.BX)("h5",{children:[(0,b.tZ)(x.Z,{to:`/organizations/${n}/issues/${a}/events/${i.id}/?referrer=events-table`,children:(0,b.tZ)(m.Z,{date:i.dateCreated,year:!0,seconds:!0,timeZone:!0})}),(0,b.tZ)("small",{children:i.title.substr(0,100)}),l]})}),o&&(0,b.tZ)("td",{className:"event-user table-user-info",children:i.user?(0,b.BX)("div",{children:[(0,b.tZ)(u.Z,{user:i.user,size:24,className:"avatar",gravatar:!1}),i.user.email]}):(0,b.tZ)("span",{children:"â€”"})}),r.map((e=>(0,b.tZ)("td",{children:(0,b.tZ)("div",{children:"device"===e.key?(0,b.tZ)(g.H,{value:p[e.key]}):"replayId"===e.key?S?(0,b.tZ)(P.ZP,{to:A,size:"sm",icon:(0,b.tZ)(Z.JF,{size:"sm"}),"aria-label":(0,v.t)("View Full Replay")}):null:p[e.key]})},e.key)))]},i.id)}A.displayName="EventsTableRow";const W=(0,S.Z)(A);var T=i("./app/utils/replays/projectSupportsReplay.tsx"),I=i("./app/utils/withProjects.tsx");class w extends a.Component{render(){const{events:e,tagList:t,orgId:i,projectId:s,groupId:n,orgFeatures:a,projects:r}=this.props,o=!!e.find((e=>e.user)),d=r.find((e=>e.slug===s)),c=a.includes("session-replay-ui")&&(0,T.Z)(d),l=t.filter((e=>"replayId"!==e.key||c));return(0,b.BX)("table",{className:"table events-table","data-test-id":"events-table",children:[(0,b.tZ)("thead",{children:(0,b.BX)("tr",{children:[(0,b.tZ)("th",{children:(0,v.t)("ID")}),o&&(0,b.tZ)("th",{children:(0,v.t)("User")}),l.map((e=>"replayId"===e.key?(0,b.tZ)("th",{children:(0,v.t)("Replay")},e.key):(0,b.tZ)("th",{children:e.name},e.key)))]})}),(0,b.tZ)("tbody",{children:e.map((e=>(0,b.tZ)(W,{event:e,orgId:i,projectId:s,groupId:n,tagList:l,hasUser:o},e.id)))})]})}}w.displayName="EventsTable";const k=(0,I.Z)(w);var E=i("./app/components/layouts/thirds.tsx"),_=i("./app/components/loadingError.tsx"),N=i("./app/components/loadingIndicator.tsx"),z=i("./app/components/pagination.tsx"),C=i("./app/components/panels/index.tsx"),q=i("./app/components/searchBar.tsx"),R=i("./app/styles/space.tsx"),V=i("./app/types/index.tsx"),$=i("./app/utils/parseApiError.tsx"),B=i("./app/utils/withApi.tsx"),L=i("./app/utils/discover/eventView.tsx"),F=i("./app/views/performance/transactionSummary/transactionEvents/eventsTable.tsx");const M=e=>{const{location:t,organization:i,issueId:s,isPerfIssue:n,excludedTags:r,projectSlug:o,projectId:d,totalEventCount:c}=e,[l,p]=(0,a.useState)(""),h=(0,j.V)(),u=i.features.includes("session-replay-ui"),P=["id","transaction","trace","release","environment","user.display",...n?["transaction.duration"]:[],"timestamp",...u?["replayId"]:[]],m=L.ZP.fromLocation(e.location);m.fields=P.map((e=>({field:e}))),m.sorts=(0,L.GT)(t).filter((e=>P.includes(e.field))),m.sorts.length||(m.sorts=[{field:"timestamp",kind:"desc"}]);const g=n?`performance.issue_ids:${s} event.type:transaction`:`issue.id:${s}`;m.project=[parseInt(d,10)],m.query=`${g} ${e.location.query.query||""}`,m.statsPeriod="90d";const y=[(0,v.t)("event id"),(0,v.t)("transaction"),(0,v.t)("trace id"),(0,v.t)("release"),(0,v.t)("environment"),(0,v.t)("user"),...n?[(0,v.t)("total duration")]:[],(0,v.t)("timestamp"),...u?[(0,v.t)("replay")]:[],(0,v.t)("minidump")];return l?(0,b.tZ)(_.Z,{message:l}):(0,b.tZ)(F.Z,{eventView:m,location:t,issueId:s,organization:i,routes:h,excludedTags:r,projectSlug:o,totalEventCount:c,customColumns:["minidump"],setError:e=>p(e??""),transactionName:"",columnTitles:y.slice(),referrer:"api.issues.issue_events"})};M.displayName="AllEventsTable";const O=M,X=["environment","issue","issue.id","performance.issue_ids"];class D extends a.Component{constructor(e){super(e),(0,s.Z)(this,"handleSearch",(e=>{const t={...this.props.location.query};t.query=e;const{groupId:i,orgId:s}=this.props.params;r.browserHistory.push({pathname:`/organizations/${s}/issues/${i}/events/`,query:t})})),(0,s.Z)(this,"fetchData",(()=>{this.setState({loading:!0,error:!1});const e={...d()(this.props.location.query,["cursor","environment"]),limit:50,query:this.state.query};this.state.renderNewAllEventsTab||this.props.api.request(`/issues/${this.props.params.groupId}/events/`,{query:e,method:"GET",success:(e,t,i)=>{this.setState({eventList:e,error:!1,loading:!1,pageLinks:i?.getResponseHeader("Link")??""})},error:e=>{this.setState({error:(0,$.Z)(e),loading:!1})}})}));const t=this.props.location.query,i=!!this.props.group.id&&this.props.organization.features.includes("performance-issues-all-events-tab");this.state={eventList:[],loading:!0,error:!1,pageLinks:"",query:t.query||"",renderNewAllEventsTab:i}}UNSAFE_componentWillMount(){this.fetchData()}UNSAFE_componentWillReceiveProps(e){if(this.props.location.search!==e.location.search){const t=e.location.query;this.setState({query:t.query},this.fetchData)}}renderNoQueryResults(){return(0,b.tZ)(c.Z,{children:(0,b.tZ)("p",{children:(0,v.t)("Sorry, no events match your search query.")})})}renderEmpty(){return(0,b.tZ)(c.Z,{children:(0,b.tZ)("p",{children:(0,v.t)("There don't seem to be any events yet.")})})}renderNewAllEventsTab(){return(0,b.tZ)(O,{issueId:this.props.group.id,isPerfIssue:this.props.group.issueCategory===V.qE.PERFORMANCE,location:this.props.location,organization:this.props.organization,projectId:this.props.group.project.id,projectSlug:this.props.group.project.slug,totalEventCount:this.props.group.count,excludedTags:X})}renderSearchBar(){const{renderNewAllEventsTab:e}=this.state;return e?(0,b.tZ)(p.Z,{organization:this.props.organization,defaultQuery:"",onSearch:this.handleSearch,excludedTags:X,query:this.state.query,hasRecentSearches:!1}):(0,b.tZ)(q.Z,{defaultQuery:"",placeholder:(0,v.t)("Search events by id, message, or tags"),query:this.state.query,onSearch:this.handleSearch})}renderResults(){const{group:e,params:t,organization:i}=this.props,s=e.tags.filter((e=>"user"!==e.key))||[];return(0,b.tZ)(k,{tagList:s,events:this.state.eventList,orgId:t.orgId,projectId:e.project.slug,groupId:t.groupId,orgFeatures:i.features})}renderBody(){const{renderNewAllEventsTab:e}=this.state;let t;return e?this.renderNewAllEventsTab():(t=this.state.loading?(0,b.tZ)(N.Z,{}):this.state.error?(0,b.tZ)(_.Z,{message:this.state.error,onRetry:this.fetchData}):this.state.eventList.length>0?this.renderResults():this.state.query&&""!==this.state.query?this.renderNoQueryResults():this.renderEmpty(),(0,b.BX)(a.Fragment,{children:[(0,b.tZ)(C.s_,{className:"event-list",children:(0,b.tZ)(C.N,{children:t})}),(0,b.tZ)(z.Z,{pageLinks:this.state.pageLinks})]}))}render(){const e=this.props.organization.features.includes("issue-actions-v2");return(0,b.tZ)(E.uT,{children:(0,b.tZ)(E.or,{fullWidth:!0,children:(0,b.BX)(G,{children:[e?this.renderSearchBar():(0,b.BX)(U,{children:[(0,b.tZ)(l.Z,{}),this.renderSearchBar()]}),this.renderBody()]})})})}}D.displayName="GroupEvents";const U=(0,n.Z)("div",{target:"etd8qom1"})("display:grid;gap:",(0,R.Z)(1),";grid-template-columns:max-content 1fr;"),G=(0,n.Z)("div",{target:"etd8qom0"})("display:grid;gap:",(0,R.Z)(2),";"),H=(0,S.Z)((0,B.Z)(D))}}]);
//# sourceMappingURL=../sourcemaps/app_views_organizationGroupDetails_groupEvents_tsx.45c825b06752e643296a0727df389241.js.map