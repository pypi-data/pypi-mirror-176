"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_admin_adminUsers_tsx"],{"./app/components/dropdownLink.tsx":(e,t,s)=>{s.d(t,{Z:()=>c});var r=s("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),o=s("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),n=s("../node_modules/classnames/index.js"),i=s.n(n),a=s("./app/components/deprecatedDropdownMenu.tsx"),l=s("./app/icons/index.tsx"),d=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const p=e=>(0,r.iv)(".dropdown-menu{&>li>a{color:",e.textColor,";&:hover,&:focus{color:inherit;background-color:",e.hover,";}}& .disabled{cursor:not-allowed;&:hover{background:inherit;color:inherit;}}}.dropdown-submenu:hover>span{color:",e.textColor,";background:",e.hover,";}","");function h(e){let{anchorMiddle:t,title:s,customTitle:r,children:n,menuClasses:h,className:c,topLevelClasses:u,anchorRight:m=!1,disabled:g=!1,caret:y=!0,alwaysRenderMenu:Z=!0,...b}=e;const w=(0,o.u)();return(0,d.tZ)(a.Z,{alwaysRenderMenu:Z,...b,children:e=>{let{isOpen:o,getRootProps:a,getActorProps:b,getMenuProps:v}=e;const x=Z||o,f=i()("dropdown-actor",c,{"dropdown-menu-right":m,"dropdown-toggle":!0,hover:o,disabled:g}),S=i()("dropdown",u,{"pull-right":m,"anchor-right":m,"anchor-middle":t,open:o}),{onClick:N,...k}=b({className:f});return(0,d.BX)("span",{css:p(w),...a({className:S}),"data-test-id":"dropdown-link",children:[(0,d.tZ)("a",{onClick:g?void 0:N,...k,children:r||(0,d.BX)("div",{className:"dropdown-actor-title",children:[s,y&&(0,d.tZ)(l.g6,{direction:o?"up":"down",size:"xs"})]})}),x&&(0,d.tZ)("ul",{...v({className:i()(h,"dropdown-menu")}),children:n})]})}})}h.displayName="DropdownLink";const c=h},"./app/components/resultGrid.tsx":(e,t,s)=>{s.d(t,{Z:()=>g});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=s("../node_modules/react/index.js"),n=s("../node_modules/react-router/es/index.js"),i=s("./app/components/dropdownLink.tsx"),a=s("./app/components/menuItem.tsx"),l=s("./app/components/pagination.tsx"),d=s("./app/icons/index.tsx"),p=s("./app/utils/withApi.tsx"),h=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class c extends o.Component{constructor(){super(...arguments),(0,r.Z)(this,"getSelector",(()=>(0,h.BX)(i.Z,{title:this.getCurrentLabel(),children:[this.getDefaultItem(),this.props.options.map((e=>{let[t,s]=e;const r={[this.props.queryKey]:t,cursor:""},o={...this.props.location.query,...r};return(0,h.tZ)(a.Z,{isActive:this.props.value===t,to:{pathname:this.props.path,query:o},children:s},t)}))]})))}getCurrentLabel(){const e=this.props.options.find((e=>e[0]===(this.props.value??"")));return e?this.props.name+": "+e[1]:this.props.name+": Any"}getDefaultItem(){const e={...this.props.location.query,cursor:""};return delete e[this.props.queryKey],(0,h.tZ)(a.Z,{isActive:""===this.props.value||!this.props.value,to:{pathname:this.props.path,query:e},children:"Any"},"")}render(){return(0,h.tZ)("div",{className:"filter-options",children:1===this.props.options.length?(0,h.tZ)("strong",{children:this.getCurrentLabel()}):this.getSelector()})}}c.displayName="Filter";class u extends o.Component{getCurrentSortLabel(){return this.props.options.find((e=>{let[t]=e;return t===this.props.value}))?.[1]}getSortBySelector(){return(0,h.tZ)(i.Z,{title:this.getCurrentSortLabel(),className:"sorted-by",children:this.props.options.map((e=>{let[t,s]=e;const r={...this.props.location.query,sortBy:t,cursor:""};return(0,h.tZ)(a.Z,{isActive:this.props.value===t,to:{pathname:this.props.path,query:r},children:s},t)}))})}render(){return 0===this.props.options.length?null:(0,h.BX)("div",{className:"sort-options",children:["Showing results sorted by",1===this.props.options.length?(0,h.tZ)("strong",{className:"sorted-by",children:this.getCurrentSortLabel()}):this.getSortBySelector()]})}}u.displayName="SortBy";class m extends o.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",this.defaultState),(0,r.Z)(this,"onSearch",(e=>{const t=this.props.location??{},{query:s}=this.state,r={...t.query??{},query:s,cursor:""};e.preventDefault(),n.browserHistory.push({pathname:this.props.path,query:r})})),(0,r.Z)(this,"onQueryChange",(e=>{this.setState({query:e.target.value})}))}componentWillMount(){this.fetchData()}componentWillReceiveProps(){const e=this.query;this.setState({query:e.query??"",sortBy:e.sortBy??this.props.defaultSort,filters:{...e},pageLinks:null,loading:!0,error:!1},this.fetchData)}get defaultState(){const e=this.query;return{rows:[],loading:!0,error:!1,pageLinks:null,query:e.query??"",sortBy:e.sortBy??this.props.defaultSort,filters:{...e}}}get query(){return(this.props.location??{}).query??{}}remountComponent(){this.setState(this.defaultState,this.fetchData)}refresh(){this.setState({loading:!0},this.fetchData)}fetchData(){const e={...this.props.defaultParams,sortBy:this.state.sortBy,...this.query};this.props.api.request(this.props.endpoint,{method:this.props.method,data:e,success:(e,t,s)=>{this.setState({loading:!1,error:!1,rows:e,pageLinks:s?.getResponseHeader("Link")??null})},error:()=>{this.setState({loading:!1,error:!0})}})}renderLoading(){return(0,h.tZ)("tr",{children:(0,h.tZ)("td",{colSpan:this.props.columns.length,children:(0,h.BX)("div",{className:"loading",children:[(0,h.tZ)("div",{className:"loading-indicator"}),(0,h.tZ)("div",{className:"loading-message",children:"Hold on to your butts!"})]})})})}renderError(){return(0,h.tZ)("tr",{children:(0,h.tZ)("td",{colSpan:this.props.columns.length,children:(0,h.tZ)("div",{className:"alert-block alert-error",children:"Something bad happened :("})})})}renderNoResults(){return(0,h.tZ)("tr",{children:(0,h.tZ)("td",{colSpan:this.props.columns.length,children:"No results found."})})}renderResults(){return this.state.rows.map((e=>(0,h.tZ)("tr",{children:this.props.columnsForRow?.(e)},this.props.keyForRow?.(e))))}render(){const{filters:e,sortOptions:t,path:s,location:r}=this.props;return(0,h.BX)("div",{className:"result-grid",children:[(0,h.BX)("div",{className:"table-options",children:[this.props.hasSearch&&(0,h.tZ)("div",{className:"result-grid-search",children:(0,h.tZ)("form",{onSubmit:this.onSearch,children:(0,h.BX)("div",{className:"form-group",children:[(0,h.tZ)("input",{type:"text",className:"form-control input-search",placeholder:"search",style:{width:300},name:"query",autoComplete:"off",value:this.state.query,onChange:this.onQueryChange}),(0,h.tZ)("button",{type:"submit",className:"btn btn-sm btn-primary",children:(0,h.tZ)(d.jV,{size:"xs"})})]})})}),(0,h.tZ)(u,{options:t??[],value:this.state.sortBy,path:s??"",location:r}),Object.keys(e??{}).map((t=>(0,h.tZ)(c,{queryKey:t,value:this.state.filters[t],path:s??"",location:r,...e?.[t]},t)))]}),(0,h.BX)("table",{className:"table table-grid",children:[(0,h.tZ)("thead",{children:(0,h.tZ)("tr",{children:this.props.columns})}),(0,h.tZ)("tbody",{children:this.state.loading?this.renderLoading():this.state.error?this.renderError():0===this.state.rows.length?this.renderNoResults():this.renderResults()})]}),this.props.hasPagination&&this.state.pageLinks&&(0,h.tZ)(l.Z,{pageLinks:this.state.pageLinks})]})}}m.displayName="ResultGrid",(0,r.Z)(m,"defaultProps",{path:"",endpoint:"",method:"GET",columns:[],sortOptions:[],filters:{},defaultSort:"",keyForRow:e=>e.id,columnsForRow:()=>[],defaultParams:{per_page:50},hasPagination:!0,hasSearch:!1});const g=(0,p.Z)(m)},"./app/views/admin/adminUsers.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>c,prettyDate:()=>h});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=s("../node_modules/moment/moment.js"),n=s.n(o),i=s("./app/components/links/link.tsx"),a=s("./app/components/resultGrid.tsx"),l=s("./app/locale.tsx"),d=s("./app/views/asyncView.tsx"),p=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const h=function(e){return n()(e).format("ll")};class c extends d.Z{constructor(){super(...arguments),(0,r.Z)(this,"getRow",(e=>[(0,p.BX)("td",{children:[(0,p.tZ)("strong",{children:(0,p.tZ)(i.Z,{to:`/manage/users/${e.id}/`,children:e.username})}),(0,p.tZ)("br",{}),e.email!==e.username&&(0,p.tZ)("small",{children:e.email})]},"username"),(0,p.tZ)("td",{style:{textAlign:"center"},children:h(e.dateJoined)},"dateJoined"),(0,p.tZ)("td",{style:{textAlign:"center"},children:h(e.lastLogin)},"lastLogin")]))}render(){const e=[(0,p.tZ)("th",{children:"User"},"username"),(0,p.tZ)("th",{style:{textAlign:"center",width:150},children:"Joined"},"dateJoined"),(0,p.tZ)("th",{style:{textAlign:"center",width:150},children:"Last Login"},"lastLogin")];return(0,p.BX)("div",{children:[(0,p.tZ)("h3",{children:(0,l.t)("Users")}),(0,p.tZ)(a.Z,{path:"/manage/users/",endpoint:"/users/",method:"GET",columns:e,columnsForRow:this.getRow,hasSearch:!0,filters:{status:{name:"Status",options:[["active","Active"],["disabled","Disabled"]]}},sortOptions:[["date","Date Joined"]],defaultSort:"date",...this.props})]})}}c.displayName="AdminUsers"},"./app/views/asyncView.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});var r=s("./app/components/asyncComponent.tsx"),o=s("./app/components/sentryDocumentTitle.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class i extends r.Z{getTitle(){return""}render(){return(0,n.tZ)(o.Z,{title:this.getTitle(),children:this.renderComponent()})}}i.displayName="AsyncView"}}]);
//# sourceMappingURL=../sourcemaps/app_views_admin_adminUsers_tsx.64d43e2b9eb672ab6b5f94238b3b0d15.js.map