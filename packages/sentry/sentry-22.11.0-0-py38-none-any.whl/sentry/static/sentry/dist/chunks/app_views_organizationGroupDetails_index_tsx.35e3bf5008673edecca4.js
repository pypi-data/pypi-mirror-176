"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_organizationGroupDetails_index_tsx"],{"./app/components/events/errorLevel.tsx":(e,t,s)=>{s.d(t,{Z:()=>o});var i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js");const r="13px",o=(0,i.Z)("span",{target:"e145dcfe0"})("padding:0;position:relative;width:",(e=>e.size||r),";height:",(e=>e.size||r),";text-indent:-9999em;display:inline-block;border-radius:50%;flex-shrink:0;background-color:",(e=>e.level?e.theme.level[e.level]:e.theme.level.error),";")},"./app/components/events/eventMessage.tsx":(e,t,s)=>{s.d(t,{Z:()=>d});var i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("./app/components/events/errorLevel.tsx"),o=s("./app/styles/space.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const a=(0,i.Z)((e=>{let{className:t,level:s,levelIndicatorSize:i,message:o,annotations:a}=e;return(0,n.BX)("div",{className:t,children:[s&&(0,n.tZ)(r.Z,{size:i,level:s,children:s}),o&&(0,n.tZ)(l,{children:o}),a]})}),{target:"e1rp796r1"})("display:flex;gap:",(0,o.Z)(1),";align-items:center;position:relative;line-height:1.2;overflow:hidden;"),l=(0,i.Z)("span",{target:"e1rp796r0"})((e=>e.theme.overflowEllipsis)," width:auto;max-height:38px;"),d=a},"./app/components/pageAlertBar.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});const i=(0,s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js").Z)("div",{target:"eb4vrz50"})("display:flex;align-items:center;justify-content:center;color:",(e=>e.theme.headerBackground),";background-color:",(e=>e.theme.bannerBackground),";padding:6px 30px;font-size:14px;")},"./app/components/replays/replaysFeatureBadge.tsx":(e,t,s)=>{s.d(t,{Z:()=>n});var i=s("./app/components/featureBadge.tsx"),r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function o(e){return(0,r.tZ)(i.Z,{...e,type:"beta"})}o.displayName="ReplaysFeatureBadge";const n=o},"./app/components/seenByList.tsx":(e,t,s)=>{s.d(t,{Z:()=>y});var i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("../node_modules/react/index.js"),o=s("../node_modules/moment/moment.js"),n=s.n(o),a=s("./app/components/avatar/avatarList.tsx"),l=s("./app/components/tooltip.tsx"),d=s("./app/icons/index.tsx"),p=s("./app/locale.tsx"),c=s("./app/stores/configStore.tsx"),u=s("./app/utils/formatters.tsx"),h=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const g=e=>{let{avatarSize:t=28,seenBy:s=[],iconTooltip:i=(0,p.t)("People who have viewed this"),maxVisibleAvatars:o=10,iconPosition:g="left",className:y}=e;const Z=c.Z.get("user"),b=s.filter((e=>Z.id!==e.id));return 0===b.length?null:(0,h.BX)(m,{iconPosition:g,className:y,children:[(0,h.tZ)(a.Z,{users:b,avatarSize:t,maxVisibleAvatars:o,renderTooltip:e=>(0,h.BX)(r.Fragment,{children:[(0,u.He)(e),(0,h.tZ)("br",{}),n()(e.lastSeen).format("LL")]})}),(0,h.tZ)(v,{iconPosition:g,children:(0,h.tZ)(l.Z,{title:i,skipWrapper:!0,children:(0,h.tZ)(d.fn,{size:"sm",color:"subText"})})})]})};g.displayName="SeenByList";const m=(0,i.Z)("div",{target:"e1ayiung1"})("display:flex;",(e=>"left"===e.iconPosition?"flex-direction: row-reverse":""),";"),v=(0,i.Z)("div",{target:"e1ayiung0"})("display:flex;align-items:center;background-color:transparent;color:",(e=>e.theme.textColor),";height:28px;width:24px;text-align:center;",(e=>"left"===e.iconPosition?"margin-right: 10px":""),";"),y=g},"./app/stores/organizationEnvironmentsStore.tsx":(e,t,s)=>{s.d(t,{Z:()=>n});var i=s("../node_modules/reflux/src/index.js"),r=s("./app/utils/environment.tsx");const o={state:{environments:null,error:null},init(){this.state={environments:null,error:null}},makeEnvironment:e=>({id:e.id,name:e.name,get displayName(){return(0,r.G)(e)},get urlRoutingName(){return(0,r.z)(e)}}),onFetchEnvironments(){this.state={environments:null,error:null},this.trigger(this.state)},onFetchEnvironmentsSuccess(e){this.state={error:null,environments:e.map(this.makeEnvironment)},this.trigger(this.state)},onFetchEnvironmentsError(e){this.state={error:e,environments:null},this.trigger(this.state)},getState(){return this.state}},n=(0,i.createStore)(o)},"./app/utils/displayReprocessEventAction.tsx":(e,t,s)=>{s.d(t,{B:()=>n}),s("../node_modules/core-js/modules/es.array.includes.js");var i=s("./app/types/index.tsx");const r=["cocoa","native"];function o(e){const t=e?.frames??[],s=e?.stacktrace?.frames??[];return t.length||s.length?[...t,...s].map((e=>e.platform)).filter((e=>!!e)):[]}function n(e,t){if(!t||!e.includes("reprocessing-v2"))return!1;const{entries:s}=t,n=s.find((e=>e.type===i.UZ.EXCEPTION));return!!n&&!!(function(e){const{data:t}=e;return(t.values??[]).some((e=>"minidump"===e.mechanism?.type))}(n)||function(e){const{data:t}=e;return(t.values??[]).some((e=>"applecrashreport"===e.mechanism?.type))}(n)||function(e,t){const{platform:s}=e;if(s&&r.includes(s))return!0;const n=function(e,t){const s=(t.data.values??[]).flatMap(o),r=e.entries.find((e=>e.type===i.UZ.STACKTRACE))?.data??{},n=Object.keys(r).flatMap((e=>o(r[e]))),a=(e.entries.find((e=>e.type===i.UZ.THREADS))?.data.values??[]).flatMap((e=>{let{stacktrace:t}=e;return o(t)}));return new Set([...s,...n,...a])}(e,t);return r.some((e=>n.has(e)))}(t,n))}},"./app/utils/environment.tsx":(e,t,s)=>{function i(e){return e.name?encodeURIComponent(e.name):e.displayName?encodeURIComponent(e.displayName):"none"}function r(e){return e.name||e.displayName||"(No Environment)"}s.d(t,{G:()=>r,z:()=>i})},"./app/views/organizationGroupDetails/index.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>wt});var i=s("../node_modules/react/index.js"),r=s("./app/actionCreators/indicator.tsx"),o=s("./app/locale.tsx"),n=s("./app/stores/projectsStore.tsx"),a=s("./app/utils/handleXhrErrorResponse.tsx"),l=s("./app/utils/analytics.tsx"),d=s("./app/utils/useApi.tsx"),p=s("./app/utils/useOrganization.tsx"),c=s("./app/utils/useProjects.tsx"),u=s("./app/utils/withPageFilters.tsx"),h=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),g=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),m=(s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/core-js/modules/es.error.cause.js"),s("../node_modules/react-router/es/index.js")),v=s("../node_modules/@sentry/browser/node_modules/@sentry/core/esm/exports.js"),y=s("../node_modules/@sentry/react/esm/profiler.js"),Z=s("../node_modules/prop-types/index.js"),b=s("./app/stores/organizationEnvironmentsStore.tsx"),f=s("./app/components/loadingError.tsx"),x=s("./app/components/loadingIndicator.tsx"),S=s("./app/components/organizations/pageFilters/container.tsx"),E=s("./app/components/projects/missingProjectMembership.tsx"),I=s("./app/components/sentryDocumentTitle.tsx"),_=s("./app/components/tabs/index.tsx"),k=s("./app/sentryTypes.tsx"),w=s("./app/stores/groupStore.tsx"),R=s("./app/styles/space.tsx"),A=s("./app/types/index.tsx"),T=s("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),j=s("./app/utils/dates.tsx"),C=s("./app/utils/discover/eventView.tsx"),D=s("./app/utils/discover/genericDiscoverQuery.tsx"),z=s("./app/utils/events.tsx"),N=s("../node_modules/moment/moment.js"),O=s.n(N);function B(e){const t=O()(e).utc().startOf("day");return O()().utc().startOf("day").diff(t,"days")}var $=s("./app/utils/projects.tsx"),P=s("./app/utils/recreateRoute.tsx"),U=s("./app/utils/routeAnalytics/withRouteAnalytics.tsx"),G=s("./app/utils/withApi.tsx");const q="GROUP_NOT_FOUND",M="MISSING_MEMBERSHIP";var F=s("../node_modules/lodash/omit.js"),L=s.n(F),X=s("./app/actionCreators/members.tsx"),V=s("./app/components/assigneeSelector.tsx"),Y=s("./app/components/assistant/guideAnchor.tsx"),H=s("./app/components/badge.tsx"),K=s("./app/components/breadcrumbs.tsx"),Q=s("./app/components/count.tsx"),W=s("./app/components/environmentPageFilter.tsx"),J=s("./app/components/eventOrGroupTitle.tsx"),ee=s("./app/components/events/errorLevel.tsx"),te=s("./app/components/events/eventAnnotation.tsx"),se=s("./app/components/events/eventMessage.tsx"),ie=s("./app/components/group/inboxBadges/inboxReason.tsx"),re=s("./app/components/group/inboxBadges/unhandledTag.tsx"),oe=s("./app/components/idBadge/projectBadge.tsx"),ne=s("./app/components/layouts/thirds.tsx"),ae=s("./app/components/links/link.tsx"),le=s("./app/components/replays/replaysFeatureBadge.tsx"),de=s("./app/components/seenByList.tsx"),pe=s("./app/components/shortId.tsx"),ce=s("./app/components/tooltip.tsx"),ue=s("./app/icons/index.tsx"),he=s("./app/utils/replays/projectSupportsReplay.tsx"),ge=s("./app/utils/useLocation.tsx"),me=s("./app/actionCreators/group.tsx"),ve=s("./app/actionCreators/modal.tsx"),ye=s("./app/components/acl/feature.tsx"),Ze=s("./app/components/acl/featureDisabled.tsx"),be=s("./app/components/actions/button.tsx"),fe=s("./app/components/actions/ignore.tsx"),xe=s("./app/components/actions/resolve.tsx"),Se=s("./app/components/button.tsx"),Ee=s("./app/components/dropdownMenuControl.tsx"),Ie=s("./app/utils/displayReprocessEventAction.tsx"),_e=s("./app/utils/groupCapabilities.tsx"),ke=s("./app/utils/guid.tsx"),we=s("./app/utils/withOrganization.tsx"),Re=s("./app/views/issueList/actions/reviewAction.tsx"),Ae=s("./app/components/autoSelectText.tsx"),Te=s("./app/components/switchButton.tsx"),je=s("./app/stores/useLegacyStore.tsx"),Ce=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function De(e){let{Header:t,Body:s,Footer:n,organization:a,projectSlug:l,groupId:p,onToggle:c}=e;const u=(0,d.Z)({persistInFlight:!0}),[h,g]=(0,i.useState)(!1),m=(0,i.useRef)(null),v=(0,je.X)(w.Z).find((e=>e.id===p)),y=v?.isPublic,Z=(0,i.useCallback)(((e,t)=>{e?.preventDefault(),g(!0),c(),(0,me.Gv)(u,{orgId:a.slug,projectId:l,itemIds:[p],data:{isPublic:t??!y}},{error:()=>{(0,r.Iw)((0,o.t)("Error sharing"))},complete:()=>{g(!1)}})}),[u,g,c,y,a.slug,l,p]);(0,i.useEffect)((()=>{y||Z(null,!0)}),[]);const b=v?.shareId?function(){const e=`/share/issue/${v.shareId}/`,{host:t,protocol:s}=window.location;return`${s}//${t}${e}`}():null;return(0,Ce.BX)(i.Fragment,{children:[(0,Ce.tZ)(t,{closeButton:!0,children:(0,Ce.tZ)("h4",{children:(0,o.t)("Share Issue")})}),(0,Ce.tZ)(s,{children:(0,Ce.BX)(Ne,{children:[(0,Ce.BX)(Oe,{children:[(0,Ce.BX)("div",{children:[(0,Ce.tZ)(Be,{children:(0,o.t)("Create a public link")}),(0,Ce.tZ)($e,{children:(0,o.t)("Share a link with anyone outside your organization")})]}),(0,Ce.tZ)(Te.Z,{"aria-label":y?(0,o.t)("Unshare"):(0,o.t)("Share"),isActive:y,size:"lg",toggle:Z})]}),(!v||h)&&(0,Ce.tZ)(Pe,{children:(0,Ce.tZ)(x.Z,{mini:!0})}),v&&!h&&y&&b&&(0,Ce.BX)(Ue,{children:[(0,Ce.tZ)(qe,{children:(0,Ce.tZ)(Ge,{ref:m,children:b})}),(0,Ce.tZ)(Me,{title:(0,o.t)("Copy to clipboard"),borderless:!0,size:"sm",onClick:()=>{navigator.clipboard.writeText(b),m.current?.selectText()},icon:(0,Ce.tZ)(ue.vU,{}),"aria-label":(0,o.t)("Copy to clipboard")}),(0,Ce.tZ)(Fe,{title:(0,o.t)("Generate new URL. Invalidates previous URL"),"aria-label":(0,o.t)("Generate new URL"),borderless:!0,size:"sm",icon:(0,Ce.tZ)(ue.tr,{}),onClick:()=>Z(null,!0)})]})]})}),(0,Ce.tZ)(n,{children:!h&&y&&b?(0,Ce.tZ)(Se.ZP,{type:"button",priority:"primary",onClick:()=>{navigator.clipboard.writeText(b),(0,ve.closeModal)()},children:(0,o.t)("Copy Link")}):(0,Ce.tZ)(Se.ZP,{type:"button",priority:"primary",onClick:()=>{(0,ve.closeModal)()},children:(0,o.t)("Close")})})]})}De.displayName="ShareIssueModal";const ze=De,Ne=(0,g.Z)("div",{target:"e1nhf9vk9"})("display:flex;gap:",(0,R.Z)(2),";flex-direction:column;min-height:100px;"),Oe=(0,g.Z)("div",{target:"e1nhf9vk8"})("display:flex;justify-content:space-between;align-items:center;gap:",(0,R.Z)(2),";"),Be=(0,g.Z)("div",{target:"e1nhf9vk7"})("padding-right:",(0,R.Z)(4),";white-space:nowrap;"),$e=(0,g.Z)("p",{target:"e1nhf9vk6"})("color:",(e=>e.theme.subText),";font-size:",(e=>e.theme.fontSizeSmall),";"),Pe=(0,g.Z)("div",{target:"e1nhf9vk5"})({name:"zl1inp",styles:"display:flex;justify-content:center"}),Ue=(0,g.Z)("div",{target:"e1nhf9vk4"})("display:flex;align-items:stretch;border:1px solid ",(e=>e.theme.border),";border-radius:",(0,R.Z)(.5),";"),Ge=(0,g.Z)(Ae.Z,{target:"e1nhf9vk3"})("padding:",(0,R.Z)(1)," ",(0,R.Z)(1),";",(e=>e.theme.overflowEllipsis),";"),qe=(0,g.Z)("div",{target:"e1nhf9vk2"})("position:relative;display:flex;flex-grow:1;background-color:transparent;border-right:1px solid ",(e=>e.theme.border),";min-width:0;"),Me=(0,g.Z)(Se.ZP,{target:"e1nhf9vk1"})("border-radius:0;border-right:1px solid ",(e=>e.theme.border),";height:100%;flex-shrink:0;&:hover{border-right:1px solid ",(e=>e.theme.border),";}"),Fe=(0,g.Z)(Se.ZP,{target:"e1nhf9vk0"})({name:"vdwx3d",styles:"height:100%;flex-shrink:0"});function Le(e){let{onToggle:t,disabled:s,group:i,organization:r,disabledReason:n}=e;return(0,Ce.tZ)(ce.Z,{title:n,disabled:!s,children:(0,Ce.tZ)(Se.ZP,{type:"button",size:"xs",onClick:()=>{(0,ve.openModal)((e=>(0,Ce.tZ)(ze,{...e,organization:r,projectSlug:i.project.slug,groupId:i.id,onToggle:t})))},disabled:s,icon:(0,Ce.tZ)(Ve,{"aria-label":i.isPublic?(0,o.t)("Shared"):(0,o.t)("Not Shared"),isShared:i.isPublic}),children:(0,o.t)("Share")})})}Le.displayName="ShareIssue";const Xe=Le,Ve=(0,g.Z)("div",{target:"e1td2f060"})("border-radius:50%;width:10px;height:10px;background:",(e=>e.isShared?e.theme.active:e.theme.border),";");var Ye=s("./app/views/organizationGroupDetails/utils.tsx");function He(e){let{className:t,disabled:s,group:i,icon:r,onClick:n,disablePriority:a,size:l="xs"}=e;const d=i.subscriptionDetails?.disabled??!1;return(0,Ce.tZ)(be.Z,{className:t,disabled:s||d,title:(0,Ye.sC)(i,!0),tooltipProps:{delay:300},priority:!a&&i.isSubscribed?"primary":"default",size:l,"aria-label":(0,o.t)("Subscribe"),onClick:n,icon:r??(0,Ce.tZ)(ue.lJ,{size:l})})}He.displayName="SubscribeAction";const Ke=He;class Qe extends i.Component{constructor(){super(...arguments),(0,h.Z)(this,"onDelete",(()=>{const{group:e,project:t,organization:s,api:i}=this.props;(0,r.E3)((0,o.t)("Delete event…")),(0,me.MU)(i,{orgId:s.slug,projectId:t.slug,itemIds:[e.id]},{complete:()=>{(0,r.B8)(),m.browserHistory.push(`/${s.slug}/${t.slug}/`)}}),this.trackIssueAction("deleted")})),(0,h.Z)(this,"onUpdate",(e=>{const{group:t,project:s,organization:i,api:n}=this.props;(0,r.E3)((0,o.t)("Saving changes…")),(0,me.Gv)(n,{orgId:i.slug,projectId:s.slug,itemIds:[t.id],data:e},{complete:r.B8}),e.status&&this.trackIssueAction(e.status),void 0!==e.inbox&&this.trackIssueAction("mark_reviewed")})),(0,h.Z)(this,"onReprocessEvent",(()=>{const{group:e,organization:t}=this.props;(0,ve.openReprocessEventModal)({organization:t,groupId:e.id})})),(0,h.Z)(this,"onToggleShare",(()=>{!this.props.group.isPublic&&(0,T.Z)("issue.shared_publicly",{organization:this.props.organization}),this.trackIssueAction("shared")})),(0,h.Z)(this,"onToggleBookmark",(()=>{this.onUpdate({isBookmarked:!this.props.group.isBookmarked}),this.trackIssueAction("bookmarked")})),(0,h.Z)(this,"onToggleSubscribe",(()=>{this.onUpdate({isSubscribed:!this.props.group.isSubscribed}),this.trackIssueAction("subscribed")})),(0,h.Z)(this,"onDiscard",(()=>{const{group:e,project:t,organization:s,api:i}=this.props,n=(0,ke.E)();(0,r.E3)((0,o.t)("Discarding event…")),w.Z.onDiscard(n,e.id),i.request(`/issues/${e.id}/`,{method:"PUT",data:{discard:!0},success:i=>{w.Z.onDiscardSuccess(n,e.id,i),m.browserHistory.push(`/${s.slug}/${t.slug}/`)},error:t=>{w.Z.onDiscardError(n,e.id,t)},complete:r.B8}),this.trackIssueAction("discarded")})),(0,h.Z)(this,"renderDiscardModal",(e=>{let{Body:t,Footer:s,closeModal:r}=e;const{organization:n,project:a}=this.props;return(0,Ce.tZ)(ye.Z,{features:["projects:discard-groups"],hookName:"feature-disabled:discard-groups",organization:n,project:a,renderDisabled:function(e){let{children:t,...s}=e;return t({...s,renderDisabled:e=>{let{features:t}=e;return(0,Ce.tZ)(Ze.Z,{alert:!0,featureName:(0,o.t)("Discard and Delete"),features:t})}})},children:e=>{let{hasFeature:n,renderDisabled:a,...l}=e;return(0,Ce.BX)(i.Fragment,{children:[(0,Ce.BX)(t,{children:[!n&&"function"==typeof a&&a({...l,hasFeature:n,children:null}),(0,o.t)("Discarding this event will result in the deletion of most data associated with this issue and future events being discarded before reaching your stream. Are you sure you wish to continue?")]}),(0,Ce.BX)(s,{children:[(0,Ce.tZ)(Se.ZP,{onClick:r,children:(0,o.t)("Cancel")}),(0,Ce.tZ)(Se.ZP,{style:{marginLeft:(0,R.Z)(1)},priority:"primary",onClick:this.onDiscard,disabled:!n,children:(0,o.t)("Discard Future Events")})]})]})}})})),(0,h.Z)(this,"openDeleteModal",(()=>(0,ve.openModal)((e=>{let{Body:t,Footer:s,closeModal:r}=e;return(0,Ce.BX)(i.Fragment,{children:[(0,Ce.tZ)(t,{children:(0,o.t)("Deleting this issue is permanent. Are you sure you wish to continue?")}),(0,Ce.BX)(s,{children:[(0,Ce.tZ)(Se.ZP,{onClick:r,children:(0,o.t)("Cancel")}),(0,Ce.tZ)(Se.ZP,{style:{marginLeft:(0,R.Z)(1)},priority:"primary",onClick:this.onDelete,children:(0,o.t)("Delete")})]})]})})))),(0,h.Z)(this,"openDiscardModal",(()=>{const{organization:e}=this.props;(0,ve.openModal)(this.renderDiscardModal),(0,l.co)("feature.discard_group.modal_opened",{org_id:parseInt(e.id,10)})})),(0,h.Z)(this,"openShareModal",(()=>{const{group:e,organization:t}=this.props;(0,ve.openModal)((s=>(0,Ce.tZ)(ze,{...s,organization:t,projectSlug:e.project.slug,groupId:e.id,onToggle:this.onToggleShare})))}))}getShareUrl(e){if(!e)return"";const t=`/share/issue/${e}/`,{host:s,protocol:i}=window.location;return`${i}//${s}${t}`}getDiscoverUrl(){const{group:e,project:t,organization:s}=this.props,{title:i,type:r,shortId:o}=e,n={id:void 0,name:i||r,fields:["title","release","environment","user.display","timestamp"],orderby:"-timestamp",query:`issue:${o}`,projects:[Number(t.id)],version:2,range:"90d"};return C.ZP.fromSavedQuery(n).getResultsViewUrlTarget(s.slug)}trackIssueAction(e){const{group:t,project:s,organization:i,query:r={}}=this.props,{alert_date:o,alert_rule_id:n,alert_type:a}=r;(0,T.Z)("issue_details.action_clicked",{organization:i,project_id:parseInt(s.id,10),group_id:parseInt(t.id,10),issue_category:t.issueCategory,action_type:e,alert_date:"string"==typeof o?(0,j.v5)(Number(o)):void 0,alert_rule_id:"string"==typeof n?n:void 0,alert_type:"string"==typeof a?a:void 0})}handleClick(e,t){return function(s){if(e)return s.preventDefault(),void s.stopPropagation();t(s)}}render(){const{group:e,project:t,organization:s,disabled:r,event:n}=this.props,{status:a,isBookmarked:l}=e,d=new Set(s.features),p=l?"unbookmark":"bookmark",c=l?(0,o.t)("Remove bookmark"):(0,o.t)("Bookmark"),u=!!t.features?.includes("releases"),h="resolved"===a,g="resolved"===e.status?e.statusDetails.autoResolved:void 0,m="ignored"===a,v=(0,_e.t)(e.issueCategory,"delete"),y=(0,_e.t)(e.issueCategory,"deleteAndDiscard"),Z=(0,_e.t)(e.issueCategory,"share"),b=s.access.includes("event:admin"),f=[{key:p,label:c,onAction:this.onToggleBookmark},{key:"reprocess",label:(0,o.t)("Reprocess events"),hidden:!(0,Ie.B)(s.features,n),onAction:this.onReprocessEvent},{key:"delete-issue",priority:"danger",label:(0,o.t)("Delete"),hidden:!b,disabled:!v.enabled,details:v.disabledReason,onAction:this.openDeleteModal},{key:"delete-and-discard",priority:"danger",label:(0,o.t)("Delete and discard future events"),hidden:!b,disabled:!y.enabled,details:y.disabledReason,onAction:this.openDiscardModal}];if(d.has("issue-actions-v2")){const{dropdownItems:n,onIgnore:a}=(0,fe.c)({onUpdate:this.onUpdate});return(0,Ce.BX)(Je,{children:[(0,Ce.tZ)(Ee.Z,{triggerProps:{"aria-label":(0,o.t)("More Actions"),icon:(0,Ce.tZ)(ue.YR,{size:"xs"}),showChevron:!1,size:"sm"},items:[...m?[]:[{key:"ignore",className:"hidden-sm hidden-md hidden-lg",label:(0,o.t)("Ignore"),isSubmenu:!0,disabled:r,children:[{key:"ignore-now",label:(0,o.t)("Ignore Issue"),onAction:()=>a()},...n]}],{key:"open-in-discover",className:"hidden-sm hidden-md hidden-lg",label:(0,o.t)("Open in Discover"),to:r?"":this.getDiscoverUrl(),onAction:()=>this.trackIssueAction("open_in_discover")},{key:e.isSubscribed?"unsubscribe":"subscribe",className:"hidden-sm hidden-md hidden-lg",label:e.isSubscribed?(0,o.t)("Unsubscribe"):(0,o.t)("Subscribe"),disabled:r||e.subscriptionDetails?.disabled,onAction:this.onToggleSubscribe},{key:"mark-review",label:(0,o.t)("Mark reviewed"),disabled:!e.inbox||r,details:!e.inbox||r?(0,o.t)("Issue has been reviewed"):void 0,onAction:()=>this.onUpdate({inbox:!1})},{key:"share",label:(0,o.t)("Share"),disabled:r||!Z.enabled,hidden:!d.has("shared-issues"),onAction:this.openShareModal},...f]}),(0,Ce.tZ)(Ke,{className:"hidden-xs",disabled:r,disablePriority:!0,group:e,onClick:this.handleClick(r,this.onToggleSubscribe),icon:e.isSubscribed?(0,Ce.tZ)(ue.lJ,{}):(0,Ce.tZ)(ue.mA,{}),size:"sm"}),(0,Ce.tZ)("div",{className:"hidden-xs",children:(0,Ce.tZ)(W.Z,{alignDropdown:"right",size:"sm"})}),(0,Ce.tZ)(ye.Z,{hookName:"feature-disabled:open-in-discover",features:["discover-basic"],organization:s,children:(0,Ce.tZ)(be.Z,{className:"hidden-xs",disabled:r,to:r?"":this.getDiscoverUrl(),onClick:()=>this.trackIssueAction("open_in_discover"),size:"sm",children:(0,Ce.tZ)(Y.Z,{target:"open_in_discover",children:(0,o.t)("Open in Discover")})})}),h||m?(0,Ce.tZ)(be.Z,{type:"button",priority:"primary",title:g?(0,o.t)("This event is resolved due to the Auto Resolve configuration for this project"):(0,o.t)("Change status to unresolved"),size:"sm",icon:h?(0,Ce.tZ)(ue.DL,{}):(0,Ce.tZ)(ue.i1,{}),disabled:r||g,onClick:()=>this.onUpdate({status:A.d7.UNRESOLVED,statusDetails:{}}),children:m?(0,o.t)("Ignored"):(0,o.t)("Resolved")}):(0,Ce.BX)(i.Fragment,{children:[(0,Ce.tZ)(Y.Z,{target:"ignore_delete_discard",position:"bottom",offset:20,children:(0,Ce.tZ)(fe.Z,{className:"hidden-xs",isIgnored:m,onUpdate:this.onUpdate,disabled:r,size:"sm",hideIcon:!0,disableTooltip:!0})}),(0,Ce.tZ)(Y.Z,{target:"resolve",position:"bottom",offset:20,children:(0,Ce.tZ)(xe.Z,{disableTooltip:!0,disabled:r,disableDropdown:r,hasRelease:u,latestRelease:t.latestRelease,onUpdate:this.onUpdate,orgSlug:s.slug,projectSlug:t.slug,isResolved:h,isAutoResolved:g,size:"sm",hideIcon:!0,priority:"primary"})})]})]})}return(0,Ce.BX)(We,{children:[(0,Ce.tZ)(Y.Z,{target:"resolve",position:"bottom",offset:20,children:(0,Ce.tZ)(xe.Z,{disabled:r,disableDropdown:r,hasRelease:u,latestRelease:t.latestRelease,onUpdate:this.onUpdate,orgSlug:s.slug,projectSlug:t.slug,isResolved:h,isAutoResolved:"resolved"===e.status?e.statusDetails.autoResolved:void 0})}),(0,Ce.tZ)(Y.Z,{target:"ignore_delete_discard",position:"bottom",offset:20,children:(0,Ce.tZ)(fe.Z,{isIgnored:m,onUpdate:this.onUpdate,disabled:r})}),(0,Ce.tZ)(Re.Z,{onUpdate:this.onUpdate,disabled:!e.inbox||r,tooltip:(0,o.t)("Issue has been reviewed"),tooltipProps:{disabled:!!e.inbox||r,delay:300}}),(0,Ce.tZ)(ye.Z,{hookName:"feature-disabled:open-in-discover",features:["discover-basic"],organization:s,children:(0,Ce.tZ)(be.Z,{disabled:r,to:r?"":this.getDiscoverUrl(),onClick:()=>this.trackIssueAction("open_in_discover"),children:(0,Ce.tZ)(Y.Z,{target:"open_in_discover",children:(0,o.t)("Open in Discover")})})}),d.has("shared-issues")&&(0,Ce.tZ)(Xe,{organization:s,group:e,disabled:r||!Z.enabled,disabledReason:Z.disabledReason,onToggle:this.onToggleShare}),(0,Ce.tZ)(Ke,{disabled:r,group:e,onClick:this.handleClick(r,this.onToggleSubscribe)}),(0,Ce.tZ)(Ee.Z,{triggerProps:{"aria-label":(0,o.t)("More Actions"),icon:(0,Ce.tZ)(ue.YR,{size:"xs"}),showChevron:!1,size:"xs"},items:f})]})}}Qe.displayName="Actions";const We=(0,g.Z)("div",{target:"e1sp93pk1"})("display:flex;flex-wrap:wrap;justify-content:flex-start;align-items:center;grid-auto-flow:column;gap:",(0,R.Z)(.5),";white-space:nowrap;"),Je=(0,g.Z)("div",{target:"e1sp93pk0"})("display:flex;align-items:center;gap:",(0,R.Z)(.5),";"),et=(0,G.Z)((0,we.Z)(Qe));var tt=s("./app/views/organizationGroupDetails/types.tsx"),st=s("./app/views/organizationGroupDetails/unhandledTag.tsx");function it(e){let{baseUrl:t,group:s,groupReprocessingStatus:r,organization:n,replaysCount:a,event:l,project:p}=e;const c=(0,ge.T)(),u=(0,i.useCallback)(((e,t,i)=>{const{alert_date:r,alert_rule_id:o,alert_type:a}=c.query;(0,T.Z)("issue_details.action_clicked",{organization:n,project_id:parseInt(p.id,10),group_id:parseInt(s.id,10),issue_category:s.issueCategory,action_type:"assign",assigned_suggestion_reason:i?.suggestedReason,alert_date:"string"==typeof r?(0,j.v5)(Number(r)):void 0,alert_rule_id:"string"==typeof o?o:void 0,alert_type:"string"==typeof a?a:void 0})}),[s.id,s.issueCategory,p.id,n,c.query]),h=(0,i.useMemo)((()=>n.features.includes("reprocessing-v2")?r===Ye.m7.REPROCESSING?[tt.O.ACTIVITY,tt.O.USER_FEEDBACK,tt.O.ATTACHMENTS,tt.O.EVENTS,tt.O.MERGED,tt.O.GROUPING,tt.O.SIMILAR_ISSUES,tt.O.TAGS]:r===Ye.m7.REPROCESSED_AND_HASNT_EVENT?[tt.O.DETAILS,tt.O.ATTACHMENTS,tt.O.EVENTS,tt.O.MERGED,tt.O.GROUPING,tt.O.SIMILAR_ISSUES,tt.O.TAGS,tt.O.USER_FEEDBACK]:[]:[]),[n,r]),g=(0,i.useMemo)((()=>{const e=L()(c.query,"query");return{pathname:`${t}events/`,query:e}}),[c,t]),m=(0,i.useMemo)((()=>{const e=new Set(p?p.features:[]),i=new Set(n?n.features:[]),r=i.has("grouping-tree-ui"),l=e.has("similarity-view"),d=i.has("event-attachments"),u=i.has("session-replay-ui")&&(0,he.Z)(p);return(0,Ce.BX)(vt,{hideBorder:!0,children:[(0,Ce.tZ)(_.ck,{disabled:h.includes(tt.O.DETAILS),to:`${t}${c.search}`,children:(0,o.t)("Details")},tt.O.DETAILS),(0,Ce.BX)(_.ck,{textValue:(0,o.t)("Activity"),disabled:h.includes(tt.O.ACTIVITY),to:`${t}activity/${c.search}`,children:[(0,o.t)("Activity"),(0,Ce.BX)(mt,{children:[s.numComments,(0,Ce.tZ)(ue.f7,{size:"xs"})]})]},tt.O.ACTIVITY),(0,Ce.BX)(_.ck,{textValue:(0,o.t)("User Feedback"),disabled:h.includes(tt.O.USER_FEEDBACK),to:`${t}feedback/${c.search}`,children:[(0,o.t)("User Feedback")," ",(0,Ce.tZ)(H.Z,{text:s.userReportCount})]},tt.O.USER_FEEDBACK),(0,Ce.tZ)(_.ck,{hidden:!d,disabled:h.includes(tt.O.ATTACHMENTS),to:`${t}attachments/${c.search}`,children:(0,o.t)("Attachments")},tt.O.ATTACHMENTS),(0,Ce.tZ)(_.ck,{disabled:h.includes(tt.O.TAGS),to:`${t}tags/${c.search}`,children:(0,o.t)("Tags")},tt.O.TAGS),(0,Ce.tZ)(_.ck,{disabled:h.includes(tt.O.EVENTS),to:g,children:(0,o.t)("All Events")},tt.O.EVENTS),(0,Ce.tZ)(_.ck,{disabled:h.includes(tt.O.MERGED),to:`${t}merged/${c.search}`,children:(0,o.t)("Merged Issues")},tt.O.MERGED),(0,Ce.tZ)(_.ck,{hidden:!r,disabled:h.includes(tt.O.GROUPING),to:`${t}grouping/${c.search}`,children:(0,o.t)("Grouping")},tt.O.GROUPING),(0,Ce.tZ)(_.ck,{hidden:!l,disabled:h.includes(tt.O.SIMILAR_ISSUES),to:`${t}similar/${c.search}`,children:(0,o.t)("Similar Issues")},tt.O.SIMILAR_ISSUES),(0,Ce.BX)(_.ck,{textValue:(0,o.t)("Replays"),hidden:!u,to:`${t}replays/${c.search}`,children:[(0,o.t)("Replays")," ",void 0!==a?(0,Ce.tZ)(H.Z,{text:a}):null,(0,Ce.tZ)(le.Z,{noTooltip:!0})]},tt.O.REPLAYS)]})}),[t,c,h,s.numComments,s.userReportCount,n,p,a,g]),v=(0,i.useMemo)((()=>(0,Ce.BX)(vt,{hideBorder:!0,children:[(0,Ce.tZ)(_.ck,{disabled:h.includes(tt.O.DETAILS),to:`${t}${c.search}`,children:(0,o.t)("Details")},tt.O.DETAILS),(0,Ce.BX)(_.ck,{textValue:(0,o.t)("Activity"),disabled:h.includes(tt.O.ACTIVITY),to:`${t}activity/${c.search}`,children:[(0,o.t)("Activity"),(0,Ce.BX)(mt,{children:[s.numComments,(0,Ce.tZ)(ue.f7,{size:"xs"})]})]},tt.O.ACTIVITY),(0,Ce.tZ)(_.ck,{disabled:h.includes(tt.O.TAGS),to:`${t}tags/${c.search}`,children:(0,o.t)("Tags")},tt.O.TAGS),(0,Ce.tZ)(_.ck,{disabled:h.includes(tt.O.EVENTS),to:g,children:(0,o.t)("Events")},tt.O.EVENTS)]})),[h,s.numComments,t,c,g]),y=function(e){let{group:t,organization:s}=e;const{project:r}=t,o=(0,d.Z)(),[n,a]=(0,i.useState)(),l=s.features.includes("issue-details-owners"),p=(0,i.useCallback)((async()=>{if(l)return;const e=await(0,X.MA)(o,s.slug,[r.id]);a(e.map((e=>e.user)))}),[o,s.slug,r,l]);return(0,i.useEffect)((()=>{p()}),[p]),n}({group:s,organization:n}),Z=n.features.includes("issue-details-owners"),{userCount:b}=s;let f="group-detail";s.hasSeen&&(f+=" hasSeen"),"resolved"===s.status&&(f+=" isResolved");const x=(0,z.FC)(s),S=!!h.length,E=s.shortId&&(0,Ce.tZ)(Y.Z,{target:"issue_number",position:"bottom",children:(0,Ce.BX)(nt,{children:[(0,Ce.tZ)(oe.Z,{project:p,avatarSize:16,hideName:!0,avatarProps:{hasTooltip:!0,tooltip:p.slug}}),(0,Ce.tZ)(ce.Z,{className:"help-link",title:(0,o.t)("This identifier is unique across your organization, and can be used to reference an issue in various places, like commit messages."),position:"bottom",children:(0,Ce.tZ)(at,{shortId:s.shortId})})]})}),I=n.features.includes("issue-actions-v2");return(0,Ce.tZ)(ne.h4,{children:(0,Ce.BX)("div",{className:f,children:[(0,Ce.BX)(ot,{children:[(0,Ce.tZ)(K.Z,{crumbs:[{label:"Issues",to:`/organizations/${n.slug}/issues/${c.search}`},{label:E}]}),I&&(0,Ce.tZ)(et,{group:s,project:p,disabled:S,event:l,query:c.query})]}),(0,Ce.BX)(lt,{children:[(0,Ce.BX)(dt,{children:[(0,Ce.BX)(pt,{children:[(0,Ce.tZ)("h3",{children:(0,Ce.tZ)(ut,{hasGuideAnchor:!0,data:s})}),s.inbox&&(0,Ce.tZ)(ie.Z,{inbox:s.inbox,fontSize:"md"})]}),(0,Ce.BX)(gt,{children:[s.level&&(0,Ce.tZ)(ee.Z,{level:s.level,size:"11px"}),s.isUnhandled&&(0,Ce.tZ)(re.Z,{}),(0,Ce.tZ)(se.Z,{message:x,annotations:s.logger&&(0,Ce.tZ)(te.Z,{children:(0,Ce.tZ)(ae.Z,{to:{pathname:`/organizations/${n.slug}/issues/`,query:{query:"logger:"+s.logger}},children:s.logger})})})]})]}),(0,Ce.BX)(ht,{numItems:Z?"2":"3",children:[(0,Ce.BX)("div",{className:"count",children:[(0,Ce.tZ)("h6",{className:"nav-header",children:(0,o.t)("Events")}),(0,Ce.tZ)(ae.Z,{disabled:S,to:g,children:(0,Ce.tZ)(Q.Z,{className:"count",value:s.count})})]}),(0,Ce.BX)("div",{className:"count",children:[(0,Ce.tZ)("h6",{className:"nav-header",children:(0,o.t)("Users")}),0!==b?(0,Ce.tZ)(ae.Z,{disabled:S,to:`${t}tags/user/${c.search}`,children:(0,Ce.tZ)(Q.Z,{className:"count",value:b})}):(0,Ce.tZ)("span",{children:"0"})]}),!Z&&(0,Ce.BX)("div",{"data-test-id":"assigned-to",children:[(0,Ce.tZ)("h6",{className:"nav-header",children:(0,o.t)("Assignee")}),(0,Ce.tZ)(V.Z,{id:s.id,memberList:y,disabled:S,onAssign:u})]})]})]}),I?(0,Ce.tZ)(lt,{className:"hidden-sm hidden-md hidden-lg",children:(0,Ce.tZ)(W.Z,{alignDropdown:"right"})}):(0,Ce.BX)(lt,{children:[(0,Ce.tZ)(et,{group:s,project:p,disabled:S,event:l,query:c.query}),(0,Ce.tZ)(ct,{seenBy:s.seenBy,iconTooltip:(0,o.t)("People who have viewed this issue")})]}),s.issueCategory===A.qE.PERFORMANCE?v:m]})})}it.displayName="GroupHeader";const rt=it,ot=(0,g.Z)("div",{target:"e1ptdvq011"})("display:flex;flex-direction:row;justify-content:space-between;gap:",(0,R.Z)(1),";align-items:center;"),nt=(0,g.Z)("div",{target:"e1ptdvq010"})("display:flex;gap:",(0,R.Z)(1),";align-items:center;"),at=(0,g.Z)(pe.Z,{target:"e1ptdvq09"})("font-family:",(e=>e.theme.text.family),";font-size:",(e=>e.theme.fontSizeMedium),";"),lt=(0,g.Z)("div",{target:"e1ptdvq08"})("display:flex;gap:",(0,R.Z)(2),";justify-content:space-between;margin-top:",(0,R.Z)(2),";@media (max-width: ",(e=>e.theme.breakpoints.small),"){flex-direction:column;}"),dt=(0,g.Z)("div",{target:"e1ptdvq07"})("@media (min-width: ",(e=>e.theme.breakpoints.small),"){max-width:65%;}"),pt=(0,g.Z)("div",{target:"e1ptdvq06"})("display:flex;line-height:2;gap:",(0,R.Z)(1),";"),ct=(0,g.Z)(de.Z,{target:"e1ptdvq05"})("@media (max-width: ",(e=>e.theme.breakpoints.small),"){display:none;}"),ut=(0,g.Z)(J.Z,{target:"e1ptdvq04"})({name:"870gjp",styles:"font-size:inherit"}),ht=(0,g.Z)("div",{target:"e1ptdvq03"})("display:grid;grid-template-columns:repeat(",(e=>e.numItems),", min-content);gap:calc(",(0,R.Z)(3)," + ",(0,R.Z)(3),");@media (min-width: ",(e=>e.theme.breakpoints.small),"){justify-content:flex-end;}"),gt=(0,g.Z)(st.S,{target:"e1ptdvq02"})("display:flex;gap:",(0,R.Z)(1),";justify-content:flex-start;line-height:1.2;"),mt=(0,g.Z)(H.Z,{target:"e1ptdvq01"})("display:flex;align-items:center;gap:",(0,R.Z)(.5),";"),vt=(0,g.Z)(_.td,{target:"e1ptdvq00"})("margin-top:",(0,R.Z)(2),";");var yt=s("./app/components/pageAlertBar.tsx");function Zt(e){let{organization:t,project:s}=e;return(0,Ce.BX)(yt.Z,{children:[(0,Ce.tZ)(ue.Db,{}),(0,Ce.tZ)(ft,{children:(0,o.t)("You are viewing a sample error. Configure Sentry to start viewing real errors.")}),(0,Ce.tZ)(Se.ZP,{size:"xs",priority:"primary",to:`/${t.slug}/${s.slug}/getting-started/${s.platform||""}`,onClick:()=>(0,T.Z)("growth.sample_error_onboarding_link_clicked",{project_id:s.id?.toString(),organization:t,platform:s.platform}),children:(0,o.t)("Get Started")})]})}Zt.displayName="SampleEventAlert";const bt=Zt,ft=(0,g.Z)("span",{target:"e1k8ur580"})("margin:0 ",(0,R.Z)(1),";");function xt(e){return e.activity&&e.activity.filter((e=>e.type===A.fc.ASSIGNED)).find((e=>!!e.data.integration))?.data.integration||""}class St extends i.Component{constructor(){super(...arguments),(0,h.Z)(this,"state",this.initialState),(0,h.Z)(this,"refetchInterval",null),(0,h.Z)(this,"remountComponent",(()=>{this.setState(this.initialState),this.fetchData()})),(0,h.Z)(this,"refetchGroup",(async()=>{const{loadingGroup:e,loading:t,loadingEvent:s,group:i}=this.state;if(i?.status!==Ye.m7.REPROCESSING||e||t||s)return;const{api:r}=this.props;this.setState({loadingGroup:!0});try{const e=await r.requestPromise(this.groupDetailsEndpoint,{query:this.getGroupQuery()}),t=this.getReprocessingNewRoute(e);if(t)return void m.browserHistory.push(t);this.setState({group:e,loadingGroup:!1})}catch(e){this.handleRequestError(e)}})),(0,h.Z)(this,"listener",w.Z.listen((e=>this.onGroupChange(e)),void 0))}getChildContext(){return{group:this.state.group,location:this.props.location}}componentDidMount(){this.props.setDisableRouteAnalytics(),this.fetchData(this.canLoadEventEarly(this.props)),this.props.organization.features.includes("session-replay-ui")&&this.fetchReplayIds(),this.updateReprocessingProgress(),async function(e,t){b.Z.onFetchEnvironments();try{const s=await e.requestPromise(`/organizations/${t}/environments/`);if(!s)return void b.Z.onFetchEnvironmentsError(new Error("retrieved environments is falsey"));b.Z.onFetchEnvironmentsSuccess(s)}catch(e){b.Z.onFetchEnvironmentsError(e)}}(this.props.api,this.props.organization.slug)}componentDidUpdate(e,t){const s=e.isGlobalSelectionReady!==this.props.isGlobalSelectionReady;(s||e.location.pathname!==this.props.location.pathname)&&this.fetchData(s&&this.canLoadEventEarly(this.props)),(!this.canLoadEventEarly(e)&&!t?.group&&this.state.group||e.params?.eventId!==this.props.params?.eventId&&this.state.group)&&this.getEvent(this.state.group).then((()=>this.state.group?.project&&this.trackView(this.state.group?.project)))}componentWillUnmount(){w.Z.reset(),this.listener?.(),this.refetchInterval&&window.clearInterval(this.refetchInterval)}get initialState(){return{group:null,loading:!0,loadingReplayIds:!0,loadingEvent:!0,loadingGroup:!0,error:!1,eventError:!1,errorType:null,project:null,replayIds:null}}trackView(e){const{group:t,event:s}=this.state,{organization:i,params:r,location:o}=this.props,{alert_date:n,alert_rule_id:a,alert_type:l}=o.query;(0,T.Z)("issue_details.viewed",{organization:i,project_id:parseInt(e.id,10),group_id:parseInt(r.groupId,10),issue_category:t?.issueCategory??A.qE.ERROR,issue_status:t?.status,issue_age:t?.firstSeen?B(t.firstSeen):-1,issue_level:t?.level,is_assigned:!!t?.assignedTo,error_count:Number(t?.count||-1),error_has_replay:Boolean(s?.tags?.find((e=>{let{key:t}=e;return"replayId"===t}))),group_has_replay:Boolean(t?.tags?.find((e=>{let{key:t}=e;return"replayId"===t}))),num_comments:t?t.numComments:-1,project_has_replay:t?.project.hasReplays,project_platform:t?.project.platform,has_external_issue:!!t?.annotations&&t?.annotations.length>0,has_owner:!!t?.owners&&t?.owners.length>0,integration_assignment_source:t?xt(t):"",...(0,z.UF)(s),alert_date:"string"==typeof n?(0,j.v5)(Number(n)):void 0,alert_rule_id:"string"==typeof a?a:void 0,alert_type:"string"==typeof l?l:void 0})}canLoadEventEarly(e){return!e.params.eventId||["oldest","latest"].includes(e.params.eventId)}get groupDetailsEndpoint(){return`/issues/${this.props.params.groupId}/`}get groupReleaseEndpoint(){return`/issues/${this.props.params.groupId}/first-last-release/`}async getEvent(e){e&&this.setState({loadingEvent:!0,eventError:!1});const{params:t,environments:s,api:i}=this.props,r=t.orgId,o=t.groupId,n=t.eventId??"latest",a=e?.project?.slug;try{const e=await(0,Ye.MN)(i,r,o,n,s,a);this.setState({event:e,loading:!1,eventError:!1,loadingEvent:!1})}catch(e){v.Tb(e),this.setState({eventError:!0,loading:!1,loadingEvent:!1})}}getCurrentRouteInfo(e){const{organization:t,router:s,routes:i}=this.props,{event:r}=this.state,o=i[i.length-1];let n;return n=s.params.tagKey?tt.O.TAGS:Object.values(tt.O).find((e=>o.path===tt.h[e]))??tt.O.DETAILS,{baseUrl:`/organizations/${t.slug}/issues/${e.id}/${s.params.eventId&&r?`events/${r.id}/`:""}`,currentTab:n}}updateReprocessingProgress(){this.hasReprocessingV2Feature()&&(this.refetchInterval&&window.clearInterval(this.refetchInterval),this.refetchInterval=window.setInterval(this.refetchGroup,3e4))}hasReprocessingV2Feature(){const{organization:e}=this.props;return e.features?.includes("reprocessing-v2")}getReprocessingNewRoute(e){const{routes:t,location:s,params:i}=this.props,{groupId:r}=i,{id:o}=e,n=this.hasReprocessingV2Feature(),a=(0,Ye.M3)(e),{currentTab:l,baseUrl:d}=this.getCurrentRouteInfo(e);if(r!==o)return n&&a===Ye.m7.REPROCESSED_AND_HASNT_EVENT&&l!==tt.O.ACTIVITY?{pathname:`${d}${tt.O.ACTIVITY}/`,query:{...i,groupId:o}}:(0,P.Z)("",{routes:t,location:s,params:{...i,groupId:o}});if(n){if(a===Ye.m7.REPROCESSING&&l!==tt.O.DETAILS)return{pathname:d,query:i};if(a===Ye.m7.REPROCESSED_AND_HASNT_EVENT&&l!==tt.O.ACTIVITY&&l!==tt.O.USER_FEEDBACK)return{pathname:`${d}${tt.O.ACTIVITY}/`,query:i}}}getGroupQuery(){const{environments:e}=this.props;return{...e?{environment:e}:{},expand:["inbox","owners"],collapse:"release"}}getFetchDataRequestErrorType(e){return e?404===e?q:403===e?M:null:null}handleRequestError(e){v.Tb(e);const t=this.getFetchDataRequestErrorType(e?.status);this.setState({loadingGroup:!1,loading:!1,error:!0,errorType:t})}async fetchGroupReleases(){const{api:e}=this.props,t=await e.requestPromise(this.groupReleaseEndpoint);w.Z.onPopulateReleases(this.props.params.groupId,t)}async fetchReplayIds(){const{api:e,location:t,organization:s,params:i}=this.props,{groupId:r}=i;this.setState({loadingReplayIds:!0});const o=C.ZP.fromNewQueryWithLocation({id:"",name:"Errors within replay",version:2,fields:["replayId","count()"],query:`issue.id:${r} !replayId:""`,projects:[]},t);try{const[i]=await(0,D.AA)(e,`/organizations/${s.slug}/events/`,o.getEventsAPIPayload(t)),r=i.data.map((e=>String(e.replayId)));this.setState({replayIds:r,loadingReplayIds:!1})}catch(e){this.setState({loadingReplayIds:!1})}}async fetchData(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{api:t,isGlobalSelectionReady:s,params:i}=this.props;if(s)try{const s=this.canLoadEventEarly(this.props)?this.getEvent():void 0,r=await t.requestPromise(this.groupDetailsEndpoint,{query:this.getGroupQuery()}),[o]=await Promise.all([r,s]),n=this.fetchGroupReleases(),a=this.getReprocessingNewRoute(o);if(a)return void m.browserHistory.push(a);const l=o.project;if((0,Ye.V7)(t,i.orgId,l.slug,i.groupId),l){const e={...this.props.location};void 0===e.query.project&&void 0===e.query._allp&&(e.query={...e.query,project:l.id}),delete e.query._allp,m.browserHistory.replace(e)}else v.$e((()=>{v.Tb(new Error("Project not found"))}));this.setState({project:l,loadingGroup:!1}),w.Z.loadInitialData([o]),e&&n.then((()=>this.trackView(l)))}catch(e){this.handleRequestError(e)}}onGroupChange(e){const t=this.props.params.groupId;if(e.has(t)){const e=w.Z.get(t);if(e){if(e.stale)return void this.fetchData();this.setState({group:e})}}}getTitle(){const{organization:e}=this.props,{group:t}=this.state,s="Sentry";if(!t)return s;const{title:i}=(0,z.YQ)(t,e?.features),r=(0,z.FC)(t),{project:o}=t,n=`${e.slug} - ${o.slug}`;return i&&r?`${i}: ${r} - ${n}`:`${i||r||s} - ${n}`}tabClickAnalyticsEvent(e){const{organization:t}=this.props,{project:s,group:i,event:r}=this.state;if(!s||!i)return;if((0,T.Z)("issue_details.tab_changed",{organization:t,group_id:parseInt(i.id,10),issue_category:i.issueCategory,project_id:parseInt(s.id,10),tab:e}),i.issueCategory!==A.qE.ERROR)return;const o=r?r.tags.filter((e=>{let{key:t}=e;return["device","os","browser"].includes(t)})).reduce(((e,t)=>{let{key:s,value:i}=t;return e[s]=i,e}),{}):{};(0,T.Z)("issue_group_details.tab.clicked",{organization:t,tab:e,platform:s.platform,...o})}renderError(){const{projects:e,location:t}=this.props,s=t.query.project,i=e.find((e=>e.id===s));switch(this.state.errorType){case q:return(0,Ce.tZ)(It,{message:(0,o.t)("The issue you were looking for was not found.")});case M:return(0,Ce.tZ)(E.Z,{organization:this.props.organization,project:i});default:return(0,Ce.tZ)(It,{onRetry:this.remountComponent})}}renderContent(e,t){const{children:s,environments:r,organization:o,router:n}=this.props,{loadingEvent:a,eventError:l,event:d,replayIds:p}=this.state,{currentTab:c,baseUrl:u}=this.getCurrentRouteInfo(t),h=(0,Ye.M3)(t);let g={environments:r,group:t,project:e};if(c===tt.O.DETAILS)if(t.id===d?.groupID||l)g={...g,event:d,loadingEvent:a,eventError:l,groupReprocessingStatus:h,onRetry:()=>this.remountComponent()};else{const e=`/organizations/${o.slug}/issues/${d?.groupID}/events/${d?.id}/`;n.push(e)}return c===tt.O.TAGS?g={...g,event:d,baseUrl:u}:c===tt.O.REPLAYS&&(g={...g,replayIds:p}),(0,Ce.BX)(_.mQ,{value:c,onChange:e=>this.tabClickAnalyticsEvent(e),children:[(0,Ce.tZ)(rt,{organization:o,groupReprocessingStatus:h,event:d,group:t,replaysCount:p?.length,baseUrl:u,project:e}),(0,Ce.tZ)(_t,{children:(0,Ce.tZ)(_.ck,{children:(0,i.isValidElement)(s)?(0,i.cloneElement)(s,g):s},c)})]})}renderPageContent(){const{error:e,group:t,project:s,loading:i}=this.state;if(i||!t&&!e)return(0,Ce.tZ)(x.Z,{});if(e)return this.renderError();const{organization:r}=this.props;return(0,Ce.tZ)($.Z,{orgId:r.slug,slugs:[s?.slug??""],"data-test-id":"group-projects-container",children:e=>{let{projects:s,initiallyLoaded:i,fetchError:r}=e;return i?r?(0,Ce.tZ)(It,{message:(0,o.t)("Error loading the specified project")}):this.renderContent(s[0],t):(0,Ce.tZ)(x.Z,{})}})}render(){const{project:e,group:t}=this.state,{organization:s}=this.props,r=t?.tags?.some((e=>"sample_event"===e.key));return(0,Ce.BX)(i.Fragment,{children:[r&&e&&(0,Ce.tZ)(bt,{project:e,organization:s}),(0,Ce.tZ)(I.Z,{noSuffix:!0,title:this.getTitle(),children:(0,Ce.tZ)(S.Z,{skipLoadLastUsed:!0,forceProject:e,shouldForceProject:!0,children:this.renderPageContent()})})]})}}St.displayName="GroupDetails",(0,h.Z)(St,"childContextTypes",{group:k.Z.Group,location:Z.object});const Et=(0,U.Z)((0,G.Z)(y.zH(St))),It=(0,g.Z)(f.Z,{target:"eyu73lm1"})("margin:",(0,R.Z)(2),";"),_t=(0,g.Z)(_.nP,{target:"eyu73lm0"})({name:"1xwzzid",styles:"flex-grow:1;display:flex;flex-direction:column;justify-content:stretch"});function kt(e){let{selection:t,...s}=e;const u=(0,p.Z)(),{projects:h}=(0,c.Z)(),g=(0,d.Z)(),{params:m,location:v}=s,y=v.query.project,Z=h.find((e=>e.id===y));return(0,i.useEffect)((()=>{Z?.slug&&function(e){let{api:t,orgSlug:s,projSlug:i}=e;t.requestPromise(`/projects/${s}/${i}/`).then(n.Z.onUpdateSuccess).catch((e=>{const t=(0,o.t)("Unable to fetch project details");(0,a.Z)(t)(e),(0,r.Iw)(t)}))}({api:g,orgSlug:u.slug,projSlug:Z.slug})}),[g,u.slug,Z?.slug]),(0,i.useEffect)((()=>{(0,l.co)("issue_page.viewed",{group_id:parseInt(m.groupId,10),org_id:parseInt(u.id,10)})}),[u,m.groupId]),(0,Ce.tZ)(Et,{environments:t.environments,organization:u,projects:h,...s},`${m.groupId}-envs:${t.environments.join(",")}`)}kt.displayName="OrganizationGroupDetails";const wt=(0,u.Z)(kt)},"./app/views/organizationGroupDetails/utils.tsx":(e,t,s)=>{s.d(t,{Ad:()=>m,M3:()=>y,MN:()=>d,V7:()=>p,dG:()=>u,g5:()=>c,m7:()=>v,sC:()=>g});var i=s("../node_modules/lodash/orderBy.js"),r=s.n(i),o=s("./app/actionCreators/group.tsx"),n=s("./app/api.tsx"),a=s("./app/locale.tsx"),l=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");async function d(e,t,s,i,r,o){const n="latest"===i||"oldest"===i?`/issues/${s}/events/${i}/`:`/projects/${t}/${o}/events/${i}/?group_id=${s}`,a={};return 0!==r.length&&(a.environment=r),await e.requestPromise(n,{query:a})}function p(e,t,s,i){(0,o.Gv)(e,{orgId:t,projectId:s,itemIds:[i],failSilently:!0,data:{hasSeen:!0}},{})}function c(e,t){return(new n.KU).requestPromise(`/issues/${e}/user-reports/`,{includeAllArgs:!0,query:t})}function u(e){const t=e.tags.find((e=>{let{key:t}=e;return"environment"===t}));return t?t.value:null}const h={commented:(0,a.t)("You're receiving workflow notifications because you have commented on this issue."),assigned:(0,a.t)("You're receiving workflow notifications because you were assigned to this issue."),bookmarked:(0,a.t)("You're receiving workflow notifications because you have bookmarked this issue."),changed_status:(0,a.t)("You're receiving workflow notifications because you have changed the status of this issue."),mentioned:(0,a.t)("You're receiving workflow notifications because you have been mentioned in this issue.")};function g(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.subscriptionDetails&&e.subscriptionDetails.disabled)return(0,a._N)("You have [link:disabled workflow notifications] for this project.",{link:t?(0,l.tZ)("span",{}):(0,l.tZ)("a",{href:"/account/settings/notifications/"})});if(!e.isSubscribed)return(0,a.t)("Subscribe to workflow notifications for this issue");if(e.subscriptionDetails){const{reason:t}=e.subscriptionDetails;if("unknown"===t)return(0,a.t)("You're receiving workflow notifications because you are subscribed to this issue.");if(t&&h.hasOwnProperty(t))return h[t]}return(0,a._N)("You're receiving updates because you are [link:subscribed to workflow notifications] for this project.",{link:t?(0,l.tZ)("span",{}):(0,l.tZ)("a",{href:"/account/settings/notifications/"})})}function m(e){return r()([...e],(e=>{let{dateCreated:t}=e;return new Date(t)}),["desc"])[0]}let v;function y(e,t){const{status:s,count:i,activity:r}=e,o=Number(i);switch(s){case"reprocessing":return v.REPROCESSING;case"unresolved":return"reprocess"===(t??m(r))?.type?0===o?v.REPROCESSED_AND_HASNT_EVENT:v.REPROCESSED_AND_HAS_EVENT:v.NO_STATUS;default:return v.NO_STATUS}}!function(e){e.REPROCESSED_AND_HASNT_EVENT="reprocessed_and_hasnt_event",e.REPROCESSED_AND_HAS_EVENT="reprocessed_and_has_event",e.REPROCESSING="reprocessing",e.NO_STATUS="no_status"}(v||(v={}))}}]);
//# sourceMappingURL=../sourcemaps/app_views_organizationGroupDetails_index_tsx.be8f79b406e97fd19bacb525e259575f.js.map