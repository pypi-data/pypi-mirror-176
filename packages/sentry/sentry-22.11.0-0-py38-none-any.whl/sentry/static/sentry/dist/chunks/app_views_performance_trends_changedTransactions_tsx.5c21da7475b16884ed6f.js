"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_performance_trends_changedTransactions_tsx","app_views_performance_transactionSummary_utils_tsx"],{"./app/components/dropdownLink.tsx":(e,t,n)=>{n.d(t,{Z:()=>u});var r=n("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),a=n("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),o=n("../node_modules/classnames/index.js"),s=n.n(o),i=n("./app/components/deprecatedDropdownMenu.tsx"),c=n("./app/icons/index.tsx"),l=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const d=e=>(0,r.iv)(".dropdown-menu{&>li>a{color:",e.textColor,";&:hover,&:focus{color:inherit;background-color:",e.hover,";}}& .disabled{cursor:not-allowed;&:hover{background:inherit;color:inherit;}}}.dropdown-submenu:hover>span{color:",e.textColor,";background:",e.hover,";}","");function p(e){let{anchorMiddle:t,title:n,customTitle:r,children:o,menuClasses:p,className:u,topLevelClasses:m,anchorRight:g=!1,disabled:h=!1,caret:f=!0,alwaysRenderMenu:v=!0,...x}=e;const w=(0,a.u)();return(0,l.tZ)(i.Z,{alwaysRenderMenu:v,...x,children:e=>{let{isOpen:a,getRootProps:i,getActorProps:x,getMenuProps:y}=e;const _=v||a,Z=s()("dropdown-actor",u,{"dropdown-menu-right":g,"dropdown-toggle":!0,hover:a,disabled:h}),b=s()("dropdown",m,{"pull-right":g,"anchor-right":g,"anchor-middle":t,open:a}),{onClick:S,...E}=x({className:Z});return(0,l.BX)("span",{css:d(w),...i({className:b}),"data-test-id":"dropdown-link",children:[(0,l.tZ)("a",{onClick:h?void 0:S,...E,children:r||(0,l.BX)("div",{className:"dropdown-actor-title",children:[n,f&&(0,l.tZ)(c.g6,{direction:a?"up":"down",size:"xs"})]})}),_&&(0,l.tZ)("ul",{...y({className:s()(p,"dropdown-menu")}),children:o})]})}})}p.displayName="DropdownLink";const u=p},"./app/utils/performance/quickTrace/utils.tsx":(e,t,n)=>{n.d(t,{$J:()=>w,Ci:()=>b,R8:()=>h,S2:()=>y,_Z:()=>x,eF:()=>v,eW:()=>m,hp:()=>p,q2:()=>u,xB:()=>_,y3:()=>Z}),n("../node_modules/core-js/modules/es.error.cause.js");var r=n("../node_modules/lodash/omit.js"),a=n.n(r),o=n("../node_modules/moment-timezone/index.js"),s=n.n(o),i=n("./app/components/events/interfaces/spans/utils.tsx"),c=n("./app/constants/pageFilters.tsx"),l=n("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),d=n("./app/utils/discover/eventView.tsx");function p(e){return"transaction"===e.type}function u(e,t){return p(t)?e.event_id===t.id:void 0!==e.errors&&e.errors.some((e=>e.event_id===t.id))}function m(e,t){const n=[],r=[],a=[{event:t,path:[]}];for(;a.length;){const t=a.shift();if(u(t.event,e)){for(const e of t.path)n.push(e);r.push(t.event)}else{const e=[...t.path,g(t.event)];for(const n of t.event.children)a.push({event:n,path:e})}}if(!r.length)throw new Error("No relevant path exists!");for(;r.length;){const e=r.shift();for(const t of e.children)r.push(t);n.push(g(e))}return n}function g(e){return a()(e,["children"])}function h(e,t,n){const{type:r,trace:a}=e;if("empty"===r||null===a)throw new Error("Current event not in trace navigator!");const o="full"===r,s=a.find((e=>u(e,t)))??null;if(null===s)throw new Error("Current event not in trace navigator!");const i=s.parent_event_id?a.find((e=>e.event_id===s.parent_event_id))??null:null,c=a.find((e=>e.event_id!==s.event_id&&e.event_id!==i?.event_id&&0===e.generation))??null,d=o?[]:null,p=[],m=o?[]:null,g=new Set;return a.forEach((e=>{g.add(e.project_id),(e=>e.parent_event_id===s.event_id)(e)?p.push(e):o&&((e=>null!==s.generation&&null!==e.generation&&e.generation>0&&s.generation-1>e.generation)(e)?d?.push(e):(e=>null!==s.generation&&null!==e.generation&&s.generation+1<e.generation)(e)&&m?.push(e))})),o&&g.size>1&&function(e,t){(0,l.Z)("quick_trace.connected_services",{organization:e.id,projects:t})}(n,g.size),{root:c,ancestors:null===d?null:f(d),parent:i,current:s,children:f(p),descendants:null===m?null:f(m)}}function f(e){return e.sort(((e,t)=>t["transaction.duration"]-e["transaction.duration"]))}function v(e){let{eventView:t,location:n}=e;return a()(t.getEventsAPIPayload(n),["field","sort","per_page"])}function x(e){let{start:t,end:n,statsPeriod:r}=e;return d.ZP.fromSavedQuery({id:void 0,version:2,name:"",fields:["transaction.duration"],projects:[c.mP],query:"",environment:[],start:t,end:n,range:r??void 0})}function w(e){const t=p(e)?e.startTimestamp:s()(e.dateReceived?e.dateReceived:e.dateCreated).valueOf()/1e3,n=p(e)?e.endTimestamp:t;return(0,i.TC)({start:t,end:n})}function y(e,t,n){let r=n;const a=[e];for(;a.length;){const e=a.pop();for(const t of e.children)a.push(t);r=t(r,e)}return r}function _(e,t){return y(e,((e,n)=>(t(n)&&e.push(n),e)),[])}function Z(e){return Boolean(e.event_id)}function b(e){return Boolean(e.event_id)}},"./app/utils/performance/urls.ts":(e,t,n)=>{n.d(t,{D:()=>o});var r=n("./app/components/events/interfaces/spans/utils.tsx"),a=n("./app/utils.tsx");function o(e,t,n,o,s){const i={...o||{},transaction:n};(0,a.ri)(i.transaction)||delete i.transaction;const c={pathname:`/organizations/${e}/performance/${t}/`,query:i,hash:(0,a.ri)(s)?(0,r.ct)(s):void 0};return(0,a.ri)(c.hash)||delete c.hash,c}},"./app/views/performance/traceDetails/utils.tsx":(e,t,n)=>{n.d(t,{Rg:()=>s,YA:()=>o,uM:()=>i});var r=n("./app/constants/pageFilters.tsx"),a=n("./app/utils/performance/quickTrace/utils.tsx");function o(e,t,n,a){const{start:o,end:s,statsPeriod:i}=n;return{pathname:`/organizations/${e.slug}/performance/trace/${t}/`,query:{...a,statsPeriod:i,[r.V.PAGE_START]:o,[r.V.PAGE_END]:s}}}function s(e){const t={projects:new Set,errors:new Set,transactions:new Set,startTimestamp:Number.MAX_SAFE_INTEGER,endTimestamp:0,maxGeneration:0};return e.reduce(((e,t)=>(0,a.S2)(t,((e,t)=>{for(const n of t.errors??[])e.errors.add(n.event_id);return e.transactions.add(t.event_id),e.projects.add(t.project_slug),e.startTimestamp=Math.min(e.startTimestamp,t.start_timestamp),e.endTimestamp=Math.max(e.endTimestamp,t.timestamp),e.maxGeneration=Math.max(e.maxGeneration,t.generation),e}),e)),t)}function i(e){return null===e.parent_span_id}},"./app/views/performance/transactionSummary/utils.tsx":(e,t,n)=>{n.d(t,{K0:()=>d,MF:()=>f,PU:()=>u,Z6:()=>g,e1:()=>m,uI:()=>v,vd:()=>h,xf:()=>p});var r=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=n("./app/styles/space.tsx"),o=n("./app/utils/discover/urls.tsx"),s=n("./app/utils/getRouteStringFromRoutes.tsx"),i=n("./app/utils/performance/urls.ts"),c=n("./app/utils/tokenizeSearch.tsx"),l=n("./app/views/performance/traceDetails/utils.tsx");let d;function p(e){const t=u(e);return t.removeFilter("transaction"),t}function u(e){const t=new c.MY(e);return t.removeFilter("event.type"),t}function m(e){let{orgSlug:t,transaction:n,projectID:r,query:a,unselectedSeries:o="p100()",display:s,trendFunction:i,trendColumn:c,showTransactions:l,additionalQuery:d}=e;const u=function(e){let{orgSlug:t}=e;return`/organizations/${t}/performance/summary/`}({orgSlug:t});let m;return m="string"==typeof a.query?p(a.query).formatString():a.query,{pathname:u,query:{transaction:n,project:r,environment:a.environment,statsPeriod:a.statsPeriod,start:a.start,end:a.end,query:m,unselectedSeries:o,showTransactions:l,display:s,trendFunction:i,trendColumn:c,referrer:"performance-transaction-summary",...d}}}function g(e){return(t,n,r)=>{const a=`${n.trace}`;return a?(0,l.YA)(t,a,e,{}):{}}}function h(e){return(t,n,r,a)=>{const s=(0,o.JE)(n);return(0,i.D)(t.slug,s,e,r,a)}}function f(e){return(t,n,r)=>{const a=n.replayId;if(!a)return{};const o=`${n["project.name"]}:${a}`,i=(0,s.Z)(e);if(!n.timestamp)return{pathname:`/organizations/${t.slug}/replays/${o}/`,query:{referrer:i}};const c=new Date(n.timestamp).getTime()-n["transaction.duration"];return{pathname:`/organizations/${t.slug}/replays/${o}/`,query:{event_t:c,referrer:i}}}}!function(e){e.FASTEST="fastest",e.SLOW="slow",e.OUTLIER="outlier",e.RECENT="recent"}(d||(d={}));const v=(0,r.Z)("div",{target:"e1radvp0"})("margin-top:",(0,a.Z)(3),";")},"./app/views/performance/trends/changedTransactions.tsx":(e,t,n)=>{n.d(t,{H:()=>G,Z:()=>pe});var r,a=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(n("../node_modules/core-js/modules/es.error.cause.js"),n("../node_modules/react/index.js")),s=n("../node_modules/react-router/es/index.js"),i=n("./app/components/button.tsx"),c=n("./app/components/charts/styles.tsx"),l=n("./app/components/count.tsx"),d=n("./app/components/dropdownLink.tsx"),p=n("./app/components/duration.tsx"),u=n("./app/components/emptyStateWarning.tsx"),m=n("./app/components/forms/controls/radioGroup.tsx"),g=n("./app/components/idBadge/index.tsx"),h=n("./app/components/links/link.tsx"),f=n("./app/components/loadingIndicator.tsx"),v=n("./app/components/menuItem.tsx"),x=n("./app/components/pagination.tsx"),w=n("./app/components/panels/index.tsx"),y=n("./app/components/questionTooltip.tsx"),_=n("./app/components/radio.tsx"),Z=n("./app/components/tooltip.tsx"),b=n("./app/icons/index.tsx"),S=n("./app/locale.tsx"),E=n("./app/styles/space.tsx"),j=n("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),T=n("./app/utils/formatters.tsx"),C=n("./app/utils/performance/trends/trendsDiscoverQuery.tsx"),R=n("./app/utils/queryString.tsx"),k=n("./app/utils/tokenizeSearch.tsx"),q=n("./app/utils/useApi.tsx"),z=n("./app/utils/withOrganization.tsx"),L=n("./app/utils/withProjects.tsx"),P=n("./app/views/performance/transactionSummary/transactionOverview/charts.tsx"),A=n("./app/views/performance/transactionSummary/utils.tsx"),N=n("./app/views/performance/trends/chart.tsx"),M=n("./app/views/performance/trends/types.tsx"),D=n("./app/views/performance/trends/utils.tsx"),F=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function B(e){switch(e){case M.ER.IMPROVED:return(0,S.t)("Most Improved Transactions");case M.ER.REGRESSION:return(0,S.t)("Most Regressed Transactions");default:throw new Error("No trend type passed")}}function I(e,t,n){const r=(0,D.j_)(t),a=(0,R.ro)(e.query[r]);if(!n)return;return n.find((e=>`${e.transaction}-${e.project}`===a))||(n.length>0?n[0]:void 0)}function V(e,t,n){return function(r){const a=(0,D.j_)(n),o={...e.query};r?o[a]=r?`${r.transaction}-${r.project}`:void 0:delete o[a],s.browserHistory.push({pathname:e.pathname,query:o}),(0,j.Z)("performance_views.trends.widget_interaction",{organization:t,widget_type:n})}}function X(e,t,n,a,o,i,c){const l=(0,D.IO)(e,i,c).column,d=(0,R.ro)(e.query.query),p=new k.MY(d??""),u=p.getFilterValues(l),m=a===r.GREATER_THAN_EQUALS?">":"<";u&&u.forEach((e=>{(e.startsWith(a)||e.startsWith(m))&&p.removeFilterValue(l,e)})),p.addFilterValues(l,[`${a}${n}`]);const g=p.formatString();s.browserHistory.push({pathname:e.pathname,query:{...e.query,query:String(g).trim()}}),(0,j.Z)("performance_views.trends.change_duration",{organization:t,widget_type:B(o),value:`${a}${n}`})}function $(e){const{location:t,trendChangeType:n,previousTrendFunction:r,previousTrendColumn:a,organization:i,projects:c,setError:l}=e,d=(0,q.Z)(),p=e.trendView.clone(),u=B(n);(0,D.kM)(p,t,n,c);const m=(e=>(t,n,r)=>{const a={};e===M.ER.IMPROVED?a.improvedCursor=t:e===M.ER.REGRESSION&&(a.regressionCursor=t),delete r[(0,D.j_)(e)],s.browserHistory.push({pathname:n,query:{...r,...a}})})(n),g=(0,R.ro)(t.query[D.vt[n]]),h=e=>{(0,j.Z)("performance_views.trends.widget_pagination",{organization:i,direction:e,widget_type:B(n)})};return(0,F.tZ)(C.ZP,{eventView:p,orgSlug:i.slug,location:t,trendChangeType:n,cursor:g,limit:5,setError:e=>l(e?.message),children:s=>{let{isLoading:l,trendsData:g,pageLinks:v}=s;const w=(0,D.CE)(t),_=(0,D.IO)(t,c,p.project),Z=(0,D.RP)(g&&g.events&&g.events.data||[]),b=I(t,n,Z),E=g?.stats||{},j=Z&&Z.slice?Z.slice(0,5):[],T=l&&r?r:w.field,C=l&&a?a:_.column,R=(0,S.t)("This compares the baseline (%s) of the past with the present.",w.legendLabel);return(0,F.BX)(U,{"data-test-id":"changed-transactions",children:[(0,F.BX)(Y,{children:[(0,F.BX)(K,{children:[u,(0,F.tZ)(y.Z,{size:"sm",position:"top",title:R})]}),l?(0,F.tZ)(f.Z,{style:{margin:"237px auto"}}):(0,F.tZ)(o.Fragment,{children:j.length?(0,F.BX)(o.Fragment,{children:[(0,F.tZ)(W,{children:(0,F.tZ)(N.Z,{statsData:E,query:p.query,project:p.project,environment:p.environment,start:p.start,end:p.end,statsPeriod:p.statsPeriod,transaction:b,isLoading:l,...e})}),j.map(((r,a)=>(0,F.tZ)(O,{api:d,currentTrendFunction:T,currentTrendColumn:C,trendView:e.trendView,organization:i,transaction:r,index:a,trendChangeType:n,transactions:j,location:t,projects:c,statsData:E,handleSelectTransaction:V(t,i,n)},r.transaction)))]}):(0,F.tZ)(te,{small:!0,children:(0,S.t)("No results")})})]}),(0,F.tZ)(x.Z,{pageLinks:v,onCursor:m,paginationAnalyticsEvent:h})]})}})}function O(e){const{transaction:t,transactions:n,trendChangeType:a,currentTrendFunction:i,currentTrendColumn:c,index:p,location:u,organization:h,projects:f,handleSelectTransaction:x,trendView:w}=e,y=D.es[a].default,E=I(u,a,n)===t,j=f.find((e=>{let{slug:n}=e;return n===t.project})),C=t.aggregate_range_2,q=t.aggregate_range_1,z=(0,T.rl)(Math.abs(t.trend_percentage-1),0),L=(0,T.g9)(q/1e3,q<1e3&&q>10?0:2),P=(0,T.g9)(C/1e3,C<1e3&&C>10?0:2),A=(0,S.t)("Over this period, the %s for %s has %s %s from %s to %s",i,c,a===M.ER.IMPROVED?(0,S.t)("decreased"):(0,S.t)("increased"),z,L,P),N=a===M.ER.IMPROVED?q:C,B=a===M.ER.IMPROVED?L:P;return(0,F.BX)(ne,{"data-test-id":"trends-list-item-"+a,children:[(0,F.tZ)(re,{color:y,children:(0,F.tZ)(Z.Z,{title:(0,F.BX)(le,{children:[(0,F.tZ)("span",{children:(0,S.t)("Total Events")}),(0,F.BX)("span",{children:[(0,F.tZ)(l.Z,{value:t.count_range_1}),(0,F.tZ)(de,{direction:"right",size:"xs"}),(0,F.tZ)(l.Z,{value:t.count_range_2})]})]}),disableForVisualTest:!0,children:(0,F.tZ)(m.V,{index:p,role:"radio",children:(0,F.tZ)(_.Z,{checked:E,onChange:()=>x(t)})})})}),(0,F.tZ)(Q,{...e}),(0,F.tZ)(ie,{children:(0,F.tZ)(Z.Z,{title:A,children:(0,F.BX)(o.Fragment,{children:[a===M.ER.REGRESSION?"+":"",(0,T.rl)(t.trend_percentage-1,0)]})})}),(0,F.BX)(d.Z,{caret:!1,anchorRight:!0,title:(0,F.tZ)(J,{size:"xs",icon:(0,F.tZ)(b.YR,{"data-test-id":"trends-item-action",size:"xs"}),"aria-label":(0,S.t)("Actions")}),children:[(0,F.tZ)(v.Z,{onClick:()=>X(u,h,N,r.LESS_THAN_EQUALS,a,f,w.project),children:(0,F.tZ)(ee,{children:(0,S.t)("Show ≤ %s",B)})}),(0,F.tZ)(v.Z,{onClick:()=>X(u,h,N,r.GREATER_THAN_EQUALS,a,f,w.project),children:(0,F.tZ)(ee,{children:(0,S.t)("Show ≥ %s",B)})}),(0,F.tZ)(v.Z,{onClick:()=>function(e,t){const n=(0,R.ro)(e.query.query),r=new k.MY(n??"");r.addFilterValues("!transaction",[t]);const a=r.formatString();s.browserHistory.push({pathname:e.pathname,query:{...e.query,query:String(a).trim()}})}(u,t.transaction),children:(0,F.tZ)(ee,{children:(0,S.t)("Hide from list")})})]}),(0,F.BX)(oe,{children:[j&&(0,F.tZ)(Z.Z,{title:t.project,children:(0,F.tZ)(g.Z,{avatarSize:16,project:j,hideName:!0})}),(0,F.tZ)(G,{...e})]}),(0,F.tZ)(ce,{color:y,children:(0,F.tZ)(H,{...e})})]})}!function(e){e.GREATER_THAN_EQUALS=">=",e.LESS_THAN_EQUALS="<="}(r||(r={})),$.displayName="ChangedTransactions",O.displayName="TrendsListItem";const G=e=>{let{transaction:t}=e;const{fromSeconds:n,toSeconds:r,showDigits:a}=(0,D.Kt)(t.aggregate_range_1,t.aggregate_range_2);return(0,F.BX)(se,{children:[(0,F.tZ)(p.Z,{seconds:n,fixedDigits:a?1:0,abbreviation:!0}),(0,F.tZ)(de,{direction:"right",size:"xs"}),(0,F.tZ)(p.Z,{seconds:r,fixedDigits:a?1:0,abbreviation:!0})]})};G.displayName="CompareDurations";const H=e=>{let{transaction:t,trendChangeType:n}=e;const{seconds:r,fixedDigits:a,changeLabel:o}=(0,D.wx)(t.trend_difference,n);return(0,F.BX)("span",{children:[(0,F.tZ)(p.Z,{seconds:r,fixedDigits:a,abbreviation:!0})," ",o]})};H.displayName="ValueDelta";const Q=e=>{const{organization:t,trendView:n,transaction:r,projects:a,currentTrendFunction:o,currentTrendColumn:s}=e,i=n.clone(),c=(0,D._H)(r,a),l=(0,A.e1)({orgSlug:t.slug,transaction:String(r.transaction),query:i.generateQueryStringObject(),projectID:c,display:P.D.TREND,trendFunction:o,trendColumn:s});return(0,F.tZ)(ae,{to:l,"data-test-id":"item-transaction-name",children:r.transaction})};Q.displayName="TransactionSummaryLink";const U=(0,a.Z)("div",{target:"e11bn3w115"})({name:"1fttcpj",styles:"display:flex;flex-direction:column"}),Y=(0,a.Z)(w.s_,{target:"e11bn3w114"})({name:"154zghl",styles:"margin:0;flex-grow:1"}),W=(0,a.Z)("div",{target:"e11bn3w113"})("padding:",(0,E.Z)(3),";"),K=(0,a.Z)(c.ws,{target:"e11bn3w112"})("border-radius:",(e=>e.theme.borderRadius),";margin:",(0,E.Z)(2)," ",(0,E.Z)(3),";"),J=(0,a.Z)(i.ZP,{target:"e11bn3w111"})({name:"1989ovb",styles:"vertical-align:middle"}),ee=(0,a.Z)("div",{target:"e11bn3w110"})("white-space:nowrap;color:",(e=>e.theme.textColor),";");ee.defaultProps={"data-test-id":"menu-action"};const te=(0,a.Z)(u.Z,{target:"e11bn3w19"})({name:"1t1oqhu",styles:"min-height:300px;justify-content:center"}),ne=(0,a.Z)("div",{target:"e11bn3w18"})("display:grid;grid-template-columns:24px auto 100px 30px;grid-template-rows:repeat(2, auto);grid-column-gap:",(0,E.Z)(1),";border-top:1px solid ",(e=>e.theme.border),";padding:",(0,E.Z)(1)," ",(0,E.Z)(2),";"),re=(0,a.Z)("div",{target:"e11bn3w17"})("grid-row:1/3;input{cursor:pointer;}input:checked::after{background-color:",(e=>e.color),";}"),ae=(0,a.Z)(h.Z,{target:"e11bn3w16"})("font-size:",(e=>e.theme.fontSizeMedium),";margin-right:",(0,E.Z)(1),";",(e=>e.theme.overflowEllipsis),";"),oe=(0,a.Z)("div",{target:"e11bn3w15"})("display:flex;align-items:center;font-size:",(e=>e.theme.fontSizeSmall),";"),se=(0,a.Z)("span",{target:"e11bn3w14"})("color:",(e=>e.theme.gray300),";margin:0 ",(0,E.Z)(1),";"),ie=(0,a.Z)("div",{target:"e11bn3w13"})("text-align:right;font-size:",(e=>e.theme.fontSizeMedium),";"),ce=(0,a.Z)("div",{target:"e11bn3w12"})("color:",(e=>e.color),";text-align:right;font-size:",(e=>e.theme.fontSizeSmall),";"),le=(0,a.Z)("div",{target:"e11bn3w11"})({name:"zigog8",styles:"display:flex;flex-direction:column;align-items:center"}),de=(0,a.Z)(b.CC,{target:"e11bn3w10"})("margin:0 ",(0,E.Z)(1),";"),pe=(0,L.Z)((0,z.Z)($))},"./app/views/performance/trends/chart.tsx":(e,t,n)=>{n.d(t,{Z:()=>y,k:()=>w});var r=n("../node_modules/react-router/es/index.js"),a=n("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),o=n("./app/components/charts/chartZoom.tsx"),s=n("./app/components/charts/lineChart.tsx"),i=n("./app/components/charts/transitionChart.tsx"),c=n("./app/components/charts/transparentLoadingMask.tsx"),l=n("./app/components/organizations/pageFilters/parse.tsx"),d=n("./app/locale.tsx"),p=n("./app/utils/dates.tsx"),u=n("./app/utils/discover/charts.tsx"),m=n("./app/utils/discover/fields.tsx"),g=n("./app/utils/getDynamicText.tsx"),h=n("./app/utils/queryString.tsx"),f=n("./app/views/performance/trends/utils.tsx"),v=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function x(e){return{right:10,top:0,itemGap:12,align:"left",data:[{name:"Baseline",icon:"path://M180 1000 l0 -40 200 0 200 0 0 40 0 40 -200 0 -200 0 0 -40z, M810 1000 l0 -40 200 0 200 0 0 40 0 40 -200 0 -200 0 0 -40zm, M1440 1000 l0 -40 200 0 200 0 0 40 0 40 -200 0 -200 0 0 -40z"},{name:"Releases"},{name:e}]}}function w(e){let{trendChangeType:t,router:n,statsPeriod:w,transaction:y,statsData:_,isLoading:Z,location:b,start:S,end:E,trendFunctionField:j,disableXAxis:T,disableLegend:C,grid:R,height:k,projects:q,project:z}=e;const L=(0,a.u)(),P=e=>{const{selected:n}=e,a=Object.keys(n).filter((e=>!n[e])),o={...b.query};o[(0,f.P4)(t)]=a;const s={...b,query:o};r.browserHistory.push(s)},A=f.es[t||""],N=(_&&y?.project&&y?.transaction?_[[y.project,y.transaction].join(",")]:void 0)?.data??[],M=(0,f.CE)(b,j),D=(0,f.IO)(b,q,z),F=(0,f.ed)(M.field,D.column),B=function(e,t){return[{seriesName:t||"Current",data:e.map((e=>{let[t,n]=e;return{name:1e3*t,value:n.reduce(((e,t)=>{let{count:n}=t;return e+n}),0)}}))}]}(N,F),{smoothedResults:I,minValue:V,maxValue:X}=(0,f.vq)(B,F),$=S?(0,p.hC)(S):null,O=E?(0,p.hC)(E):null,{utc:G}=(0,l.fK)(b.query),H=(0,h.qP)(b.query[(0,f.P4)(t)]).reduce(((e,t)=>(e[t]=!1,e)),{}),Q=C?{show:!1}:{...x(F),selected:H},U=Z,Y=Z,W=Math.max(X,y?.aggregate_range_2||0,y?.aggregate_range_1||0),K=Math.min(V,y?.aggregate_range_1||Number.MAX_SAFE_INTEGER,y?.aggregate_range_2||Number.MAX_SAFE_INTEGER),J=I?I.map((e=>({...e,color:A.default,lineStyle:{opacity:1}}))):[],ee=function(e,t,n,r){if(!(r&&t.length&&t[0].data&&t[0].data.length))return[];const a=parseInt(t[0].data[0].name,10),o=parseInt(t[0].data.slice(-1)[0].name,10);if(o<a)return[];const s={data:[],color:e.textColor,markLine:{data:[],label:{},lineStyle:{color:e.textColor,type:"dashed",width:1},symbol:["none","none"],tooltip:{show:!1}},seriesName:"Baseline"},i={fontSize:11,show:!0,color:e.textColor,silent:!0},c={...s,markLine:{...s.markLine},seriesName:"Baseline"},l={...s,markLine:{...s.markLine},seriesName:"Baseline"},p={...s,markLine:{...s.markLine},seriesName:"Period split"},m=.5*(o-a)+a;return c.markLine.data=[[{value:"Past",coord:[a,r.aggregate_range_1]},{coord:[m,r.aggregate_range_1]}]],c.markLine.tooltip={formatter:()=>['<div class="tooltip-series tooltip-series-solo">',"<div>",`<span class="tooltip-label"><strong>${(0,d.t)("Past Baseline")}</strong></span>`,(0,u.CX)(r.aggregate_range_1,"duration"),"</div>","</div>",'<div class="tooltip-arrow"></div>'].join("")},l.markLine.data=[[{value:"Present",coord:[m,r.aggregate_range_2]},{coord:[o,r.aggregate_range_2]}]],l.markLine.tooltip={formatter:()=>['<div class="tooltip-series tooltip-series-solo">',"<div>",`<span class="tooltip-label"><strong>${(0,d.t)("Present Baseline")}</strong></span>`,(0,u.CX)(r.aggregate_range_2,"duration"),"</div>","</div>",'<div class="tooltip-arrow"></div>'].join("")},p.markLine={data:[{xAxis:m}],label:{show:!1},lineStyle:{color:e.textColor,type:"solid",width:2},symbol:["none","none"],tooltip:{show:!1},silent:!0},c.markLine.label={...i,formatter:"Past",position:"insideStartBottom"},l.markLine.label={...i,formatter:"Present",position:"insideEndBottom"},[c,l,p]}(L,I||[],0,y),te=.1*(W-K),ne=[...J,...ee],re=(0,u.Xp)(ne),ae={tooltip:{valueFormatter:(e,t)=>(0,u.CX)(e,(0,m.Px)(t))},yAxis:{min:Math.max(0,K-te),max:W+te,minInterval:re,axisLabel:{color:L.chartLabel,formatter:e=>(0,u.gu)(e,"duration",void 0,re)}}};return(0,v.tZ)(o.Z,{router:n,period:w,start:$,end:O,utc:"true"===G,children:e=>(0,v.BX)(i.Z,{loading:U,reloading:Y,children:[(0,v.tZ)(c.Z,{visible:Y}),(0,g.Z)({value:(0,v.tZ)(s.w,{height:k,...e,...ae,onLegendSelectChanged:P,series:ne,seriesOptions:{showSymbol:!1},legend:Q,toolBox:{show:!1},grid:R??{left:"10px",right:"10px",top:"40px",bottom:"0px"},xAxis:T?{show:!1}:void 0}),fixed:"Duration Chart"})]})})}w.displayName="Chart";const y=(0,r.withRouter)(w)}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_trends_changedTransactions_tsx.5295d1bad35a212bd1f219e49d8feef0.js.map