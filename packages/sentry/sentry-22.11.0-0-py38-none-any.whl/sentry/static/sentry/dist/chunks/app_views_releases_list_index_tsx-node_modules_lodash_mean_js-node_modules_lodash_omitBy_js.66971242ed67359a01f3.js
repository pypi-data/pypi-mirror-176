(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_releases_list_index_tsx-node_modules_lodash_mean_js-node_modules_lodash_omitBy_js","node_modules_lodash_mean_js"],{"./app/components/charts/chartZoom.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>Z});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=s("../node_modules/react/index.js"),a=s("../node_modules/moment/moment.js"),n=s.n(a),i=s("../node_modules/query-string/index.js"),l=s("./app/actionCreators/pageFilters.tsx"),d=s("./app/components/charts/components/dataZoomInside.tsx");s("../node_modules/echarts/lib/component/dataZoomSlider.js");const p={realtime:!1,showDetail:!1,left:0,right:6,bottom:8};function c(e){return e&&Array.isArray(e)?e:[{...p,...e}]}var h=s("./app/components/charts/components/toolBox.tsx"),u=s("./app/utils/callIfFunction.tsx"),m=s("./app/utils/dates.tsx");const g=e=>e?n().utc(e).format(n().HTML5_FMT.DATETIME_LOCAL_SECONDS):null;class y extends r.Component{constructor(e){var t;super(e),t=this,(0,o.Z)(this,"history",void 0),(0,o.Z)(this,"currentPeriod",void 0),(0,o.Z)(this,"zooming",null),(0,o.Z)(this,"saveCurrentPeriod",(e=>{this.currentPeriod={period:e.period,start:g(e.start),end:g(e.end)}})),(0,o.Z)(this,"setPeriod",(function(e){let{period:s,start:o,end:r}=e,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{router:n,onZoom:d,usePageDate:p}=t.props,c=g(o),h=g(r);a&&t.history.push(t.currentPeriod),d?.({period:s,start:c,end:h}),t.zooming=()=>{if(p&&n){const e={...n.location.query,pageStart:o?(0,m.v5)(o):void 0,pageEnd:r?(0,m.v5)(r):void 0,pageStatsPeriod:s??void 0};i.stringify(e)!==i.stringify(n.location.query)&&n.push({pathname:n.location.pathname,query:e})}else(0,l.dR)({period:s,start:c?(0,m.hC)(c):c,end:h?(0,m.hC)(h):h},n);t.saveCurrentPeriod({period:s,start:o,end:r})}})),(0,o.Z)(this,"handleChartReady",(e=>{this.props.onChartReady?.(e)})),(0,o.Z)(this,"handleZoomRestore",((e,t)=>{this.history.length&&(this.setPeriod(this.history[0]),this.history=[],this.props.onRestore?.(e,t))})),(0,o.Z)(this,"handleDataZoom",((e,t)=>{const s=t.getModel(),{startValue:o,endValue:r}=s._payload.batch[0];if(null===o&&null===r){const e=this.history.pop();if(!e)return;this.setPeriod(e)}else{const e=n().utc(o),t=n().utc(r);this.setPeriod({period:null,start:e,end:t},!0)}this.props.onDataZoom?.(e,t)})),(0,o.Z)(this,"handleChartFinished",((e,t)=>{"function"==typeof this.zooming&&(this.zooming(),this.zooming=null);const s=t._componentsViews?.find((e=>e._features&&e._features.dataZoom));s&&!s._features.dataZoom._isZoomActive&&t.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!0}),(0,u.g)(this.props.onFinished)})),this.history=[],this.saveCurrentPeriod(e)}componentDidUpdate(){this.props.disabled||this.saveCurrentPeriod(this.props)}render(){const{utc:e,start:t,end:s,disabled:o,children:r,xAxisIndex:a,router:n,onZoom:i,onRestore:l,onChartReady:p,onDataZoom:u,onFinished:g,showSlider:y,chartZoomOptions:Z,...S}=this.props,x=e??void 0,f=t?(0,m.hC)(t):void 0,v=s?(0,m.hC)(s):void 0;return r(o?{utc:x,start:f,end:v,...S}:{isGroupedByDate:!0,onChartReady:this.handleChartReady,utc:x,start:f,end:v,dataZoom:y?[...c({xAxisIndex:a,...Z}),...(0,d.Z)({xAxisIndex:a,...Z})]:(0,d.Z)({xAxisIndex:a,...Z}),showTimeInTooltip:!0,toolBox:(0,h.Z)({},{dataZoom:{title:{zoom:"",back:""},iconStyle:{borderWidth:0,color:"transparent",opacity:0}}}),onDataZoom:this.handleDataZoom,onFinished:this.handleChartFinished,onRestore:this.handleZoomRestore,...S})}}y.displayName="ChartZoom";const Z=y},"./app/components/charts/components/dataZoomInside.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>r}),s("../node_modules/echarts/lib/component/dataZoomInside.js");const o={type:"inside",zoomOnMouseWheel:!1,zoomLock:!0,throttle:50};function r(e){return e&&Array.isArray(e)?e:[{...o,...e}]}},"./app/components/charts/components/toolBox.tsx":(e,t,s)=>{"use strict";function o(){let{dataZoom:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e?{dataZoom:{yAxisIndex:"none",title:{zoom:"zoom",back:"undo"},...e}}:{},...t}}function r(e,t){return{right:0,top:0,itemSize:16,z:-1,feature:o(t),...e}}s.d(t,{Z:()=>r})},"./app/components/charts/lineChart.tsx":(e,t,s)=>{"use strict";s.d(t,{w:()=>n});var o=s("./app/components/charts/series/lineSeries.tsx"),r=s("./app/components/charts/baseChart.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function n(e){let{series:t,seriesOptions:s,...n}=e;return(0,a.tZ)(r.Z,{...n,series:t.map((e=>{let{seriesName:t,data:r,dataArray:a,...n}=e;return(0,o.Z)({...s,...n,name:t,data:a||r?.map((e=>{let{value:t,name:s}=e;return[s,t]})),animation:!1,animationThreshold:1,animationDuration:0})}))})}n.displayName="LineChart"},"./app/components/charts/loadingPanel.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("./app/components/loadingMask.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const n=(0,o.Z)((e=>{let{height:t,...s}=e;return(0,a.tZ)("div",{...s,children:(0,a.tZ)(r.Z,{})})}),{target:"eumb2md0"})("flex:1;flex-shrink:0;overflow:hidden;height:",(e=>e.height),";position:relative;border-color:transparent;margin-bottom:0;");n.defaultProps={height:"200px"};const i=n},"./app/components/charts/transitionChart.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=s("../node_modules/react/index.js"),a=s("./app/components/charts/loadingPanel.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class i extends r.Component{constructor(){super(...arguments),(0,o.Z)(this,"state",{prevReloading:this.props.reloading,prevLoading:this.props.loading,key:1})}static getDerivedStateFromProps(e,t){const s=t.prevReloading,o=e.reloading,r=t.prevLoading,a=e.loading;return r!==a?{prevReloading:o,prevLoading:a,key:t.key+1}:a?{prevReloading:o,prevLoading:a,key:t.key}:s&&!o?{prevReloading:o,prevLoading:a,key:t.key+1}:{prevReloading:o,prevLoading:a,key:t.key}}render(){const{height:e,loading:t,reloading:s}=this.props;return t&&!s?(0,n.tZ)(a.Z,{height:e,"data-test-id":"events-request-loading"}):(0,n.tZ)(r.Fragment,{children:this.props.children},String(this.state.key))}}i.displayName="TransitionChart",(0,o.Z)(i,"defaultProps",{height:"200px"});const l=i},"./app/components/charts/transparentLoadingMask.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("./app/components/loadingMask.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const n=(0,o.Z)((e=>{let{className:t,visible:s,children:o,...n}=e;const i=s?{...n,"data-test-id":"loading-placeholder"}:n;return(0,a.tZ)(r.Z,{className:t,...i,children:o})}),{target:"ewtkxp50"})((e=>!e.visible&&"display: none;"),";opacity:0.4;z-index:1;")},"./app/components/loadingMask.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});const o=(0,s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js").Z)("div",{target:"e1dnwgq10"})("background-color:",(e=>e.theme.backgroundSecondary),";border-radius:",(e=>e.theme.borderRadius),";position:absolute;top:0;bottom:0;left:0;right:0;")},"./app/components/notAvailable.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("./app/components/tooltip.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function n(e){let{tooltip:t,className:s}=e;return(0,a.tZ)(r.Z,{title:t,skipWrapper:!0,disabled:void 0===t,children:(0,a.tZ)(i,{className:s,children:"â€”"})})}n.displayName="NotAvailable";const i=(0,o.Z)("div",{target:"e1ickyb10"})("color:",(e=>e.theme.gray200),";"),l=n},"./app/utils/routeTitle.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});const o=function(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3?arguments[3]:void 0;const r=`${e} - ${t}`,a=o?`${r} - ${o}`:r;return s?`${a} - Sentry`:a}},"./app/views/asyncView.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var o=s("./app/components/asyncComponent.tsx"),r=s("./app/components/sentryDocumentTitle.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class n extends o.Z{getTitle(){return""}render(){return(0,a.tZ)(r.Z,{title:this.getTitle(),children:this.renderComponent()})}}n.displayName="AsyncView"},"./app/views/releases/detail/overview/releaseArchivedNotice.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("../node_modules/react/index.js"),a=s("./app/components/alert.tsx"),n=s("./app/components/button.tsx"),i=s("./app/locale.tsx"),l=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(e){let{onRestore:t,multi:s}=e;return(0,l.BX)(a.Z,{type:"warning",children:[s?(0,i.t)("These releases have been archived."):(0,i.t)("This release has been archived."),!s&&t&&(0,l.BX)(r.Fragment,{children:[" ",(0,l.tZ)(p,{size:"zero",priority:"link",onClick:t,children:(0,i.t)("Restore this release")})]})]})}d.displayName="ReleaseArchivedNotice";const p=(0,o.Z)(n.ZP,{target:"ed64kpf0"})("font-size:inherit;text-decoration:underline;&,&:hover,&:focus,&:active{color:",(e=>e.theme.textColor),";}"),c=d},"./app/views/releases/list/index.tsx":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ts});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/core-js/modules/es.error.cause.js"),s("../node_modules/react/index.js")),n=s("../node_modules/react-lazyload/lib/index.js"),i=s("../node_modules/lodash/pick.js"),l=s.n(i),d=s("./app/actionCreators/tags.tsx"),p=s("./app/components/alert.tsx"),c=s("./app/components/assistant/guideAnchor.tsx"),h=s("./app/components/datePageFilter.tsx"),u=s("./app/components/emptyMessage.tsx"),m=s("./app/components/environmentPageFilter.tsx"),g=s("./app/components/links/externalLink.tsx"),y=s("./app/components/loadingIndicator.tsx"),Z=s("./app/components/noProjectMessage.tsx"),S=s("./app/components/organizations/pageFilterBar.tsx"),x=s("./app/components/organizations/pageFilters/container.tsx"),f=s("./app/components/organizations/timeRangeSelector/utils.tsx"),v=s("./app/components/pageHeading.tsx"),b=s("./app/components/pagination.tsx"),j=s("./app/components/panels/index.tsx"),R=s("./app/components/projectPageFilter.tsx"),C=s("./app/components/smartSearchBar/index.tsx"),w=s("./app/components/smartSearchBar/types.tsx"),_=s("./app/constants/index.tsx"),P=s("./app/constants/pageFilters.tsx"),k=s("./app/data/platformCategories.tsx"),I=s("./app/icons/index.tsx"),B=s("./app/locale.tsx"),E=s("./app/stores/projectsStore.tsx"),z=s("./app/styles/organization.tsx"),A=s("./app/styles/space.tsx"),T=s("./app/types/index.tsx"),N=s("./app/utils/analytics.tsx"),O=s("./app/utils/discover/fields.tsx"),D=s("./app/utils/projects.tsx"),q=s("./app/utils/routeTitle.tsx"),H=s("./app/utils/withOrganization.tsx"),U=s("./app/utils/withPageFilters.tsx"),F=s("./app/utils/withProjects.tsx"),$=s("./app/views/asyncView.tsx"),L=s("./app/views/releases/detail/overview/releaseArchivedNotice.tsx"),V=s("./app/views/releases/utils/index.tsx"),M=s("../node_modules/color/index.js"),X=s.n(M),Q=s("../node_modules/lodash/partition.js"),Y=s.n(Q),G=s("./app/components/button.tsx"),W=s("./app/components/collapsible.tsx"),J=s("./app/components/globalSelectionLink.tsx"),K=s("./app/components/textOverflow.tsx"),ee=s("./app/components/timeSince.tsx"),te=s("./app/components/tooltip.tsx"),se=s("./app/components/version.tsx"),oe=s("./app/components/avatar/avatarList.tsx"),re=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const ae=e=>{let{release:t,withHeading:s=!0}=e;const o=t.commitCount||0,r=t.authors&&t.authors.length||0;if(0===o)return null;const a=[(0,B.tn)("%s commit","%s commits",o),(0,B.t)("by"),(0,B.tn)("%s author","%s authors",r)].join(" ");return(0,re.BX)("div",{className:"release-stats",children:[s&&(0,re.tZ)(ne,{children:a}),(0,re.tZ)("span",{style:{display:"inline-block"},children:(0,re.tZ)(oe.Z,{users:t.authors,avatarSize:25,typeMembers:"authors"})})]})};ae.displayName="ReleaseCardCommits";const ne=(0,r.Z)("div",{target:"e18hpm4o0"})("color:",(e=>e.theme.gray300),";font-size:",(e=>e.theme.fontSizeSmall),";line-height:1.2;font-weight:600;text-transform:uppercase;margin-bottom:",(0,A.Z)(.5),";"),ie=ae;var le=s("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),de=s("./app/components/charts/miniBarChart.tsx"),pe=s("./app/components/count.tsx"),ce=s("./app/components/idBadge/projectBadge.tsx"),he=s("./app/components/links/link.tsx"),ue=s("./app/components/notAvailable.tsx"),me=s("./app/components/organizations/pageFilters/utils.tsx"),ge=s("./app/components/placeholder.tsx"),ye=s("./app/components/tag.tsx"),Ze=s("./app/utils.tsx"),Se=s("./app/components/compactSelect.tsx");const xe=e=>{let{label:t,options:s,selected:o,onSelect:r}=e;const a=Object.entries(s).map((e=>{let[t,{label:s,tooltip:o,disabled:r}]=e;return{value:t,label:s,tooltip:o,disabled:r}}));return(0,re.tZ)(Se.Z,{options:a,onChange:e=>r(e.value),value:o,triggerProps:{prefix:t,style:{width:"100%"}}})};xe.displayName="ReleasesDropdown";const fe=xe;let ve;!function(e){e.USERS="users",e.SESSIONS="sessions"}(ve||(ve={}));const be={[ve.SESSIONS]:{label:(0,B.t)("Sessions")},[ve.USERS]:{label:(0,B.t)("Users")}};function je(e){let{selected:t,onSelect:s}=e;return(0,re.tZ)(Ce,{label:(0,B.t)("Display"),options:be,selected:t,onSelect:s})}je.displayName="ReleasesDisplayOptions";const Re=je,Ce=(0,r.Z)(fe,{target:"e1j1105m0"})("z-index:1;@media (max-width: ",(e=>e.theme.breakpoints.large),"){order:3;}");function we(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sm";return e<98?(0,re.tZ)(I.zC,{color:"red300",size:t}):e<99.5?(0,re.tZ)(I.FC,{color:"yellow300",size:t}):(0,re.tZ)(I.DL,{isCircled:!0,color:"green300",size:t})}function _e(e){let{index:t,project:s,organization:o,location:r,getHealthData:a,releaseVersion:i,activeDisplay:l,showPlaceholders:d,showReleaseAdoptionStages:p,isTopRelease:h,adoptionStages:u}=e;const m=(0,le.u)(),{id:g,newGroups:y}=s,Z=a.getCrashCount(i,g,ve.SESSIONS),S=a.getCrashFreeRate(i,g,l),x=a.get24hCountByProject(g,l),f=a.getTimeSeries(i,g,l),v=a.getAdoption(i,g,l),b=p&&u?.[s.slug]&&u?.[s.slug].stage,j=x&&b&&(0,V.Jl)(s.platform)?V.EB[b]:null;return(0,re.tZ)(ke,{"data-test-id":"release-card-project-row",children:(0,re.BX)(Je,{showReleaseAdoptionStages:p,children:[(0,re.tZ)(Ke,{children:(0,re.tZ)(ce.Z,{project:s,avatarSize:16})}),p&&(0,re.tZ)(st,{children:j?(0,re.tZ)(te.Z,{title:j.tooltipTitle,isHoverable:!0,children:(0,re.tZ)(he.Z,{to:{pathname:`/organizations/${o.slug}/releases/`,query:{...r.query,query:`release.stage:${b}`}},children:(0,re.tZ)(ye.Z,{type:j.type,children:j.name})})}):(0,re.tZ)(ue.Z,{})}),(0,re.tZ)(tt,{children:d?(0,re.tZ)(Ie,{width:"100px"}):(0,re.BX)(Be,{children:[(0,re.BX)("span",{children:[v?Math.round(v):"0","%"]}),(0,re.tZ)(n.ZP,{debounce:50,height:20,children:(0,re.tZ)(de.Z,{series:f,height:20,isGroupedByDate:!0,showTimeInTooltip:!0,hideDelay:50,tooltipFormatter:e=>{const t=l===ve.USERS?(0,B.tn)("user","users",e):(0,B.tn)("session","sessions",e);return`${e.toLocaleString()} ${t}`},colors:[m.purple300,m.gray200]})})]})}),(0,re.tZ)(ot,{children:d?(0,re.tZ)(Ie,{width:"60px"}):(0,Ze.ri)(S)?(0,re.BX)(Ee,{children:[we(S),(0,V.zB)(S)]}):(0,re.tZ)(ue.Z,{})}),(0,re.tZ)(rt,{children:d?(0,re.tZ)(Ie,{width:"30px"}):(0,Ze.ri)(Z)?(0,re.tZ)(te.Z,{title:(0,B.t)("Open in Issues"),children:(0,re.tZ)(J.Z,{to:(0,V.eY)(o.slug,s.id,i),children:(0,re.tZ)(pe.Z,{value:Z})})}):(0,re.tZ)(ue.Z,{})}),(0,re.tZ)(et,{children:(0,re.tZ)(te.Z,{title:(0,B.t)("Open in Issues"),children:(0,re.tZ)(J.Z,{to:(0,V.PS)(o.slug,s.id,i),children:(0,re.tZ)(pe.Z,{value:y||0})})})}),(0,re.tZ)(ze,{children:(0,re.tZ)(c.Z,{disabled:!h||0!==t,target:"view_release",children:(0,re.tZ)(G.ZP,{size:"xs",to:{pathname:`/organizations/${o.slug}/releases/${encodeURIComponent(i)}/`,query:{...(0,me.GN)(r.query),project:s.id,yAxis:void 0}},children:(0,B.t)("View")})})})]})})}we.displayName="getCrashFreeIcon",_e.displayName="ReleaseCardProjectRow";const Pe=_e,ke=(0,r.Z)(j.Lv,{target:"e6r8bj84"})("padding:",(0,A.Z)(1)," ",(0,A.Z)(2),";@media (min-width: ",(e=>e.theme.breakpoints.medium),"){font-size:",(e=>e.theme.fontSizeMedium),";}"),Ie=(0,r.Z)(ge.Z,{target:"e6r8bj83"})("height:15px;display:inline-block;position:relative;top:",(0,A.Z)(.25),";"),Be=(0,r.Z)("span",{target:"e6r8bj82"})("flex:1;display:inline-grid;grid-template-columns:30px 1fr;gap:",(0,A.Z)(1),";align-items:center;overflow:visible;"),Ee=(0,r.Z)("div",{target:"e6r8bj81"})("display:inline-grid;grid-auto-flow:column;grid-column-gap:",(0,A.Z)(1),";align-items:center;vertical-align:middle;"),ze=(0,r.Z)("div",{target:"e6r8bj80"})((e=>e.theme.overflowEllipsis),";line-height:20px;text-align:right;"),Ae=e=>{let{location:t,selection:s}=e;const o=t.query.healthStatsPeriod||T.$A.TWENTY_FOUR_HOURS,{pathname:r,query:a}=t;return(0,re.BX)(Te,{children:[s.datetime.period!==T.$A.TWENTY_FOUR_HOURS&&(0,re.tZ)(Ne,{to:{pathname:r,query:{...a,healthStatsPeriod:T.$A.TWENTY_FOUR_HOURS}},selected:o===T.$A.TWENTY_FOUR_HOURS,children:(0,B.t)("24h")}),(0,re.tZ)(Ne,{to:{pathname:r,query:{...a,healthStatsPeriod:T.$A.AUTO}},selected:o===T.$A.AUTO,children:s.datetime.start?(0,B.t)("Custom"):s.datetime.period??(0,B.t)("14d")})]})};Ae.displayName="ReleaseCardStatsPeriod";const Te=(0,r.Z)("div",{target:"e921hri1"})("display:grid;grid-auto-flow:column;grid-column-gap:",(0,A.Z)(.75),";flex:1;justify-content:flex-end;text-align:right;margin-left:",(0,A.Z)(.5),";"),Ne=(0,r.Z)(he.Z,{target:"e921hri0"})("color:",(e=>e.selected?e.theme.gray400:e.theme.gray300),";&:hover,&:focus{color:",(e=>e.selected?e.theme.gray400:e.theme.gray300),";}"),Oe=(0,U.Z)(Ae);function De(e,t){return 1===e.projects.length?e.projects[0].id:1===t.projects.length&&e.projects.map((e=>e.id)).includes(t.projects[0])?t.projects[0]:void 0}class qe extends a.Component{shouldComponentUpdate(e){return!this.props.reloading||!e.reloading}render(){const{release:e,organization:t,activeDisplay:s,location:o,reloading:r,selection:a,showHealthPlaceholders:n,isTopRelease:i,getHealthData:l,showReleaseAdoptionStages:d}=this.props,{version:p,commitCount:h,lastDeploy:u,dateCreated:m,versionInfo:g}=e,[y,Z]=Y()(e.projects.sort(((e,t)=>e.slug.localeCompare(t.slug))),(e=>!(a.projects.length>0&&!a.projects.includes(-1))||a.projects.includes(e.id)));return(0,re.BX)(Fe,{reloading:r?1:0,"data-test-id":"release-panel",children:[(0,re.BX)($e,{children:[(0,re.BX)(Xe,{children:[(0,re.tZ)(J.Z,{to:{pathname:`/organizations/${t.slug}/releases/${encodeURIComponent(p)}/`,query:{project:De(e,a)}},children:(0,re.tZ)(c.Z,{disabled:!i||y.length>1,target:"release_version",children:(0,re.tZ)(He,{children:(0,re.tZ)(Ue,{version:p,tooltipRawVersion:!0,anchor:!1})})})}),h>0&&(0,re.tZ)(ie,{release:e,withHeading:!1})]}),(0,re.BX)(Le,{children:[g?.package&&(0,re.tZ)(Ve,{ellipsisDirection:"left",children:g.package}),(0,re.tZ)(ee.Z,{date:u?.dateFinished||m}),u?.dateFinished&&` | ${u.environment}`]})]}),(0,re.BX)(Me,{children:[(0,re.tZ)(Qe,{lightText:!0,children:(0,re.BX)(Je,{showReleaseAdoptionStages:d,children:[(0,re.tZ)(Ke,{children:(0,B.t)("Project Name")}),d&&(0,re.tZ)(st,{children:(0,B.t)("Adoption Stage")}),(0,re.BX)(tt,{children:[(0,re.tZ)("span",{children:(0,B.t)("Adoption")}),(0,re.tZ)(Oe,{location:o})]}),(0,re.tZ)(ot,{children:(0,B.t)("Crash Free Rate")}),(0,re.tZ)(rt,{children:(0,B.t)("Crashes")}),(0,re.tZ)(et,{children:(0,B.t)("New Issues")})]})}),(0,re.tZ)(Ye,{children:(0,re.tZ)(W.Z,{expandButton:e=>{let{onExpand:t,numberOfHiddenItems:s}=e;return(0,re.tZ)(Ge,{children:(0,re.tZ)(G.ZP,{priority:"primary",size:"xs",onClick:t,children:(0,B._N)("Show [numberOfHiddenItems] More",{numberOfHiddenItems:s})})})},collapseButton:e=>{let{onCollapse:t}=e;return(0,re.tZ)(We,{children:(0,re.tZ)(G.ZP,{priority:"primary",size:"xs",onClick:t,children:(0,B.t)("Collapse")})})},children:y.map(((r,a)=>(0,re.tZ)(Pe,{index:a,organization:t,project:r,location:o,getHealthData:l,releaseVersion:e.version,activeDisplay:s,showPlaceholders:n,showReleaseAdoptionStages:d,isTopRelease:i,adoptionStages:e.adoptionStages},`${e.version}-${r.slug}-row`)))})}),Z.length>0&&(0,re.tZ)(at,{"data-test-id":"hidden-projects",children:(0,re.tZ)(te.Z,{title:function(){const e=Z.map((e=>e.slug)).slice(0,5),t=Z.length-e.length;return t&&e.push((0,B.tn)("and %s more","and %s more",t)),e.join(", ")}(),children:(0,re.tZ)(K.Z,{children:1===Z.length?(0,B._N)("[number:1] hidden project",{number:(0,re.tZ)("strong",{})}):(0,B._N)("[number] hidden projects",{number:(0,re.tZ)("strong",{children:Z.length})})})})})]})]})}}qe.displayName="ReleaseCard";const He=(0,r.Z)("div",{target:"e1n0mlk219"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),Ue=(0,r.Z)(se.Z,{target:"e1n0mlk218"})((e=>e.theme.overflowEllipsis),";"),Fe=(0,r.Z)(j.s_,{target:"e1n0mlk217"})("opacity:",(e=>e.reloading?.5:1),";pointer-events:",(e=>e.reloading?"none":"auto"),";@media (min-width: ",(e=>e.theme.breakpoints.medium),"){display:flex;}"),$e=(0,r.Z)("div",{target:"e1n0mlk216"})("padding:",(0,A.Z)(1.5)," ",(0,A.Z)(2),";flex-shrink:0;@media (min-width: ",(e=>e.theme.breakpoints.medium),"){border-right:1px solid ",(e=>e.theme.border),";min-width:260px;width:22%;max-width:300px;}"),Le=(0,r.Z)("div",{target:"e1n0mlk215"})("font-size:",(e=>e.theme.fontSizeSmall),";color:",(e=>e.theme.gray400),";"),Ve=(0,r.Z)(K.Z,{target:"e1n0mlk214"})("font-size:",(e=>e.theme.fontSizeMedium),";color:",(e=>e.theme.textColor),";"),Me=(0,r.Z)("div",{target:"e1n0mlk213"})("border-top:1px solid ",(e=>e.theme.border),";flex-grow:1;display:grid;@media (min-width: ",(e=>e.theme.breakpoints.medium),"){border-top:none;}"),Xe=(0,r.Z)("div",{target:"e1n0mlk212"})("font-size:",(e=>e.theme.fontSizeExtraLarge),";display:grid;grid-template-columns:minmax(0, 1fr) max-content;gap:",(0,A.Z)(2),";align-items:center;"),Qe=(0,r.Z)(j.V9,{target:"e1n0mlk211"})("border-top-left-radius:0;padding:",(0,A.Z)(1.5)," ",(0,A.Z)(2),";font-size:",(e=>e.theme.fontSizeSmall),";"),Ye=(0,r.Z)("div",{target:"e1n0mlk210"})({name:"bjn8wh",styles:"position:relative"}),Ge=(0,r.Z)("div",{target:"e1n0mlk29"})("position:absolute;width:100%;bottom:0;display:flex;align-items:center;justify-content:center;background-image:linear-gradient(\n    180deg,\n    ",(e=>X()(e.theme.background).alpha(0).string())," 0,\n    ",(e=>e.theme.background),"\n  );background-repeat:repeat-x;border-bottom:",(0,A.Z)(1)," solid ",(e=>e.theme.background),";border-top:",(0,A.Z)(1)," solid transparent;border-bottom-right-radius:",(e=>e.theme.borderRadius),";@media (max-width: ",(e=>e.theme.breakpoints.medium),"){border-bottom-left-radius:",(e=>e.theme.borderRadius),";}"),We=(0,r.Z)("div",{target:"e1n0mlk28"})({name:"rsdkje",styles:"display:flex;align-items:center;justify-content:center;height:41px"}),Je=(0,r.Z)("div",{target:"e1n0mlk27"})("display:grid;grid-template-columns:1fr 1.4fr 0.6fr 0.7fr;grid-column-gap:",(0,A.Z)(1),";align-items:center;width:100%;@media (min-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:1fr 1fr 1fr 0.5fr 0.5fr 0.5fr;}@media (min-width: ",(e=>e.theme.breakpoints.medium),"){grid-template-columns:1fr 1fr 1fr 0.5fr 0.5fr 0.5fr;}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){",(e=>e.showReleaseAdoptionStages?"\n      grid-template-columns: 1fr 0.7fr 1fr 1fr 0.7fr 0.7fr 0.5fr;\n    ":"\n      grid-template-columns: 1fr 1fr 1fr 0.7fr 0.7fr 0.5fr;\n    "),";}"),Ke=(0,r.Z)("div",{target:"e1n0mlk26"})((e=>e.theme.overflowEllipsis),";line-height:20px;"),et=(0,r.Z)(Ke,{target:"e1n0mlk25"})("font-variant-numeric:tabular-nums;@media (min-width: ",(e=>e.theme.breakpoints.small),"){text-align:right;}"),tt=(0,r.Z)(Ke,{target:"e1n0mlk24"})("display:none;font-variant-numeric:tabular-nums;@media (min-width: ",(e=>e.theme.breakpoints.small),"){display:flex;overflow:visible;}&>*{flex:1;}"),st=(0,r.Z)(Ke,{target:"e1n0mlk23"})("display:none;font-variant-numeric:tabular-nums;@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){display:flex;overflow:visible;}"),ot=(0,r.Z)(Ke,{target:"e1n0mlk22"})("font-variant-numeric:tabular-nums;@media (min-width: ",(e=>e.theme.breakpoints.small),"){text-align:center;}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){text-align:right;}"),rt=(0,r.Z)(Ke,{target:"e1n0mlk21"})("display:none;font-variant-numeric:tabular-nums;@media (min-width: ",(e=>e.theme.breakpoints.small),"){display:block;text-align:right;}"),at=(0,r.Z)("div",{target:"e1n0mlk20"})("display:flex;align-items:center;font-size:",(e=>e.theme.fontSizeSmall),";padding:0 ",(0,A.Z)(2),";border-top:1px solid ",(e=>e.theme.border),";overflow:hidden;height:24px;line-height:24px;color:",(e=>e.theme.gray300),";background-color:",(e=>e.theme.backgroundSecondary),";border-bottom-right-radius:",(e=>e.theme.borderRadius),";@media (max-width: ",(e=>e.theme.breakpoints.medium),"){border-bottom-left-radius:",(e=>e.theme.borderRadius),";}"),nt=qe;var it=s("../node_modules/lodash/compact.js"),lt=s.n(it),dt=s("../node_modules/moment/moment.js"),pt=s.n(dt),ct=s("./app/components/charts/chartZoom.tsx"),ht=s("./app/components/charts/lineChart.tsx"),ut=s("./app/components/charts/sessionsRequest.tsx"),mt=s("./app/components/charts/styles.tsx"),gt=s("./app/components/charts/transitionChart.tsx"),yt=s("./app/components/charts/transparentLoadingMask.tsx"),Zt=s("./app/components/charts/utils.tsx"),St=s("./app/components/organizations/pageFilters/parse.tsx"),xt=s("./app/utils/formatters.tsx"),ft=s("./app/utils/queryString.tsx"),vt=s("./app/utils/sessions.tsx"),bt=s("./app/utils/withApi.tsx"),jt=s("../node_modules/lodash/isEqual.js"),Rt=s.n(jt),Ct=s("../node_modules/lodash/omit.js"),wt=s.n(Ct),_t=s("./app/actionCreators/indicator.tsx"),Pt=s("./app/utils/tokenizeSearch.tsx");function kt(e){return wt()(e,["api","organization","children","selection.datetime.utc","location"])}function It(e){const t=(0,Zt.Nm)(e);return t>=Zt.$i?"1d":t>=Zt.IZ?"6h":t>Zt.w3?"4h":"1h"}function Bt(e,t,s){return t.series[s]?.forEach(((t,s)=>e[s]=(e[s]??0)+t)),e}function Et(e){switch(e){case ve.USERS:return T.kI.USERS;case ve.SESSIONS:default:return T.kI.SESSIONS}}class zt extends a.Component{constructor(){super(...arguments),(0,o.Z)(this,"state",{loading:!1,errored:!1,statusCountByReleaseInPeriod:null,totalCountByReleaseIn24h:null,totalCountByProjectIn24h:null,statusCountByProjectInPeriod:null,totalCountByReleaseInPeriod:null,totalCountByProjectInPeriod:null}),(0,o.Z)(this,"fetchData",(async()=>{const{api:e,healthStatsPeriod:t,disable:s}=this.props;if(s)return;e.clear(),this.setState({loading:!0,errored:!1,statusCountByReleaseInPeriod:null,totalCountByReleaseIn24h:null,totalCountByProjectIn24h:null});const o=[this.fetchStatusCountByReleaseInPeriod(),this.fetchTotalCountByReleaseIn24h(),this.fetchTotalCountByProjectIn24h()];t===T.$A.AUTO&&(o.push(this.fetchStatusCountByProjectInPeriod()),o.push(this.fetchTotalCountByReleaseInPeriod()),o.push(this.fetchTotalCountByProjectInPeriod()));try{const[e,t,s,r,a,n]=await Promise.all(o);this.setState({loading:!1,statusCountByReleaseInPeriod:e,totalCountByReleaseIn24h:t,totalCountByProjectIn24h:s,statusCountByProjectInPeriod:r,totalCountByReleaseInPeriod:a,totalCountByProjectInPeriod:n})}catch(e){(0,_t.Iw)(e.responseJSON?.detail??(0,B.t)("Error loading health data")),this.setState({loading:!1,errored:!0})}})),(0,o.Z)(this,"getHealthData",(()=>({getCrashCount:this.getCrashCount,getCrashFreeRate:this.getCrashFreeRate,get24hCountByRelease:this.get24hCountByRelease,get24hCountByProject:this.get24hCountByProject,getTimeSeries:this.getTimeSeries,getAdoption:this.getAdoption}))),(0,o.Z)(this,"getCrashCount",((e,t,s)=>{const{statusCountByReleaseInPeriod:o}=this.state,r=Et(s);return o?.groups.find((s=>{let{by:o}=s;return o.release===e&&o.project===t&&"crashed"===o["session.status"]}))?.totals[r]})),(0,o.Z)(this,"getCrashFreeRate",((e,t,s)=>{const{statusCountByReleaseInPeriod:o}=this.state,r=Et(s),a=o?.groups.filter((s=>{let{by:o}=s;return o.release===e&&o.project===t}))?.reduce(((e,t)=>e+t.totals[r]),0),n=this.getCrashCount(e,t,s);return(0,Ze.ri)(a)&&0!==a?(0,V.Mf)(100-(0,Ze.aQ)(n??0,a??0)):null})),(0,o.Z)(this,"get24hCountByRelease",((e,t,s)=>{const{totalCountByReleaseIn24h:o}=this.state,r=Et(s);return o?.groups.filter((s=>{let{by:o}=s;return o.release===e&&o.project===t}))?.reduce(((e,t)=>e+t.totals[r]),0)})),(0,o.Z)(this,"getPeriodCountByRelease",((e,t,s)=>{const{totalCountByReleaseInPeriod:o}=this.state,r=Et(s);return o?.groups.filter((s=>{let{by:o}=s;return o.release===e&&o.project===t}))?.reduce(((e,t)=>e+t.totals[r]),0)})),(0,o.Z)(this,"get24hCountByProject",((e,t)=>{const{totalCountByProjectIn24h:s}=this.state,o=Et(t);return s?.groups.filter((t=>{let{by:s}=t;return s.project===e}))?.reduce(((e,t)=>e+t.totals[o]),0)})),(0,o.Z)(this,"getPeriodCountByProject",((e,t)=>{const{totalCountByProjectInPeriod:s}=this.state,o=Et(t);return s?.groups.filter((t=>{let{by:s}=t;return s.project===e}))?.reduce(((e,t)=>e+t.totals[o]),0)})),(0,o.Z)(this,"getTimeSeries",((e,t,s)=>{const{healthStatsPeriod:o}=this.props;return o===T.$A.AUTO?this.getPeriodTimeSeries(e,t,s):this.get24hTimeSeries(e,t,s)})),(0,o.Z)(this,"get24hTimeSeries",((e,t,s)=>{const{totalCountByReleaseIn24h:o,totalCountByProjectIn24h:r}=this.state,a=Et(s),n=r?.intervals??[],i=r?.groups.find((e=>{let{by:s}=e;return s.project===t}))?.series[a],l=o?.groups.find((s=>{let{by:o}=s;return o.project===t&&o.release===e}))?.series[a];return[{seriesName:(0,B.t)("This Release"),data:n?.map(((e,t)=>({name:pt()(e).valueOf(),value:l?.[t]??0})))},{seriesName:(0,B.t)("Total Project"),data:n?.map(((e,t)=>({name:pt()(e).valueOf(),value:i?.[t]??0}))),z:0}]})),(0,o.Z)(this,"getPeriodTimeSeries",((e,t,s)=>{const{statusCountByReleaseInPeriod:o,statusCountByProjectInPeriod:r}=this.state,a=Et(s),n=r?.intervals??[],i=r?.groups.filter((e=>{let{by:s}=e;return s.project===t}))?.reduce(((e,t)=>Bt(e,t,a)),[]),l=o?.groups.filter((s=>{let{by:o}=s;return o.project===t&&o.release===e}))?.reduce(((e,t)=>Bt(e,t,a)),[]);return[{seriesName:(0,B.t)("This Release"),data:n?.map(((e,t)=>({name:pt()(e).valueOf(),value:l?.[t]??0})))},{seriesName:(0,B.t)("Total Project"),data:n?.map(((e,t)=>({name:pt()(e).valueOf(),value:i?.[t]??0}))),z:0}]})),(0,o.Z)(this,"getAdoption",((e,t,s)=>{const{healthStatsPeriod:o}=this.props,r=(o===T.$A.AUTO?this.getPeriodCountByRelease:this.get24hCountByRelease)(e,t,s),a=(o===T.$A.AUTO?this.getPeriodCountByProject:this.get24hCountByProject)(t,s);return(0,Ze.ri)(r)&&(0,Ze.ri)(a)?(0,Ze.aQ)(r,a):void 0}))}componentDidMount(){this.fetchData()}componentDidUpdate(e){this.props.releasesReloading||Rt()(kt(e),kt(this.props))||this.fetchData()}get path(){const{organization:e}=this.props;return`/organizations/${e.slug}/sessions/`}get baseQueryParams(){const{location:e,selection:t,defaultStatsPeriod:s,releases:o}=this.props;return{query:new Pt.MY(o.reduce(((e,t,s,o)=>(e.push(`release:"${t}"`),s<o.length-1&&e.push("OR"),e)),[])).formatString(),interval:It(t.datetime),...(0,St.fK)(l()(e.query,Object.values(P.nF)),{defaultStatsPeriod:s})}}async fetchStatusCountByReleaseInPeriod(){const{api:e,display:t}=this.props;return await e.requestPromise(this.path,{query:{...this.baseQueryParams,field:[...new Set([...t.map((e=>Et(e))),"sum(session)"])],groupBy:["project","release","session.status"]}})}async fetchStatusCountByProjectInPeriod(){const{api:e,display:t}=this.props;return await e.requestPromise(this.path,{query:{...this.baseQueryParams,query:void 0,field:[...new Set([...t.map((e=>Et(e))),"sum(session)"])],groupBy:["project","session.status"]}})}async fetchTotalCountByReleaseIn24h(){const{api:e,display:t}=this.props;return await e.requestPromise(this.path,{query:{...this.baseQueryParams,field:t.map((e=>Et(e))),groupBy:["project","release"],interval:"1h",statsPeriod:"24h"}})}async fetchTotalCountByReleaseInPeriod(){const{api:e,display:t}=this.props;return await e.requestPromise(this.path,{query:{...this.baseQueryParams,field:t.map((e=>Et(e))),groupBy:["project","release"]}})}async fetchTotalCountByProjectIn24h(){const{api:e,display:t}=this.props;return await e.requestPromise(this.path,{query:{...this.baseQueryParams,query:void 0,field:t.map((e=>Et(e))),groupBy:["project"],interval:"1h",statsPeriod:"24h"}})}async fetchTotalCountByProjectInPeriod(){const{api:e,display:t}=this.props;return await e.requestPromise(this.path,{query:{...this.baseQueryParams,query:void 0,field:t.map((e=>Et(e))),groupBy:["project"]}})}render(){const{loading:e,errored:t}=this.state,{children:s}=this.props;return s({isHealthLoading:e,errored:t,getHealthData:this.getHealthData()})}}zt.displayName="ReleasesRequest";const At=(0,bt.Z)(zt);class Tt extends a.Component{constructor(){super(...arguments),(0,o.Z)(this,"handleClick",(e=>{const{organization:t,router:s,selection:o,location:r}=this.props,a=o.projects[0];s.push({pathname:`/organizations/${t?.slug}/releases/${encodeURIComponent(e.seriesId)}/`,query:{project:a,environment:r.query.environment}})}))}getInterval(){const{organization:e,location:t}=this.props,s={start:(0,ft.ro)(t.query.start),end:(0,ft.ro)(t.query.end),period:(0,ft.ro)(t.query.statsPeriod)},o=(0,Zt.Nm)(s);return e.features.includes("minute-resolution-sessions")&&o<360?"10m":o>=Zt.IZ?"1d":"1h"}getReleasesSeries(e){const{activeDisplay:t}=this.props;let s=e?.groups.map((e=>e.by.release))??[];return e?.groups&&e.groups.length>50&&(s=e.groups.sort(((e,t)=>t.totals["sum(session)"]-e.totals["sum(session)"])).slice(0,50).map((e=>e.by.release))),s?s.map((s=>({id:s,seriesName:(0,xt.ko)(s),data:(0,vt.hD)([e?.groups.find((e=>{let{by:t}=e;return t.release===s}))],e?.groups,e?.intervals,Et(t)),emphasis:{focus:"series"}}))):null}renderEmpty(){return(0,re.BX)(j.s_,{children:[(0,re.BX)(j.N,{withPadding:!0,children:[(0,re.tZ)(Ot,{children:(0,re.tZ)(ge.Z,{height:"24px"})}),(0,re.tZ)(ge.Z,{height:"200px"})]}),(0,re.tZ)(qt,{children:(0,re.tZ)(ge.Z,{height:"34px"})})]})}render(){const{activeDisplay:e,router:t,selection:s,api:o,organization:r,location:a}=this.props,{start:n,end:i,period:d,utc:p}=s.datetime,c=this.getInterval(),h=Et(e);return(0,re.tZ)(ut.Z,{api:o,organization:r,interval:c,groupBy:["release"],field:[h],...(0,St.fK)(l()(a.query,Object.values(P.nF))),children:s=>{let{response:o,loading:r,reloading:a}=s;const l=(0,vt.sA)(o?.groups,h),u=this.getReleasesSeries(o);if(r)return this.renderEmpty();if(!u?.length)return null;const m=u[0].data.length,g=u[0].data.map((e=>e.name)),y=-1===u.findIndex((e=>e.data[m-1].value>0));return(0,re.BX)(j.s_,{children:[(0,re.BX)(j.N,{withPadding:!0,children:[(0,re.tZ)(Ot,{children:(0,re.tZ)(Dt,{children:(0,B.t)("Release Adoption")})}),(0,re.BX)(gt.Z,{loading:r,reloading:a,children:[(0,re.tZ)(yt.Z,{visible:a}),(0,re.tZ)(ct.Z,{router:t,period:d,utc:p,start:n,end:i,children:e=>(0,re.tZ)(ht.w,{...e,grid:{left:"10px",right:"10px",top:"40px",bottom:"0px"},series:u.map((e=>({...e,data:y?e.data.slice(0,-1):e.data}))),yAxis:{min:0,max:100,type:"value",interval:10,splitNumber:10,data:[0,10,20,30,40,50,60,70,80,90,100],axisLabel:{formatter:"{value}%"}},xAxis:{show:!0,min:g[0],max:g[m-1],type:"time",data:g},tooltip:{formatter:e=>{const t=Array.isArray(e)?e:[e],s=t[0].data[0],[r,a,n,...i]=t.filter((e=>e.data[1]>0)).sort(((e,t)=>t.data[1]-e.data[1])),l=i.reduce(((e,t)=>e+t.data[1]),0),d=lt()([r,a,n]);if(i.length&&d.push({seriesName:(0,B.tn)("%s Other","%s Others",i.length),data:[s,l],marker:'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;"></span>'}),!d.length)return"<div/>";const p=(0,St.su)(c)||{periodLength:"d",period:"1"},h=pt()(s).format("MMM D LT"),u=(t[0].dataIndex===m-1?pt()(o?.end):pt()(s).add(parseInt(p.period,10),p.periodLength)).format("MMM D LT");return['<div class="tooltip-series">',d.map((e=>`<div><span class="tooltip-label">${e.marker}<strong>${e.seriesName&&(0,Zt.oS)(e.seriesName,32)}</strong></span>${e.data[1].toFixed(2)}%</div>`)).join(""),"</div>",`<div class="tooltip-date">${h} &mdash; ${u}</div>`,'<div class="tooltip-arrow"></div>'].join("")}},onClick:this.handleClick})})]})]}),(0,re.tZ)(qt,{children:(0,re.BX)(mt.m2,{children:[(0,re.tZ)(mt.OT,{children:(0,B._N)("Total [display]",{display:e===ve.USERS?"Users":"Sessions"})}),(0,re.tZ)(mt.uN,{children:(0,re.tZ)(pe.Z,{value:l||0})})]})})]})}})}}Tt.displayName="ReleasesAdoptionChart";const Nt=(0,bt.Z)(Tt),Ot=(0,r.Z)(mt.ws,{target:"e1vlt8wr2"})("margin-bottom:",(0,A.Z)(1),";"),Dt=(0,r.Z)("header",{target:"e1vlt8wr1"})({name:"ho1qnd",styles:"display:flex;flex-direction:row"}),qt=(0,r.Z)(j.jH,{target:"e1vlt8wr0"})("display:flex;align-items:center;padding:",(0,A.Z)(1)," 20px;");var Ht=s("./app/views/releases/list/releasesPromo.tsx");let Ut;function Ft(e){let{selected:t,selectedDisplay:s,onSelect:o,environments:r}=e;const a={[Ut.DATE]:{label:(0,B.t)("Date Created")},[Ut.SESSIONS]:{label:(0,B.t)("Total Sessions")},...s===ve.USERS?{[Ut.USERS_24_HOURS]:{label:(0,B.t)("Active Users")},[Ut.CRASH_FREE_USERS]:{label:(0,B.t)("Crash Free Users")}}:{[Ut.SESSIONS_24_HOURS]:{label:(0,B.t)("Active Sessions")},[Ut.CRASH_FREE_SESSIONS]:{label:(0,B.t)("Crash Free Sessions")}},[Ut.BUILD]:{label:(0,B.t)("Build Number")},[Ut.SEMVER]:{label:(0,B.t)("Semantic Version")}},n=1!==r.length;return a[Ut.ADOPTION]={label:(0,B.t)("Date Adopted"),disabled:n,tooltip:n?(0,B.t)("Select one environment to use this sort option."):void 0},(0,re.tZ)(Lt,{label:(0,B.t)("Sort By"),options:a,selected:t,onSelect:o})}!function(e){e.CRASH_FREE_USERS="crash_free_users",e.CRASH_FREE_SESSIONS="crash_free_sessions",e.USERS_24_HOURS="users_24h",e.SESSIONS_24_HOURS="sessions_24h",e.SESSIONS="sessions",e.DATE="date",e.BUILD="build",e.SEMVER="semver",e.ADOPTION="adoption"}(Ut||(Ut={})),Ft.displayName="ReleasesSortOptions";const $t=Ft,Lt=(0,r.Z)(fe,{target:"e1oouhtz0"})("z-index:2;@media (max-width: ",(e=>e.theme.breakpoints.large),"){order:2;}");let Vt;!function(e){e.ACTIVE="active",e.ARCHIVED="archived"}(Vt||(Vt={}));const Mt={[Vt.ACTIVE]:{label:(0,B.t)("Active")},[Vt.ARCHIVED]:{label:(0,B.t)("Archived")}};function Xt(e){let{selected:t,onSelect:s}=e;return(0,re.tZ)(Yt,{label:(0,B.t)("Status"),options:Mt,selected:t,onSelect:s})}Xt.displayName="ReleasesStatusOptions";const Qt=Xt,Yt=(0,r.Z)(fe,{target:"e1hsr3x60"})("z-index:3;@media (max-width: ",(e=>e.theme.breakpoints.large),"){order:1;}");class Gt extends $.Z{constructor(){super(...arguments),(0,o.Z)(this,"shouldReload",!0),(0,o.Z)(this,"shouldRenderBadRequests",!0),(0,o.Z)(this,"handleSearch",(e=>{const{location:t,router:s}=this.props;s.push({...t,query:{...t.query,cursor:void 0,query:e}})})),(0,o.Z)(this,"handleSortBy",(e=>{const{location:t,router:s}=this.props;s.push({...t,query:{...t.query,cursor:void 0,sort:e}})})),(0,o.Z)(this,"handleDisplay",(e=>{const{location:t,router:s}=this.props;let o=t.query.sort;o===Ut.USERS_24_HOURS&&e===ve.SESSIONS?o=Ut.SESSIONS_24_HOURS:o===Ut.SESSIONS_24_HOURS&&e===ve.USERS?o=Ut.USERS_24_HOURS:o===Ut.CRASH_FREE_USERS&&e===ve.SESSIONS?o=Ut.CRASH_FREE_SESSIONS:o===Ut.CRASH_FREE_SESSIONS&&e===ve.USERS&&(o=Ut.CRASH_FREE_USERS),s.push({...t,query:{...t.query,cursor:void 0,display:e,sort:o}})})),(0,o.Z)(this,"handleStatus",(e=>{const{location:t,router:s}=this.props;s.push({...t,query:{...t.query,cursor:void 0,status:e}})})),(0,o.Z)(this,"trackAddReleaseHealth",(()=>{const{organization:e,selection:t}=this.props;e.id&&t.projects[0]&&(0,N.ec)({eventKey:"releases_list.click_add_release_health",eventName:"Releases List: Click Add Release Health",organization_id:parseInt(e.id,10),project_id:t.projects[0]})})),(0,o.Z)(this,"tagValueLoader",((e,t)=>{const{location:s,organization:o}=this.props,{project:r}=s.query;return(0,d.Fo)({api:this.api,orgSlug:o.slug,tagKey:e,search:t,projectIds:r?[r]:void 0,endpointParams:s.query})})),(0,o.Z)(this,"getTagValues",(async(e,t)=>(await this.tagValueLoader(e.key,t)).map((e=>{let{value:t}=e;return t}))))}getTitle(){return(0,q.Z)((0,B.t)("Releases"),this.props.organization.slug,!1)}getEndpoints(){const{organization:e,location:t}=this.props,{statsPeriod:s}=t.query,o=this.getSort(),r=this.getStatus(),a={...l()(t.query,["project","environment","cursor","query","sort"]),summaryStatsPeriod:s,per_page:20,flatten:o===Ut.DATE?0:1,adoptionStages:1,status:r===Vt.ARCHIVED?T.dE.Archived:T.dE.Active};return[["releases",`/organizations/${e.slug}/releases/`,{query:a},{disableEntireQuery:!0}]]}componentDidUpdate(e,t){super.componentDidUpdate(e,t),t.releases!==this.state.releases&&(0,n.be)()}getQuery(){const{query:e}=this.props.location.query;return"string"==typeof e?e:void 0}getSort(){const{environments:e}=this.props.selection,{sort:t}=this.props.location.query;return t===Ut.ADOPTION&&1!==e.length?Ut.DATE:Object.values(Ut).includes(t)?t:Ut.DATE}getDisplay(){const{display:e}=this.props.location.query;return e===ve.USERS?ve.USERS:ve.SESSIONS}getStatus(){const{status:e}=this.props.location.query;return e===Vt.ARCHIVED?Vt.ARCHIVED:Vt.ACTIVE}getSelectedProject(){const{selection:e,projects:t}=this.props,s=e.projects&&1===e.projects.length&&e.projects[0];return t?.find((e=>e.id===`${s}`))}get projectHasSessions(){return this.getSelectedProject()?.hasSessions??null}shouldShowLoadingIndicator(){const{loading:e,releases:t,reloading:s}=this.state;return e&&!s||e&&!t?.length}renderLoading(){return this.renderBody()}renderError(){return this.renderBody()}get shouldShowQuickstart(){const{releases:e}=this.state,t=this.getSelectedProject(),s=t?.features.includes("releases");return!e?.length&&!s&&t}renderEmptyMessage(){const{location:e}=this.props,{statsPeriod:t,start:s,end:o}=e.query,r=this.getQuery(),a=this.getSort(),n=this.getStatus(),i=s&&o?(0,B.t)("time range"):(0,f.TI)(t||_.GY).toLowerCase();return r&&r.length?(0,re.tZ)(j.s_,{children:(0,re.tZ)(u.Z,{icon:(0,re.tZ)(I.jV,{size:"xl"}),size:"large",children:`${(0,B.t)("There are no releases that match")}: '${r}'.`})}):a===Ut.USERS_24_HOURS?(0,re.tZ)(j.s_,{children:(0,re.tZ)(u.Z,{icon:(0,re.tZ)(I.jV,{size:"xl"}),size:"large",children:(0,B.t)("There are no releases with active user data (users in the last 24 hours).")})}):a===Ut.SESSIONS_24_HOURS?(0,re.tZ)(j.s_,{children:(0,re.tZ)(u.Z,{icon:(0,re.tZ)(I.jV,{size:"xl"}),size:"large",children:(0,B.t)("There are no releases with active session data (sessions in the last 24 hours).")})}):a===Ut.BUILD||a===Ut.SEMVER?(0,re.tZ)(j.s_,{children:(0,re.tZ)(u.Z,{icon:(0,re.tZ)(I.jV,{size:"xl"}),size:"large",children:(0,B.t)("There are no releases with semantic versioning.")})}):a!==Ut.DATE?(0,re.tZ)(j.s_,{children:(0,re.tZ)(u.Z,{icon:(0,re.tZ)(I.jV,{size:"xl"}),size:"large",children:`${(0,B.t)("There are no releases with data in the")} ${i}.`})}):n===Vt.ARCHIVED?(0,re.tZ)(j.s_,{children:(0,re.tZ)(u.Z,{icon:(0,re.tZ)(I.jV,{size:"xl"}),size:"large",children:(0,B.t)("There are no archived releases.")})}):(0,re.tZ)(j.s_,{children:(0,re.tZ)(u.Z,{icon:(0,re.tZ)(I.jV,{size:"xl"}),size:"large",children:`${(0,B.t)("There are no releases with data in the")} ${i}.`})})}renderHealthCta(){const{organization:e}=this.props,{releases:t}=this.state,s=this.getSelectedProject();return s&&!1===this.projectHasSessions&&t?.length?(0,re.tZ)(D.Z,{orgId:e.slug,slugs:[s.slug],children:e=>{let{projects:t,initiallyLoaded:s,fetchError:o}=e;const r=t&&1===t.length&&t[0],a=r&&r.platform&&k.an.includes(r.platform);return s&&!o&&a?(0,re.tZ)(p.Z,{type:"info",showIcon:!0,children:(0,re.BX)(Wt,{children:[(0,re.tZ)("div",{children:(0,B.t)("To track user adoption, crash rates, session data and more, add Release Health to your current setup.")}),(0,re.tZ)(g.Z,{href:"https://docs.sentry.io/product/releases/setup/#release-health",onClick:this.trackAddReleaseHealth,children:(0,B.t)("Add Release Health")})]})}):null}}):null}renderInnerBody(e,t){const{location:s,selection:o,organization:r,router:n}=this.props,{releases:i,reloading:l,releasesPageLinks:d}=this.state,p=this.getSelectedProject(),c=p?.features.includes("releases");return this.shouldShowLoadingIndicator()?(0,re.tZ)(y.Z,{}):!i?.length&&c?this.renderEmptyMessage():this.shouldShowQuickstart?(0,re.tZ)(Ht.Z,{organization:r,project:p}):(0,re.tZ)(At,{releases:i.map((e=>{let{version:t}=e;return t})),organization:r,selection:o,location:s,display:[this.getDisplay()],releasesReloading:l,healthStatsPeriod:s.query.healthStatsPeriod,children:c=>{let{isHealthLoading:h,getHealthData:u}=c;const m=1===o.projects?.length&&o.projects[0]!==P.mP,g=p?.platform&&(0,V.Jl)(p.platform);return(0,re.BX)(a.Fragment,{children:[m&&this.projectHasSessions&&g&&(0,re.tZ)(Nt,{organization:r,selection:o,location:s,router:n,activeDisplay:e}),i.map(((a,n)=>(0,re.tZ)(nt,{activeDisplay:e,release:a,organization:r,location:s,selection:o,reloading:l,showHealthPlaceholders:h,isTopRelease:0===n,getHealthData:u,showReleaseAdoptionStages:t},`${a.version}-${a.projects[0].slug}`))),(0,re.tZ)(b.Z,{pageLinks:d})]})}})}renderBody(){const{organization:e,selection:t}=this.props,{releases:s,reloading:o,error:r}=this.state,a=this.getSort(),n=this.getStatus(),i=this.getDisplay(),l=t.projects.map((e=>`${e}`)).map(E.Z.getById).some((e=>e?.platform&&(0,V.Jl)(e.platform)))&&1===t.environments.length,d=s&&s.length>0;return(0,re.tZ)(x.Z,{showAbsolute:!1,children:(0,re.tZ)(z.JH,{children:(0,re.BX)(Z.Z,{organization:e,children:[(0,re.tZ)(z.mr,{children:(0,re.tZ)(v.Z,{children:(0,B.t)("Releases")})}),this.renderHealthCta(),(0,re.BX)(Jt,{condensed:!0,children:[(0,re.tZ)(c.Z,{target:"release_projects",children:(0,re.tZ)(R.Z,{})}),(0,re.tZ)(m.Z,{}),(0,re.tZ)(h.Z,{alignDropdown:"left",disallowArbitraryRelativeRanges:!0,hint:(0,B.t)("Changing this date range will recalculate the release metrics.")})]}),this.shouldShowQuickstart?null:(0,re.BX)(Kt,{children:[(0,re.tZ)(c.Z,{target:"releases_search",position:"bottom",disabled:!d,children:(0,re.tZ)(es,{searchSource:"releases",query:this.getQuery(),placeholder:(0,B.t)("Search by version, build, package, or stage"),hasRecentSearches:!1,supportedTags:{...O.jg,release:{key:"release",name:"release"}},maxMenuHeight:500,supportedTagType:w.q.PROPERTY,onSearch:this.handleSearch,onGetTagValues:this.getTagValues})}),(0,re.tZ)(Qt,{selected:n,onSelect:this.handleStatus}),(0,re.tZ)($t,{selected:a,selectedDisplay:i,onSelect:this.handleSortBy,environments:t.environments}),(0,re.tZ)(Re,{selected:i,onSelect:this.handleDisplay})]}),!o&&n===Vt.ARCHIVED&&!!s?.length&&(0,re.tZ)(L.Z,{multi:!0}),r?super.renderError(new Error("Unable to load all required endpoints")):this.renderInnerBody(i,l)]})})})}}const Wt=(0,r.Z)("div",{target:"e14zcdo93"})("display:flex;align-items:flex-start;justify-content:flex-start;gap:",(0,A.Z)(2),";>*:nth-child(1){flex:1;}flex-direction:column;@media (min-width: ",(e=>e.theme.breakpoints.medium),"){flex-direction:row;}"),Jt=(0,r.Z)(S.Z,{target:"e14zcdo92"})("margin-bottom:",(0,A.Z)(2),";"),Kt=(0,r.Z)("div",{target:"e14zcdo91"})("display:grid;grid-template-columns:1fr repeat(3, max-content);gap:",(0,A.Z)(2),";margin-bottom:",(0,A.Z)(2),";@media (max-width: ",(e=>e.theme.breakpoints.medium),"){grid-template-columns:repeat(3, 1fr);}@media (max-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:minmax(0, 1fr);}"),es=(0,r.Z)(C.Z,{target:"e14zcdo90"})("@media (max-width: ",(e=>e.theme.breakpoints.medium),"){grid-column:1/-1;}"),ts=(0,F.Z)((0,H.Z)((0,U.Z)(Gt)))},"../node_modules/lodash/_baseMean.js":(e,t,s)=>{var o=s("../node_modules/lodash/_baseSum.js");e.exports=function(e,t){var s=null==e?0:e.length;return s?o(e,t)/s:NaN}},"../node_modules/lodash/_baseSum.js":e=>{e.exports=function(e,t){for(var s,o=-1,r=e.length;++o<r;){var a=t(e[o]);void 0!==a&&(s=void 0===s?a:s+a)}return s}},"../node_modules/lodash/mean.js":(e,t,s)=>{var o=s("../node_modules/lodash/_baseMean.js"),r=s("../node_modules/lodash/identity.js");e.exports=function(e){return o(e,r)}},"../node_modules/lodash/negate.js":e=>{e.exports=function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}},"../node_modules/lodash/omitBy.js":(e,t,s)=>{var o=s("../node_modules/lodash/_baseIteratee.js"),r=s("../node_modules/lodash/negate.js"),a=s("../node_modules/lodash/pickBy.js");e.exports=function(e,t){return a(e,r(o(t)))}}}]);
//# sourceMappingURL=../sourcemaps/app_views_releases_list_index_tsx-node_modules_lodash_mean_js-node_modules_lodash_omitBy_js.07f248a0f23ac398389f4c5dc7e719d2.js.map