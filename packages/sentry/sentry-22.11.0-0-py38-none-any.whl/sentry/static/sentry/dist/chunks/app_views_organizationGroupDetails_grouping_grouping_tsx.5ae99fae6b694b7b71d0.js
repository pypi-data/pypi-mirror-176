"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_organizationGroupDetails_grouping_grouping_tsx"],{"./app/views/organizationGroupDetails/grouping/grouping.tsx":(e,t,n)=>{n.d(t,{Z:()=>H,p:()=>I});var i=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(n("../node_modules/core-js/modules/es.array.includes.js"),n("../node_modules/react/index.js")),a=n("../node_modules/react-router/es/index.js"),s=n("../node_modules/lodash/debounce.js"),o=n.n(s),l=n("./app/components/button.tsx"),d=n("./app/components/buttonBar.tsx"),u=n("./app/components/featureFeedback/index.tsx"),p=n("./app/components/forms/controls/rangeSlider/index.tsx"),c=n("./app/components/forms/controls/rangeSlider/slider.tsx"),g=n("./app/components/layouts/thirds.tsx"),m=n("./app/components/loadingIndicator.tsx"),h=n("./app/components/pagination.tsx"),Z=n("./app/components/panels/index.tsx"),f=n("./app/constants/index.tsx"),y=n("./app/locale.tsx"),x=n("./app/styles/space.tsx"),b=n("./app/utils.tsx"),v=n("./app/utils/parseLinkHeader.tsx"),w=n("./app/utils/withApi.tsx"),k=n("./app/components/alert.tsx"),S=n("./app/components/emptyMessage.tsx"),j=n("./app/components/featureBadge.tsx"),_=n("./app/components/loadingError.tsx"),T=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function B(e){let{error:t,groupId:n,onRetry:i,orgSlug:a,projSlug:s,hasProjectWriteAccess:o,className:u}=e;if("string"==typeof t)return(0,T.tZ)(k.Z,{type:"warning",className:u,children:t});if(403===t.status&&t.responseJSON?.detail){const{code:e,message:i}=t.responseJSON.detail,{action:p,title:c,subTitle:g,leftAligned:m}=function(e){switch(e){case"merged_issues":return{title:(0,y.t)("Grouping breakdown is not available in this issue"),subTitle:(0,y.t)("This issue needs to be fully unmerged before grouping breakdown is available"),action:(0,T.tZ)(l.ZP,{priority:"primary",to:`/organizations/${a}/issues/${n}/merged/?${location.search}`,children:(0,y.t)("Unmerge issue")})};case"missing_feature":return{title:(0,y.t)("This project does not have the grouping breakdown available. Is your organization still an early adopter?")};case"no_events":return{title:(0,y.t)("This issue has no events")};case"issue_not_hierarchical":return{title:(0,y.t)("Grouping breakdown is not available in this issue"),subTitle:(0,y.t)("Only new issues with the latest grouping strategy have this feature available")};case"project_not_hierarchical":return{title:(0,T.BX)(r.Fragment,{children:[(0,y.t)("Update your Grouping Config"),(0,T.tZ)(j.Z,{type:"beta"})]}),subTitle:(0,T.BX)(r.Fragment,{children:[(0,T.tZ)("p",{children:(0,y.t)("Enable advanced grouping insights and functionality by updating this project to the latest Grouping Config:")}),(0,T.BX)("ul",{children:[(0,T.tZ)("li",{children:(0,y._N)("[strong:Breakdowns:] Explore events in this issue by call hierarchy.",{strong:(0,T.tZ)("strong",{})})}),(0,T.tZ)("li",{children:(0,y._N)("[strong:Stack trace annotations:] See important frames Sentry uses to group issues directly in the stack trace.",{strong:(0,T.tZ)("strong",{})})})]})]}),leftAligned:!0,action:(0,T.BX)(d.ZP,{gap:1,children:[(0,T.tZ)(l.ZP,{priority:"primary",to:`/settings/${a}/projects/${s}/issue-grouping/#upgrade-grouping`,disabled:!o,title:o?void 0:(0,y.t)("You do not have permission to update this project"),children:(0,y.t)("Upgrade Grouping Strategy")}),(0,T.tZ)(l.ZP,{href:"https://docs.sentry.io/product/data-management-settings/event-grouping/grouping-breakdown/",children:(0,y.t)("Read the docs")})]})};default:return{}}}(e);return(0,T.tZ)(Z.s_,{className:u,children:(0,T.tZ)(S.Z,{size:"large",title:c??i,description:g,action:p,leftAligned:m})})}return(0,T.tZ)(_.Z,{message:(0,y.t)("Unable to load grouping levels, please try again later"),onRetry:i,className:u})}B.displayName="ErrorMessage";const z=B;var N=n("./app/components/eventOrGroupHeader.tsx"),X=n("./app/components/timeSince.tsx"),q=n("./app/icons/index.tsx");function E(e){let{sampleEvent:t,eventCount:n,organization:i}=e;return(0,T.BX)(r.Fragment,{children:[(0,T.BX)($,{children:[(0,T.tZ)(N.Z,{data:t,organization:i,grouping:!0,hideIcons:!0,hideLevel:!0,source:"new-issue"}),(0,T.tZ)(A,{children:(0,T.BX)(C,{children:[(0,T.tZ)(R,{size:"11px"}),(0,T.tZ)(X.Z,{date:t.dateCreated?t.dateCreated:t.dateReceived,suffix:(0,y.t)("old")})]})})]}),(0,T.tZ)(G,{children:n})]})}E.displayName="NewIssue";const P=E,$=(0,i.Z)("div",{target:"ebu51d34"})({name:"1eiwmge",styles:"overflow:hidden;line-height:1.1"}),A=(0,i.Z)("div",{target:"ebu51d33"})("display:grid;grid-auto-flow:column;gap:",(0,x.Z)(2),";justify-content:flex-start;"),C=(0,i.Z)("div",{target:"ebu51d32"})("display:grid;gap:",(0,x.Z)(.5),";grid-template-columns:max-content 1fr;align-items:center;font-size:",(e=>e.theme.fontSizeSmall),";"),G=(0,i.Z)("div",{target:"ebu51d31"})({name:"1ewtsvq",styles:"align-items:center;font-variant-numeric:tabular-nums;line-height:1.1"}),R=(0,i.Z)(q.jo,{target:"ebu51d30"})("color:",(e=>e.theme.subText),";"),I=[(0,y.t)("Too eager grouping"),(0,y.t)("Too specific grouping"),(0,y.t)("Other grouping issue")],F="https://docs.sentry.io/product/data-management-settings/event-grouping/grouping-breakdown/";function D(e){let{api:t,groupId:n,location:i,organization:s,router:p,projSlug:c}=e;const{cursor:h,level:Z}=i.query,[x,w]=(0,r.useState)(!1),[k,S]=(0,r.useState)(!1),[j,_]=(0,r.useState)(void 0),[B,z]=(0,r.useState)([]),[N,X]=(0,r.useState)(void 0),[q,E]=(0,r.useState)([]),[$,A]=(0,r.useState)("");function C(e){return e.pathname===i.pathname||e.pathname!==i.pathname&&void 0===e.query.cursor&&void 0===e.query.level||(a.browserHistory.replace({pathname:e.pathname,query:{...e.query,cursor:void 0,level:void 0}}),!1)}(0,r.useEffect)((()=>(R(),a.browserHistory.listen(C))),[]),(0,r.useEffect)((()=>{!function(){if(B.length)if((0,b.ri)(Z)){if(!(0,b.ri)(B[Z]))return void _((0,y.t)("The level you were looking for was not found."));if(Z===N)return;X(Z)}else B.length>1?X(B[1].id):X(B[0].id)}()}),[B]),(0,r.useEffect)((()=>{(0,b.ri)(N)&&Z!==N&&p.replace({pathname:i.pathname,query:{...i.query,cursor:void 0,level:N}})}),[N]),(0,r.useEffect)((()=>{!async function(){if(B.length&&(0,b.ri)(N)){S(!0),_(void 0);try{const[e,,r]=await t.requestPromise(`/issues/${n}/grouping/levels/${N}/new-issues/`,{method:"GET",includeAllArgs:!0,query:{...i.query,per_page:10}}),a=r?.getResponseHeader?.("Link");A(a??""),E(Array.isArray(e)?e:[e]),S(!1)}catch(e){S(!1),_(e)}}}()}),[N,h]);const G=o()((e=>{X(Number(e))}),f.Dk);async function R(){w(!0),_(void 0);try{const e=await t.requestPromise(`/issues/${n}/grouping/levels/`);w(!1),z(e.levels)}catch(e){w(!1),_(e)}}if(x)return(0,T.tZ)(m.Z,{});if(j)return(0,T.tZ)(r.Fragment,{children:(0,T.tZ)(g.uT,{children:(0,T.tZ)(g.or,{fullWidth:!0,children:(0,T.BX)(K,{children:[(0,T.BX)(d.ZP,{gap:1,children:[(0,T.tZ)(l.ZP,{href:F,external:!0,children:(0,y.t)("Read Docs")}),(0,T.tZ)(u.z,{featureName:"grouping",feedbackTypes:I})]}),(0,T.tZ)(J,{onRetry:R,groupId:n,error:j,projSlug:c,orgSlug:s.slug,hasProjectWriteAccess:s.access.includes("project:write")})]})})})});if(!q.length)return(0,T.tZ)(m.Z,{});const D=(0,v.Z)($),H=D.previous?.results||D.next?.results,ne=q.length;return(0,T.tZ)(g.uT,{children:(0,T.tZ)(g.or,{fullWidth:!0,children:(0,T.BX)(L,{children:[(0,T.tZ)(O,{children:(0,y.t)("This issue is an aggregate of multiple events that sentry determined originate from the same root-cause. Use this page to explore more detailed groupings that exist within this issue.")}),(0,T.BX)(U,{children:[(0,T.BX)(M,{children:[(0,T.BX)(ee,{children:[(0,y.t)("Fewer issues"),(0,T.tZ)(te,{name:"grouping-level",allowedValues:B.map((e=>Number(e.id))),value:N??0,onChange:G,showLabel:!1}),(0,y.t)("More issues")]}),(0,T.BX)(W,{gap:1,children:[(0,T.tZ)(l.ZP,{href:F,external:!0,children:(0,y.t)("Read Docs")}),(0,T.tZ)(u.z,{featureName:"grouping",feedbackTypes:I})]})]}),(0,T.BX)(Q,{isReloading:k,children:[(0,T.tZ)(V,{headers:["",(0,y.t)("Events")],children:q.map((e=>{let{hash:t,title:n,metadata:i,latestEvent:r,eventCount:a}=e;return(0,T.tZ)(P,{sampleEvent:{...r,metadata:{...i||r.metadata,current_level:N},title:n||r.title},eventCount:a,organization:s},t)}))}),(0,T.tZ)(Y,{pageLinks:$,disabled:k,caption:(0,y._N)("Showing [current] of [total] [result]",{result:H?(0,y.t)("results"):(0,y.tn)("result","results",ne),current:ne,total:H?`${ne}+`:ne})})]})]})]})})})}D.displayName="Grouping";const H=(0,w.Z)(D),L=(0,i.Z)("div",{target:"e1m7ctwt11"})("flex:1;display:grid;align-content:flex-start;margin:-",(0,x.Z)(3)," -",(0,x.Z)(4),";padding:",(0,x.Z)(3)," ",(0,x.Z)(4),";"),O=(0,i.Z)("p",{target:"e1m7ctwt10"})("&&{margin-bottom:",(0,x.Z)(2),";}"),U=(0,i.Z)("div",{target:"e1m7ctwt9"})("display:grid;gap:",(0,x.Z)(3),";"),M=(0,i.Z)("div",{target:"e1m7ctwt8"})("display:grid;align-items:center;gap:",(0,x.Z)(3),";@media (min-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:1fr max-content;gap:",(0,x.Z)(2),";}"),W=(0,i.Z)(d.ZP,{target:"e1m7ctwt7"})({name:"11g6mpt",styles:"justify-content:flex-start"}),J=(0,i.Z)(z,{target:"e1m7ctwt6"})({name:"1d3w5wq",styles:"width:100%"}),K=(0,i.Z)("div",{target:"e1m7ctwt5"})("display:flex;flex-direction:column;align-items:flex-end;gap:",(0,x.Z)(1),";"),V=(0,i.Z)(Z.KB,{target:"e1m7ctwt4"})("grid-template-columns:1fr minmax(60px, auto);>*{padding:",(0,x.Z)(1.5)," ",(0,x.Z)(2),";:nth-child(-n + 2){padding:",(0,x.Z)(2),";}:nth-child(2n){display:flex;text-align:right;justify-content:flex-end;}}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){grid-template-columns:1fr minmax(80px, auto);}"),Y=(0,i.Z)(h.Z,{target:"e1m7ctwt3"})({name:"1i9vogi",styles:"margin-top:0"}),Q=(0,i.Z)("div",{target:"e1m7ctwt2"})((e=>e.isReloading&&`\n      ${V}, ${Y} {\n        opacity: 0.5;\n        pointer-events: none;\n      }\n    `),";"),ee=(0,i.Z)("div",{target:"e1m7ctwt1"})("display:grid;gap:",(0,x.Z)(1.5),";grid-template-columns:max-content max-content;justify-content:space-between;align-items:flex-start;position:relative;font-size:",(e=>e.theme.fontSizeMedium),";color:",(e=>e.theme.subText),";padding-bottom:",(0,x.Z)(2),";@media (min-width: 700px){grid-template-columns:max-content minmax(270px, auto) max-content;align-items:center;justify-content:flex-start;padding-bottom:0;}"),te=(0,i.Z)(p.Z,{target:"e1m7ctwt0"})(c.Z,"{background:transparent;margin-top:0;margin-bottom:0;::-ms-thumb{box-shadow:0 0 0 3px ",(e=>e.theme.backgroundSecondary),";}::-moz-range-thumb{box-shadow:0 0 0 3px ",(e=>e.theme.backgroundSecondary),";}::-webkit-slider-thumb{box-shadow:0 0 0 3px ",(e=>e.theme.backgroundSecondary),";}}position:absolute;bottom:0;left:",(0,x.Z)(1.5),";right:",(0,x.Z)(1.5),";@media (min-width: 700px){position:static;left:auto;right:auto;}")}}]);
//# sourceMappingURL=../sourcemaps/app_views_organizationGroupDetails_grouping_grouping_tsx.3c7bf01648d17eeab1e7dbca1489712b.js.map