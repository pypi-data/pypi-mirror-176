"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_profiling_content_tsx"],{"./app/components/charts/areaChart.tsx":(e,t,n)=>{n.d(t,{T:()=>s});var o=n("./app/components/charts/series/lineSeries.tsx"),r=n("./app/components/charts/baseChart.tsx"),i=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function s(e){let{series:t,stacked:n,colors:s,...a}=e;return(0,i.tZ)(r.Z,{...a,"data-test-id":"area-chart",colors:s,series:t.map(((e,t)=>{let{seriesName:r,data:i,...a}=e;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.Z)({...e})}({stack:n?"area":void 0,name:r,data:i.map((e=>{let{name:t,value:n}=e;return[t,n]})),lineStyle:{color:s?.[t],opacity:1,width:.4},areaStyle:{color:s?.[t],opacity:1},animation:!1,animationThreshold:1,animationDuration:0,...a})}))})}s.displayName="AreaChart"},"./app/components/charts/chartZoom.tsx":(e,t,n)=>{n.d(t,{Z:()=>Z});var o=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=n("../node_modules/react/index.js"),i=n("../node_modules/moment/moment.js"),s=n.n(i),a=n("../node_modules/query-string/index.js"),l=n("./app/actionCreators/pageFilters.tsx"),d=n("./app/components/charts/components/dataZoomInside.tsx");n("../node_modules/echarts/lib/component/dataZoomSlider.js");const p={realtime:!1,showDetail:!1,left:0,right:6,bottom:8};function c(e){return e&&Array.isArray(e)?e:[{...p,...e}]}var u=n("./app/components/charts/components/toolBox.tsx"),m=n("./app/utils/callIfFunction.tsx"),h=n("./app/utils/dates.tsx");const g=e=>e?s().utc(e).format(s().HTML5_FMT.DATETIME_LOCAL_SECONDS):null;class f extends r.Component{constructor(e){var t;super(e),t=this,(0,o.Z)(this,"history",void 0),(0,o.Z)(this,"currentPeriod",void 0),(0,o.Z)(this,"zooming",null),(0,o.Z)(this,"saveCurrentPeriod",(e=>{this.currentPeriod={period:e.period,start:g(e.start),end:g(e.end)}})),(0,o.Z)(this,"setPeriod",(function(e){let{period:n,start:o,end:r}=e,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{router:s,onZoom:d,usePageDate:p}=t.props,c=g(o),u=g(r);i&&t.history.push(t.currentPeriod),d?.({period:n,start:c,end:u}),t.zooming=()=>{if(p&&s){const e={...s.location.query,pageStart:o?(0,h.v5)(o):void 0,pageEnd:r?(0,h.v5)(r):void 0,pageStatsPeriod:n??void 0};a.stringify(e)!==a.stringify(s.location.query)&&s.push({pathname:s.location.pathname,query:e})}else(0,l.dR)({period:n,start:c?(0,h.hC)(c):c,end:u?(0,h.hC)(u):u},s);t.saveCurrentPeriod({period:n,start:o,end:r})}})),(0,o.Z)(this,"handleChartReady",(e=>{this.props.onChartReady?.(e)})),(0,o.Z)(this,"handleZoomRestore",((e,t)=>{this.history.length&&(this.setPeriod(this.history[0]),this.history=[],this.props.onRestore?.(e,t))})),(0,o.Z)(this,"handleDataZoom",((e,t)=>{const n=t.getModel(),{startValue:o,endValue:r}=n._payload.batch[0];if(null===o&&null===r){const e=this.history.pop();if(!e)return;this.setPeriod(e)}else{const e=s().utc(o),t=s().utc(r);this.setPeriod({period:null,start:e,end:t},!0)}this.props.onDataZoom?.(e,t)})),(0,o.Z)(this,"handleChartFinished",((e,t)=>{"function"==typeof this.zooming&&(this.zooming(),this.zooming=null);const n=t._componentsViews?.find((e=>e._features&&e._features.dataZoom));n&&!n._features.dataZoom._isZoomActive&&t.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!0}),(0,m.g)(this.props.onFinished)})),this.history=[],this.saveCurrentPeriod(e)}componentDidUpdate(){this.props.disabled||this.saveCurrentPeriod(this.props)}render(){const{utc:e,start:t,end:n,disabled:o,children:r,xAxisIndex:i,router:s,onZoom:a,onRestore:l,onChartReady:p,onDataZoom:m,onFinished:g,showSlider:f,chartZoomOptions:Z,...y}=this.props,x=e??void 0,b=t?(0,h.hC)(t):void 0,v=n?(0,h.hC)(n):void 0;return r(o?{utc:x,start:b,end:v,...y}:{isGroupedByDate:!0,onChartReady:this.handleChartReady,utc:x,start:b,end:v,dataZoom:f?[...c({xAxisIndex:i,...Z}),...(0,d.Z)({xAxisIndex:i,...Z})]:(0,d.Z)({xAxisIndex:i,...Z}),showTimeInTooltip:!0,toolBox:(0,u.Z)({},{dataZoom:{title:{zoom:"",back:""},iconStyle:{borderWidth:0,color:"transparent",opacity:0}}}),onDataZoom:this.handleDataZoom,onFinished:this.handleChartFinished,onRestore:this.handleZoomRestore,...y})}}f.displayName="ChartZoom";const Z=f},"./app/components/charts/components/dataZoomInside.tsx":(e,t,n)=>{n.d(t,{Z:()=>r}),n("../node_modules/echarts/lib/component/dataZoomInside.js");const o={type:"inside",zoomOnMouseWheel:!1,zoomLock:!0,throttle:50};function r(e){return e&&Array.isArray(e)?e:[{...o,...e}]}},"./app/components/charts/components/toolBox.tsx":(e,t,n)=>{function o(){let{dataZoom:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e?{dataZoom:{yAxisIndex:"none",title:{zoom:"zoom",back:"undo"},...e}}:{},...t}}function r(e,t){return{right:0,top:0,itemSize:16,z:-1,feature:o(t),...e}}n.d(t,{Z:()=>r})},"./app/components/onboardingPanel.tsx":(e,t,n)=>{n.d(t,{Z:()=>c});var o=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=n("./app/components/panels/index.tsx"),i=n("./app/styles/space.tsx"),s=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){let{image:t,children:n,...o}=e;return(0,s.tZ)(r.s_,{...o,children:(0,s.BX)(l,{children:[t?(0,s.tZ)(p,{children:t}):null,(0,s.tZ)(d,{centered:!t,children:n})]})})}a.displayName="OnboardingPanel";const l=(0,o.Z)("div",{target:"e19tujos2"})("padding:",(0,i.Z)(3),";position:relative;@media (min-width: ",(e=>e.theme.breakpoints.small),"){display:flex;align-items:center;flex-direction:row;justify-content:center;flex-wrap:wrap;min-height:300px;max-width:1000px;margin:0 auto;}@media (min-width: ",(e=>e.theme.breakpoints.medium),"){min-height:350px;}"),d=(0,o.Z)("div",{target:"e19tujos1"})("z-index:1;",(e=>e.centered?"text-align: center;":"")," ",(e=>e.centered?"max-width: 600px;":""),"@media (min-width: ",(e=>e.theme.breakpoints.small),"){flex:2;}"),p=(0,o.Z)(d,{target:"e19tujos0"})("position:relative;min-height:100px;max-width:300px;margin:",(0,i.Z)(2)," auto;@media (min-width: ",(e=>e.theme.breakpoints.small),"){flex:1;margin:",(0,i.Z)(3),";max-width:auto;}"),c=a},"./app/views/profiling/content.tsx":(e,t,n)=>{n.r(t),n.d(t,{default:()=>He});var o=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=n("../node_modules/react/index.js"),i=n("../node_modules/react-router/es/index.js"),s=n("./app/actionCreators/modal.tsx"),a=n("./app/components/button.tsx"),l=n("./app/components/datePageFilter.tsx"),d=n("./app/components/environmentPageFilter.tsx"),p=n("./app/components/layouts/thirds.tsx"),c=n("./app/components/noProjectMessage.tsx"),u=n("./app/components/organizations/pageFilterBar.tsx"),m=n("./app/components/organizations/pageFilters/container.tsx"),h=n("./app/components/pageHeading.tsx"),g=n("./app/components/pagination.tsx"),f=n("./app/components/profiling/profileEventsTable.tsx"),Z=(n("../node_modules/core-js/modules/es.error.cause.js"),n("../node_modules/core-js/modules/es.array.includes.js"),n("../node_modules/@sentry/browser/node_modules/@sentry/core/esm/exports.js")),y=n("../node_modules/platformicons/build/index.js"),x=n("./app/components/codeSnippet.tsx"),b=n("./app/components/forms/index.tsx"),v=n("./app/components/links/externalLink.tsx"),w=n("./app/components/links/link.tsx"),S=n("./app/components/list/index.tsx"),j=n("./app/components/loadingIndicator.tsx"),k=n("./app/components/tag.tsx"),P=n("./app/icons/index.tsx"),B=n("./app/locale.tsx"),X=n("./app/styles/space.tsx");function z(e,t){return e.startsWith(t+"-")?-1:t.startsWith(e+"-")?1:e.localeCompare(t,void 0,{numeric:!0,sensitivity:"case",caseFirst:"upper"})}var C=n("./app/utils/useApi.tsx"),_=n("./app/utils/useProjects.tsx"),I=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function D(e){const[t,n]=function(e){const[t,n]=(0,r.useState)(e);return[t,(0,r.useCallback)((e=>{null!==e&&n((t=>{const n={...e,next:null,previous:t};return t.next=n,n.previous=t,n}))}),[])]}({previous:null,current:A,next:null}),[o,i]=(0,r.useState)(null);return(0,I.tZ)(t.current,{...e,toStep:n,step:t,project:o,setProject:i})}function F(e,t){return{label:e.slug,value:e,disabled:t.disabled,leadingItems:e.platform?(0,I.tZ)(y.v,{platform:e.platform}):null}}D.displayName="ProfilingOnboardingModal";const N={android:$,"apple-ios":G};function A(e){let{Body:t,Header:n,Footer:o,closeModal:i,toStep:s,step:a,project:l,setProject:d,organization:p}=e;const{projects:c}=(0,_.Z)(),u=(0,r.useCallback)((e=>{if(e.preventDefault(),!l?.platform)return;const t=N[l.platform];if(void 0===t)throw new TypeError("Platform doesn't have a onboarding step, user should not be able to select it");s({previous:a,current:t,next:null})}),[l,a,s]),m=(0,r.useMemo)((()=>{const{supported:e,unsupported:t}=function(e){const t=[],n=[];for(const o of e)o.platform&&N[o.platform]?t.push(o):n.push(o);return{supported:t,unsupported:n}}(c);return[{label:(0,B.t)("Supported"),options:e.map((e=>F(e,{disabled:!1})))},{label:(0,B.t)("Unsupported"),options:t.map((e=>F(e,{disabled:!0})))}]}),[c]),h=function(e){const t=(0,C.Z)(),[n,o]=(0,r.useState)({type:"initial"});return(0,r.useEffect)((()=>{let n=!1;return function(e,t){return e.requestPromise(`/organizations/${t}/sdk-updates/`)}(t,e.organization.slug).then((e=>{n||o({type:"resolved",data:e})})).catch((e=>{n||o({type:"errored",error:e})})),()=>{n=!0}}),[t,e.organization.slug]),(0,r.useMemo)((()=>e.projectId?"resolved"===n.type?{...n,type:"resolved",data:"resolved"===n.type&&n.data?n.data.find((t=>t.projectId===e.projectId))??null:null}:n:{...n,type:"resolved",data:null}),[n,e.projectId])}({organization:p,projectId:l?.id??null}),g=function(e){let{organization:t,project:n}=e;const o=function(e){let{organization:t,project:n}=e;const o=(0,C.Z)(),[i,s]=(0,r.useState)({type:"initial"});return(0,r.useEffect)((()=>t&&n?(s({type:"loading"}),o.requestPromise(`/projects/${t.slug}/${n.slug}/keys/`).then((e=>{s({type:"resolved",data:e})})).catch((e=>{s({type:"errored",error:e}),Z.Tb(e)})),()=>{o.clear()}):()=>{}),[t,n,o]),i}({organization:t,project:n});if("resolved"!==o.type)return o;const i=o.data?.[0]?.dsn.public;return i||Z.Tb(new Error(`public dsn not found for ${t?.slug}/${n?.slug}`)),{...o,data:i}}({organization:p,project:l});return(0,I.BX)(t,{children:[(0,I.tZ)(n,{children:(0,I.tZ)("h3",{children:(0,B.t)("Set Up Profiling")})}),(0,I.BX)("form",{onSubmit:u,children:[(0,I.BX)(L,{symbol:"colored-numeric",children:[(0,I.BX)("li",{children:[(0,I.tZ)(re,{children:(0,I.tZ)("label",{htmlFor:"project-select",children:(0,B.t)("Select a project")})}),(0,I.tZ)("div",{children:(0,I.tZ)(E,{id:"project-select",name:"select",options:m,onChange:d})})]}),"android"===l?.platform?(0,I.tZ)(R,{sdkUpdates:h,project:l,organization:p,publicDSN:g}):null,"apple-ios"===l?.platform?(0,I.tZ)(V,{sdkUpdates:h,project:l,organization:p,publicDSN:g}):null]}),(0,I.tZ)(o,{children:(0,I.BX)(J,{children:[(0,I.tZ)(W,{}),(0,I.BX)("div",{children:[(0,I.tZ)(ie,{children:(0,B.t)("Step 1 of 2")}),(0,I.tZ)(K,{type:"button",onClick:i}),(0,I.tZ)(H,{disabled:!(l?.platform&&N[l.platform])||"loading"===g.type,type:"submit"})]})]})})]})]})}function q(e){let{href:t}=e;return(0,I.BX)(r.Fragment,{children:[(0,I.tZ)(re,{children:(0,B.t)("Setup Performance Monitoring")}),(0,B._N)("For Profiling to function, it's required to set up Performance monitoring. Follow the [setupDocs]",{setupDocs:(0,I.tZ)(v.Z,{openInNewTab:!0,href:t,children:(0,B.t)("step-by-step instructions here.")})})]})}function T(e){let{sdkUpdates:t,organization:n,project:o,minSdkVersion:i}=e;const s=t.suggestions.find((e=>"updateSdk"===e.type));return(0,I.BX)(r.Fragment,{children:[(0,I.BX)(O,{children:[(0,I.tZ)(U,{platform:o.platform??"unknown"}),(0,I.tZ)(w.Z,{to:`/organizations/${n.slug}/projects/${o.slug}/?project=${o.id}`,children:o.slug})]}),(0,I.BX)(M,{children:[(0,B.t)("This project is on %s@%s",t.sdkName,t.sdkVersion),(0,I.tZ)("br",{}),s?(0,I.tZ)(w.Z,{to:s.sdkUrl??"",children:(0,B.t)("Update to %s@%s",s.sdkName,s.newSdkVersion)}):(0,B.t)("Update to %s or higher",i)]})]})}A.displayName="SelectProjectStep",q.displayName="SetupPerformanceMonitoringStep",T.displayName="ProjectSdkUpdate";const M=(0,o.Z)("p",{target:"ewfgfp912"})("margin-top:",(0,X.Z)(.75),";padding-left:",(0,X.Z)(4),";"),U=(0,o.Z)(y.v,{target:"ewfgfp911"})({name:"nkt64x",styles:"margin-right:10px"}),O=(0,o.Z)("div",{target:"ewfgfp910"})("display:flex;align-items:center;margin-top:",(0,X.Z)(1.5),";font-size:",(e=>e.theme.fontSizeLarge),";");function R(e){let{project:t,sdkUpdates:n,organization:o,publicDSN:i}=e;const s="resolved"===n.type&&null!==n.data,a=!!(s&&n.data?.sdkVersion&&["sentry.java.android","sentry.java.android.timber"].includes(n.data.sdkName))&&z(n.data.sdkVersion,"6.0.0")<0,l="resolved"===i.type&&null!==i.data?i.data:"...";return(0,I.BX)(r.Fragment,{children:[s&&a&&(0,I.BX)("li",{children:[(0,I.tZ)(re,{children:(0,B.t)("Update your projects SDK version")}),(0,I.tZ)(T,{minSdkVersion:"6.0.0 (sentry.android)",project:t,sdkUpdates:n.data,organization:o})]}),(0,I.tZ)("li",{children:(0,I.tZ)(q,{href:"https://docs.sentry.io/platforms/android/performance/"})}),(0,I.BX)("li",{children:[(0,I.tZ)(re,{children:(0,B.t)("Set Up Profiling")}),"loading"===i.type?(0,I.tZ)(j.Z,{}):(0,I.tZ)(x.O,{language:"xml",filename:"AndroidManifest.xml",children:`<application>\n  <meta-data android:name="io.sentry.dsn" android:value="${l}" />\n  <meta-data android:name="io.sentry.traces.sample-rate" android:value="1.0" />\n  <meta-data android:name="io.sentry.traces.profiling.sample-rate" android:value="1.0" />\n</application>`})]})]})}function V(e){let{project:t,sdkUpdates:n,organization:o,publicDSN:i}=e;const s="resolved"===n.type&&null!==n.data,a=!(!s||!n.data?.sdkVersion||"sentry.cocoa"!==n.data?.sdkName)&&z(n.data.sdkVersion,"7.23.0")<0,l="resolved"===i.type&&i.data?i.data:"...";return(0,I.BX)(r.Fragment,{children:[s&&a&&(0,I.BX)("li",{children:[(0,I.tZ)(re,{children:(0,B.t)("Update your projects SDK version")}),(0,I.tZ)(T,{minSdkVersion:"7.23.0 (sentry.cocoa)",project:t,sdkUpdates:n.data,organization:o})]}),(0,I.tZ)("li",{children:(0,I.tZ)(q,{href:"https://docs.sentry.io/platforms/apple/guides/ios/performance/"})}),(0,I.BX)("li",{children:[(0,I.tZ)(re,{children:(0,B.t)("Enable profiling in your app by configuring the SDKs like below:")}),"loading"===i.type?(0,I.tZ)(j.Z,{}):(0,I.tZ)(x.O,{language:"swift",children:`SentrySDK.start { options in\n  options.dsn = "${l}"\n  options.tracesSampleRate = 1.0 // Make sure transactions are enabled\n  options.profilesSampleRate = 1.0\n}`})]})]})}R.displayName="AndroidInstallSteps",V.displayName="IOSInstallSteps";const L=(0,o.Z)(S.Z,{target:"ewfgfp99"})("position:relative;li{margin-bottom:",(0,X.Z)(3),";}"),E=(0,o.Z)(b.mg,{target:"ewfgfp98"})({name:"9nn1p6",styles:"padding:0;border-bottom:0;>div{width:100%;padding-left:0;}"});function $(e){let{Body:t,Header:n,Footer:o,closeModal:r,toStep:i,step:s}=e;return(0,I.BX)(t,{children:[(0,I.tZ)(n,{children:(0,I.tZ)("h3",{children:(0,B.t)("Set Up Profiling")})}),(0,I.BX)("p",{children:[(0,B.t)("If you want to see de-obfuscated stack traces, you'll need to use ProGuard with Sentry. To do so, upload the ProGuard mapping files by either the recommended method of using our Gradle integration or manually by using sentry-cli.")," ",(0,I.tZ)(v.Z,{href:"https://docs.sentry.io/product/cli/dif/",children:(0,B.t)("Learn more about Debug Information Files.")})]}),(0,I.BX)(ne,{children:[(0,I.BX)(Q,{children:[(0,I.tZ)(Y,{children:(0,B.t)("Option 1")})," ",(0,I.tZ)(k.Z,{children:(0,B.t)("Recommended")})]}),(0,I.tZ)(Q,{children:(0,I.tZ)(Y,{children:(0,B.t)("Option 2")})})]}),(0,I.BX)(ne,{children:[(0,I.BX)(te,{children:[(0,I.BX)(ee,{href:"https://docs.sentry.io/platforms/android/proguard/",children:[(0,B.t)("Proguard and DexGuard"),(0,I.tZ)(P.V$,{})]}),(0,I.tZ)("p",{children:(0,B.t)("Upload ProGuard files using our Gradle plugin.")})]}),(0,I.BX)(te,{children:[(0,I.BX)(ee,{href:"https://docs.sentry.io/product/cli/dif/#uploading-files",children:[(0,B.t)("Sentry-cli"),(0,I.tZ)(P.V$,{})]}),(0,I.tZ)("p",{children:(0,B.t)("Validate and upload debug files using our cli tool.")})]})]}),(0,I.tZ)(o,{children:(0,I.BX)(J,{children:[(0,I.tZ)(W,{}),(0,I.BX)("div",{children:[(0,I.tZ)(ie,{children:(0,B.t)("Step 2 of 2")}),s.previous?(0,I.tZ)(K,{onClick:()=>i(s.previous)}):null,(0,I.tZ)(a.ZP,{priority:"primary",onClick:r,children:(0,B.t)("Done")})]})]})})]})}function G(e){let{Body:t,Header:n,Footer:o,closeModal:r,toStep:i,step:s}=e;return(0,I.BX)(t,{children:[(0,I.tZ)(n,{children:(0,I.tZ)("h3",{children:(0,B.t)("Set Up Profiling")})}),(0,I.BX)("p",{children:[(0,B.t)("The most straightforward way to provide Sentry with debug information files is to\n        upload them using sentry-cli. Depending on your workflow, you may want to upload\n        as part of your build pipeline or when deploying and publishing your application.")," ",(0,I.tZ)(v.Z,{href:"https://docs.sentry.io/product/cli/dif/",children:(0,B.t)("Learn more about Debug Information Files.")})]}),(0,I.BX)(ne,{children:[(0,I.BX)(Q,{children:[(0,I.tZ)(Y,{children:(0,B.t)("Option 1")})," ",(0,I.tZ)(k.Z,{children:(0,B.t)("Recommended")})]}),(0,I.tZ)(Q,{children:(0,I.tZ)(Y,{children:(0,B.t)("Option 2")})})]}),(0,I.BX)(ne,{children:[(0,I.BX)(te,{children:[(0,I.BX)(ee,{href:"https://docs.sentry.io/product/cli/dif/#uploading-files",children:[(0,B.t)("Sentry-cli"),(0,I.tZ)(P.V$,{})]}),(0,I.tZ)("p",{children:(0,B.t)("Validate and upload debug files using our cli tool.")})]}),(0,I.BX)(te,{children:[(0,I.BX)(ee,{href:"https://docs.sentry.io/platforms/apple/dsym/",children:[(0,B.t)("Symbol servers"),(0,I.tZ)(P.V$,{})]}),(0,I.tZ)("p",{children:(0,B.t)("Sentry downloads debug information files from external repositories.")})]})]}),(0,I.tZ)(o,{children:(0,I.BX)(J,{children:[(0,I.tZ)(W,{}),(0,I.BX)("div",{children:[(0,I.tZ)(ie,{children:(0,B.t)("Step 2 of 2")}),null!==s.previous?(0,I.tZ)(K,{onClick:()=>i(s.previous)}):null,(0,I.tZ)(a.ZP,{priority:"primary",onClick:r,children:(0,B.t)("Next")})]})]})})]})}function H(e){return(0,I.tZ)(a.ZP,{priority:"primary",...e,children:(0,B.t)("Next")})}function K(e){return(0,I.tZ)(a.ZP,{...e,children:(0,B.t)("Back")})}function W(){return(0,I.tZ)(a.ZP,{external:!0,href:"https://docs.sentry.io/product/profiling/",children:(0,B.t)("Read Docs")})}function J(e){let{children:t}=e;return(0,I.tZ)(oe,{children:t})}$.displayName="AndroidSendDebugFilesInstruction",G.displayName="IOSSendDebugFilesInstruction",H.displayName="NextStepButton",K.displayName="PreviousStepButton",W.displayName="DocsLink",J.displayName="ModalActions";const Q=(0,o.Z)("div",{target:"ewfgfp97"})("margin-bottom:",(0,X.Z)(.5),";"),Y=(0,o.Z)("span",{target:"ewfgfp96"})({name:"1efi8gv",styles:"font-weight:bold"}),ee=(0,o.Z)(v.Z,{target:"ewfgfp95"})("font-weight:bold;font-size:",(e=>e.theme.fontSizeLarge),";display:flex;align-items:center;margin-bottom:",(0,X.Z)(.5),";svg{margin-left:",(0,X.Z)(.5),";}"),te=(0,o.Z)("div",{target:"ewfgfp94"})("border-radius:",(e=>e.theme.borderRadius),";border:1px solid ",(e=>e.theme.border),";padding:",(0,X.Z)(2),";margin-top:",(0,X.Z)(1),";"),ne=(0,o.Z)("div",{target:"ewfgfp93"})("display:grid;grid-template-columns:1fr 1fr;gap:",(0,X.Z)(2),";>p{margin:0;}"),oe=(0,o.Z)("div",{target:"ewfgfp92"})("display:flex;justify-content:space-between;align-items:center;flex:1 1 100%;button:not(:last-child){margin-right:",(0,X.Z)(1),";}"),re=(0,o.Z)("div",{target:"ewfgfp91"})("margin-bottom:",(0,X.Z)(1),";font-weight:bold;"),ie=(0,o.Z)("span",{target:"ewfgfp90"})("color:",(e=>e.theme.subText),";margin-right:",(0,X.Z)(2),";");var se=n("./app/components/projectPageFilter.tsx"),ae=n("./app/components/sentryDocumentTitle.tsx"),le=n("./app/components/sidebar/types.tsx"),de=n("./app/components/smartSearchBar/index.tsx"),pe=n("./app/constants/index.tsx"),ce=n("./app/constants/pageFilters.tsx"),ue=n("./app/stores/sidebarPanelStore.tsx"),me=n("./app/styles/organization.tsx"),he=n("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),ge=n("./app/utils/profiling/hooks/useProfileEvents.tsx"),fe=n("./app/utils/profiling/hooks/useProfileFilters.tsx"),Ze=n("./app/utils/queryString.tsx"),ye=n("./app/utils/useOrganization.tsx"),xe=n("./app/utils/usePageFilters.tsx"),be=n("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),ve=n("./app/components/charts/areaChart.tsx"),we=n("./app/components/charts/chartZoom.tsx"),Se=n("./app/components/charts/styles.tsx"),je=n("./app/components/panels/index.tsx"),ke=n("./app/utils/discover/charts.tsx"),Pe=n("./app/utils/discover/fields.tsx"),Be=n("../node_modules/@tanstack/react-query/build/umd/index.production.js"),Xe=n("./app/components/organizations/pageFilters/parse.tsx");function ze(e,t){const n={axis:e,values:[]},o={dataset:"profiles",end:t.end,start:t.start},r=[];for(let e=0;e<t.data.length;e++){const[o,i]=t.data[e];n.values.push(i[0].count),r.push(o)}return{series:n,meta:o,timestamps:r}}const Ce=["count()","p99()","p95()","p75()"];function _e(e){let{query:t,router:n,selection:o}=e;const i=(0,be.u)(),s=function(e){let{yAxes:t,interval:n,query:o,referrer:r}=e;const i=(0,C.Z)(),s=(0,ye.Z)(),{selection:a}=(0,xe.Z)(),l=`/organizations/${s.slug}/events-stats/`,d={query:{dataset:"profiles",referrer:r,project:a.projects,environment:a.environments,...(0,Xe.fK)(a.datetime),yAxis:t,interval:n,query:o}},p=[l,d];return(0,Be.useQuery)({queryKey:p,queryFn:()=>i.requestPromise(l,{method:"GET",includeAllArgs:!0,query:d.query}).then((e=>function(e,t){if(0===e.length)return[{data:[],meta:{dataset:"profiles",end:0,start:0},timestamps:[]},t[1],t[2]];if(1===e.length){const{series:n,meta:o,timestamps:r}=ze(e[0],t[0]);return[{data:[n],meta:o,timestamps:r},t[1],t[2]]}const n=[];let o={dataset:"profiles",end:-1,start:-1},r=[],i=!0;for(const s of e){const e=ze(s,t[0][s]);if(i)o=e.meta,r=e.timestamps;else{if(o.start!==e.meta.start||o.end!==e.meta.end)throw new Error("Mismatching start/end times");if(r.length!==e.timestamps.length||r.some(((t,n)=>t!==e.timestamps[n])))throw new Error("Mismatching timestamps")}n.push(e.series),i=!1}return[{data:n,meta:o,timestamps:r},t[1],t[2]]}(t,e))),refetchOnWindowFocus:!1,retry:!1})}({query:t,referrer:"api.profiling.landing-chart",yAxes:Ce}),a=(0,r.useMemo)((()=>{if("success"!==s.status)return[];const e=s.data[0].timestamps.map((e=>1e3*e)),t=s.data[0].data.filter((e=>Ce.indexOf(e.axis)>-1)).map((t=>{if(e.length!==t.values.length)throw new Error("Invalid stats response");return"count()"===t.axis?{data:t.values.map(((t,n)=>({name:e[n],value:t??0}))),seriesName:t.axis,xAxisIndex:0,yAxisIndex:0}:{data:t.values.map(((t,n)=>({name:e[n],value:(t??0)/1e6}))),seriesName:t.axis,xAxisIndex:1,yAxisIndex:1}}));return t.sort(((e,t)=>Ce.indexOf(e.seriesName)-Ce.indexOf(t.seriesName))),t}),[s]);return(0,I.tZ)(we.Z,{router:n,...o?.datetime,children:e=>(0,I.BX)(Ie,{children:[(0,I.BX)(De,{children:[(0,I.tZ)(Fe,{children:(0,B.t)("Profiles by Count")}),(0,I.tZ)(Fe,{children:(0,B.t)("Profiles by Percentiles")})]}),(0,I.tZ)(ve.T,{height:300,series:a,grid:[{top:"32px",left:"24px",right:"52%",bottom:"16px"},{top:"32px",left:"52%",right:"24px",bottom:"16px"}],legend:{right:16,top:12,data:Ce.slice()},axisPointer:{link:[{xAxisIndex:[0,1]}]},xAxes:[{gridIndex:0,type:"time"},{gridIndex:1,type:"time"}],yAxes:[{gridIndex:0,scale:!0,axisLabel:{color:i.chartLabel,formatter:e=>(0,ke.gu)(e,"integer")}},{gridIndex:1,scale:!0,axisLabel:{color:i.chartLabel,formatter:e=>(0,ke.gu)(e,"duration")}}],tooltip:{valueFormatter:(e,t)=>(0,ke.CX)(e,(0,Pe.Px)(t))},isGroupedByDate:!0,showTimeInTooltip:!0,...e})]})})}_e.displayName="ProfileCharts";const Ie=(0,o.Z)(je.s_,{target:"e16luuhi2"})("padding-top:",(0,X.Z)(2),";"),De=(0,o.Z)("div",{target:"e16luuhi1"})({name:"ai16bo",styles:"width:100%;display:flex;flex-direction:row"}),Fe=(0,o.Z)(Se.Gh,{target:"e16luuhi0"})("flex-grow:1;margin-left:",(0,X.Z)(2),";");var Ne=n("./images/spot/performance-empty-state.svg"),Ae=n("./app/components/buttonBar.tsx"),qe=n("./app/components/onboardingPanel.tsx");function Te(e){return(0,I.BX)(qe.Z,{image:(0,I.tZ)(Me,{src:Ne}),children:[(0,I.tZ)("h3",{children:(0,B.t)("Function level insights")}),(0,I.tZ)("p",{children:(0,B.t)("Discover slow-to-execute or resource intensive functions within your application")}),(0,I.tZ)(Ue,{gap:1,children:e.children})]})}Te.displayName="ProfilingOnboardingPanel";const Me=(0,o.Z)("img",{target:"e1ye1f4w1"})("@media (min-width: ",(e=>e.theme.breakpoints.small),"){user-select:none;position:absolute;top:0;bottom:0;width:220px;margin-top:auto;margin-bottom:auto;transform:translateX(-50%);left:50%;}@media (min-width: ",(e=>e.theme.breakpoints.large),"){transform:translateX(-30%);width:380px;min-width:380px;}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){transform:translateX(-30%);width:420px;min-width:420px;}"),Ue=(0,o.Z)(Ae.ZP,{target:"e1ye1f4w0"})({name:"vpj881",styles:"grid-template-columns:repeat(auto-fit, minmax(130px, max-content))"});function Oe(e){let{location:t,router:n}=e;const o=(0,ye.Z)(),{selection:h}=(0,xe.Z)(),Z=(0,Ze.ro)(t.query.cursor),y=(0,Ze.ro)(t.query.query,""),x=(0,ge.k)((0,Ze.ro)(t.query.sort),Re,{key:"count()",order:"desc"}),b=(0,fe.J)({query:"",selection:h}),{projects:v}=(0,_.Z)(),w=(0,ge.G)({cursor:Z,fields:Re,query:y,sort:x,referrer:"api.profiling.landing-table"});(0,r.useEffect)((()=>{(0,he.Z)("profiling_views.landing",{organization:o})}),[o]);const S=(0,r.useCallback)((e=>{i.browserHistory.push({...t,query:{...t.query,cursor:void 0,query:e||void 0}})}),[t]),j=(0,r.useCallback)((()=>{const e=o.features?.includes("profiling-onboarding-checklist");e?ue.Z.activatePanel(le.z.ProfilingOnboarding):(0,s.openModal)((e=>(0,I.tZ)(D,{...e,organization:o})))}),[o]),k=(0,r.useMemo)((()=>!("success"!==w.status||w.data[0].data.length>0||function(e,t){const n=t.reduce(((e,t)=>(e[t.id]=t,e)),{});return e[0]===ce.mP||0===e.length?void 0!==t.find((e=>{const t=n[String(e)];return!!t&&t.hasProfiles})):void 0!==e.find((e=>{const t=n[String(e)];return!!t&&t.hasProfiles}))}(h.projects,v))),[h.projects,v,w]);return(0,I.tZ)(ae.Z,{title:(0,B.t)("Profiling"),orgSlug:o.slug,children:(0,I.tZ)(m.Z,{children:(0,I.tZ)(c.Z,{organization:o,children:(0,I.BX)(Ve,{children:[(0,I.tZ)(p.h4,{children:(0,I.BX)(Le,{children:[(0,I.tZ)($e,{children:(0,B.t)("Profiling")}),(0,I.BX)(Ee,{children:[(0,I.tZ)(a.ZP,{size:"sm",onClick:j,children:(0,B.t)("Set Up Profiling")}),(0,I.tZ)(a.ZP,{size:"sm",priority:"primary",href:"https://discord.gg/zrMjKA4Vnz",external:!0,onClick:()=>{(0,he.Z)("profiling_views.visit_discord_channel",{organization:o})},children:(0,B.t)("Join Discord")})]})]})}),(0,I.tZ)(p.uT,{children:(0,I.BX)(p.or,{fullWidth:!0,children:[(0,I.BX)(Ge,{children:[(0,I.BX)(u.Z,{condensed:!0,children:[(0,I.tZ)(se.Z,{}),(0,I.tZ)(d.Z,{}),(0,I.tZ)(l.Z,{alignDropdown:"left"})]}),(0,I.tZ)(de.Z,{organization:o,hasRecentSearches:!0,searchSource:"profile_landing",supportedTags:b,query:y,onSearch:S,maxQueryLength:pe.dI})]}),k?(0,I.BX)(Te,{children:[(0,I.tZ)(a.ZP,{href:"https://docs.sentry.io/product/profiling/",external:!0,children:(0,B.t)("Read Docs")}),(0,I.tZ)(a.ZP,{onClick:j,priority:"primary",children:(0,B.t)("Set Up Profiling")})]}):(0,I.BX)(r.Fragment,{children:[(0,I.tZ)(_e,{router:n,query:y,selection:h}),(0,I.tZ)(f.Q,{columns:Re.slice(),data:"success"===w.status?w.data[0]:null,error:"error"===w.status?(0,B.t)("Unable to load profiles"):null,isLoading:"loading"===w.status,sort:x,sortableColumns:new Set(Re)}),(0,I.tZ)(g.Z,{pageLinks:"success"===w.status?w.data?.[2]?.getResponseHeader("Link")??null:null})]})]})})]})})})})}Oe.displayName="ProfilingContent";const Re=["transaction","project.id","last_seen()","p75()","p95()","p99()","count()"],Ve=(0,o.Z)(me.JH,{target:"eil9lws4"})({name:"1hcx8jb",styles:"padding:0"}),Le=(0,o.Z)(p.oB,{target:"eil9lws3"})({name:"1iix8hw",styles:"display:flex;justify-content:space-between;flex-direction:row"}),Ee=(0,o.Z)("div",{target:"eil9lws2"})("display:flex;align-items:center;button:not(:last-child){margin-right:",(0,X.Z)(1),";}"),$e=(0,o.Z)(h.Z,{target:"eil9lws1"})({name:"ht6xsx",styles:"line-height:40px"}),Ge=(0,o.Z)("div",{target:"eil9lws0"})("display:grid;gap:",(0,X.Z)(2),";grid-template-columns:min-content auto;margin-bottom:",(0,X.Z)(2),";"),He=Oe},"./images/spot/performance-empty-state.svg":(e,t,n)=>{e.exports=n.p+"assets/performance-empty-state.8da0e336a4e99ef87edb.svg"}}]);
//# sourceMappingURL=../sourcemaps/app_views_profiling_content_tsx.48480ea1f81cd940bb807aeb794c7c52.js.map