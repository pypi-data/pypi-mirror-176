"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_performance_transactionSummary_utils_tsx"],{"./app/utils/performance/quickTrace/utils.tsx":(e,t,n)=>{n.d(t,{$J:()=>y,Ci:()=>S,R8:()=>v,S2:()=>x,_Z:()=>_,eF:()=>g,eW:()=>m,hp:()=>p,q2:()=>d,xB:()=>w,y3:()=>T}),n("../node_modules/core-js/modules/es.error.cause.js");var r=n("../node_modules/lodash/omit.js"),s=n.n(r),a=n("../node_modules/moment-timezone/index.js"),o=n.n(a),i=n("./app/components/events/interfaces/spans/utils.tsx"),u=n("./app/constants/pageFilters.tsx"),c=n("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),l=n("./app/utils/discover/eventView.tsx");function p(e){return"transaction"===e.type}function d(e,t){return p(t)?e.event_id===t.id:void 0!==e.errors&&e.errors.some((e=>e.event_id===t.id))}function m(e,t){const n=[],r=[],s=[{event:t,path:[]}];for(;s.length;){const t=s.shift();if(d(t.event,e)){for(const e of t.path)n.push(e);r.push(t.event)}else{const e=[...t.path,f(t.event)];for(const n of t.event.children)s.push({event:n,path:e})}}if(!r.length)throw new Error("No relevant path exists!");for(;r.length;){const e=r.shift();for(const t of e.children)r.push(t);n.push(f(e))}return n}function f(e){return s()(e,["children"])}function v(e,t,n){const{type:r,trace:s}=e;if("empty"===r||null===s)throw new Error("Current event not in trace navigator!");const a="full"===r,o=s.find((e=>d(e,t)))??null;if(null===o)throw new Error("Current event not in trace navigator!");const i=o.parent_event_id?s.find((e=>e.event_id===o.parent_event_id))??null:null,u=s.find((e=>e.event_id!==o.event_id&&e.event_id!==i?.event_id&&0===e.generation))??null,l=a?[]:null,p=[],m=a?[]:null,f=new Set;return s.forEach((e=>{f.add(e.project_id),(e=>e.parent_event_id===o.event_id)(e)?p.push(e):a&&((e=>null!==o.generation&&null!==e.generation&&e.generation>0&&o.generation-1>e.generation)(e)?l?.push(e):(e=>null!==o.generation&&null!==e.generation&&o.generation+1<e.generation)(e)&&m?.push(e))})),a&&f.size>1&&function(e,t){(0,c.Z)("quick_trace.connected_services",{organization:e.id,projects:t})}(n,f.size),{root:u,ancestors:null===l?null:h(l),parent:i,current:o,children:h(p),descendants:null===m?null:h(m)}}function h(e){return e.sort(((e,t)=>t["transaction.duration"]-e["transaction.duration"]))}function g(e){let{eventView:t,location:n}=e;return s()(t.getEventsAPIPayload(n),["field","sort","per_page"])}function _(e){let{start:t,end:n,statsPeriod:r}=e;return l.ZP.fromSavedQuery({id:void 0,version:2,name:"",fields:["transaction.duration"],projects:[u.mP],query:"",environment:[],start:t,end:n,range:r??void 0})}function y(e){const t=p(e)?e.startTimestamp:o()(e.dateReceived?e.dateReceived:e.dateCreated).valueOf()/1e3,n=p(e)?e.endTimestamp:t;return(0,i.TC)({start:t,end:n})}function x(e,t,n){let r=n;const s=[e];for(;s.length;){const e=s.pop();for(const t of e.children)s.push(t);r=t(r,e)}return r}function w(e,t){return x(e,((e,n)=>(t(n)&&e.push(n),e)),[])}function T(e){return Boolean(e.event_id)}function S(e){return Boolean(e.event_id)}},"./app/utils/performance/urls.ts":(e,t,n)=>{n.d(t,{D:()=>a});var r=n("./app/components/events/interfaces/spans/utils.tsx"),s=n("./app/utils.tsx");function a(e,t,n,a,o){const i={...a||{},transaction:n};(0,s.ri)(i.transaction)||delete i.transaction;const u={pathname:`/organizations/${e}/performance/${t}/`,query:i,hash:(0,s.ri)(o)?(0,r.ct)(o):void 0};return(0,s.ri)(u.hash)||delete u.hash,u}},"./app/views/performance/traceDetails/utils.tsx":(e,t,n)=>{n.d(t,{Rg:()=>o,YA:()=>a,uM:()=>i});var r=n("./app/constants/pageFilters.tsx"),s=n("./app/utils/performance/quickTrace/utils.tsx");function a(e,t,n,s){const{start:a,end:o,statsPeriod:i}=n;return{pathname:`/organizations/${e.slug}/performance/trace/${t}/`,query:{...s,statsPeriod:i,[r.V.PAGE_START]:a,[r.V.PAGE_END]:o}}}function o(e){const t={projects:new Set,errors:new Set,transactions:new Set,startTimestamp:Number.MAX_SAFE_INTEGER,endTimestamp:0,maxGeneration:0};return e.reduce(((e,t)=>(0,s.S2)(t,((e,t)=>{for(const n of t.errors??[])e.errors.add(n.event_id);return e.transactions.add(t.event_id),e.projects.add(t.project_slug),e.startTimestamp=Math.min(e.startTimestamp,t.start_timestamp),e.endTimestamp=Math.max(e.endTimestamp,t.timestamp),e.maxGeneration=Math.max(e.maxGeneration,t.generation),e}),e)),t)}function i(e){return null===e.parent_span_id}},"./app/views/performance/transactionSummary/utils.tsx":(e,t,n)=>{n.d(t,{K0:()=>l,MF:()=>h,PU:()=>d,Z6:()=>f,e1:()=>m,uI:()=>g,vd:()=>v,xf:()=>p});var r=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=n("./app/styles/space.tsx"),a=n("./app/utils/discover/urls.tsx"),o=n("./app/utils/getRouteStringFromRoutes.tsx"),i=n("./app/utils/performance/urls.ts"),u=n("./app/utils/tokenizeSearch.tsx"),c=n("./app/views/performance/traceDetails/utils.tsx");let l;function p(e){const t=d(e);return t.removeFilter("transaction"),t}function d(e){const t=new u.MY(e);return t.removeFilter("event.type"),t}function m(e){let{orgSlug:t,transaction:n,projectID:r,query:s,unselectedSeries:a="p100()",display:o,trendFunction:i,trendColumn:u,showTransactions:c,additionalQuery:l}=e;const d=function(e){let{orgSlug:t}=e;return`/organizations/${t}/performance/summary/`}({orgSlug:t});let m;return m="string"==typeof s.query?p(s.query).formatString():s.query,{pathname:d,query:{transaction:n,project:r,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:m,unselectedSeries:a,showTransactions:c,display:o,trendFunction:i,trendColumn:u,referrer:"performance-transaction-summary",...l}}}function f(e){return(t,n,r)=>{const s=`${n.trace}`;return s?(0,c.YA)(t,s,e,{}):{}}}function v(e){return(t,n,r,s)=>{const o=(0,a.JE)(n);return(0,i.D)(t.slug,o,e,r,s)}}function h(e){return(t,n,r)=>{const s=n.replayId;if(!s)return{};const a=`${n["project.name"]}:${s}`,i=(0,o.Z)(e);if(!n.timestamp)return{pathname:`/organizations/${t.slug}/replays/${a}/`,query:{referrer:i}};const u=new Date(n.timestamp).getTime()-n["transaction.duration"];return{pathname:`/organizations/${t.slug}/replays/${a}/`,query:{event_t:u,referrer:i}}}}!function(e){e.FASTEST="fastest",e.SLOW="slow",e.OUTLIER="outlier",e.RECENT="recent"}(l||(l={}));const g=(0,r.Z)("div",{target:"e1radvp0"})("margin-top:",(0,s.Z)(3),";")}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_transactionSummary_utils_tsx.4aa778e916f7f51759f3f11b874a2b8d.js.map