"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_charts_styles_tsx-app_components_modals_widgetBuilder_addToDashboardModal_tsx","app_components_charts_styles_tsx"],{"./app/components/charts/styles.tsx":(e,t,s)=>{s.d(t,{BO:()=>u,Gh:()=>l,OT:()=>o,m2:()=>r,r3:()=>c,uN:()=>d,ws:()=>p,xx:()=>n});var a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=s("./app/styles/space.tsx");const o=(0,a.Z)("h4",{target:"ey7s1vy7"})("display:inline-grid;grid-auto-flow:column;gap:",(0,i.Z)(1),";align-items:center;color:",(e=>e.theme.subText),";font-size:",(e=>e.theme.fontSizeMedium),";margin:",(0,i.Z)(1)," 0;"),d=(0,a.Z)("span",{target:"ey7s1vy6"})("color:",(e=>e.theme.subText),";font-size:",(e=>e.theme.fontSizeMedium),";margin-right:",(0,i.Z)(1),";"),r=(0,a.Z)("div",{target:"ey7s1vy5"})("display:grid;align-items:center;@media (min-width: ",(e=>e.theme.breakpoints.small),"){grid-auto-flow:column;grid-column-gap:",(0,i.Z)(1),";}"),n=(0,a.Z)("div",{target:"ey7s1vy4"})("padding:",(0,i.Z)(1)," ",(0,i.Z)(1)," ",(0,i.Z)(1)," ",(0,i.Z)(3),";border-top:1px solid ",(e=>e.theme.border),";@media (min-width: ",(e=>e.theme.breakpoints.small),"){display:flex;justify-content:space-between;flex-wrap:wrap;}"),l=(0,a.Z)("div",{target:"ey7s1vy3"})("display:inline-grid;grid-auto-flow:column;gap:",(0,i.Z)(1),";",(e=>e.theme.text.cardTitle),";color:",(e=>e.theme.headingColor),";align-items:center;"),p="app"==s.j?(0,a.Z)(l,{target:"ey7s1vy2"})("background-color:",(e=>e.theme.background),";border-bottom-right-radius:",(e=>e.theme.borderRadius),";position:absolute;z-index:1;"):null,c=(0,a.Z)("div",{target:"ey7s1vy1"})("display:inline-grid;grid-auto-flow:column;gap:",(0,i.Z)(1),";align-items:baseline;background-color:",(e=>e.theme.background),";position:absolute;top:40px;z-index:1;font-size:",(e=>e.theme.headerFontSize),";"),u=(0,a.Z)("div",{target:"ey7s1vy0"})("padding:",(0,i.Z)(2)," ",(0,i.Z)(3),";")},"./app/components/modals/widgetBuilder/addToDashboardModal.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>T,modalCss:()=>S});var a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=(s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/react/index.js")),o=s("./app/actionCreators/dashboards.tsx"),d=s("./app/actionCreators/indicator.tsx"),r=s("./app/components/button.tsx"),n=s("./app/components/buttonBar.tsx"),l=s("./app/components/forms/controls/selectControl.tsx"),p=s("./app/locale.tsx"),c=s("./app/styles/space.tsx"),u=s("./app/utils/handleXhrErrorResponse.tsx"),h=s("./app/utils/performance/contexts/metricsCardinality.tsx"),g=s("./app/utils/performance/contexts/metricsEnhancedSetting.tsx"),m=s("./app/utils/useApi.tsx"),b=s("./app/views/dashboardsV2/types.tsx"),w=s("./app/views/dashboardsV2/utils.tsx"),y=s("./app/views/dashboardsV2/widgetBuilder/utils.tsx"),x=s("./app/views/dashboardsV2/widgetCard/index.tsx"),Z=s("./app/views/organizationContext.tsx"),f=s("./app/views/performance/landing/metricsDataSwitcher.tsx"),v=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const _=(0,p.t)("Select a dashboard");function z(e){let{Header:t,Body:s,Footer:a,closeModal:n,location:c,organization:z,router:T,selection:S,widget:j,widgetAsQueryParams:B}=e;const A=(0,m.Z)(),[D,q]=(0,i.useState)(null),[M,E]=(0,i.useState)(null),[P,O]=(0,i.useState)(null);(0,i.useEffect)((()=>{let e=!1;return(0,o.j2)(A,z.slug).then((t=>{e||q(t)})),()=>{e=!0}}),[A,z.slug]),(0,i.useEffect)((()=>{let e=!1;return P===y.i0||null===P?E(null):(0,o.AK)(A,z.slug,P).then((t=>{e||E(t)})),()=>{e=!0}}),[A,z.slug,P]);const V=null!==P;return(0,v.BX)(Z.g.Provider,{value:z,children:[(0,v.tZ)(t,{closeButton:!0,children:(0,v.tZ)("h4",{children:(0,p.t)("Add to Dashboard")})}),(0,v.BX)(s,{children:[(0,v.tZ)(k,{children:(0,v.tZ)(l.Z,{disabled:null===D,menuPlacement:"auto",name:"dashboard",placeholder:(0,p.t)("Select Dashboard"),value:P,options:D&&[{label:(0,p.t)("+ Create New Dashboard"),value:"new"},...D.map((e=>{let{title:t,id:s,widgetDisplay:a}=e;return{label:t,value:s,disabled:a.length>=b.ZU,tooltip:a.length>=b.ZU&&(0,p._N)("Max widgets ([maxWidgets]) per dashboard reached.",{maxWidgets:b.ZU}),tooltipOptions:{position:"right"}}}))],onChange:e=>{e.disabled||O(e.value)}})}),(0,v.tZ)(k,{children:z.features.includes("dashboards-top-level-filter")?(0,p.t)("Any conflicting filters from this query will be overridden by Dashboard filters. This is a preview of how the widget will appear in your dashboard."):(0,p.t)("This is a preview of how the widget will appear in your dashboard.")}),(0,v.tZ)(h.BT,{organization:z,location:c,children:(0,v.tZ)(f.d,{organization:z,eventView:(0,w.tT)(j.title,j.queries[0],S,j.displayType),location:c,hideLoadingIndicator:!0,children:e=>(0,v.tZ)(g.kP,{location:c,forceTransactions:e.forceTransactionsOnly,children:(0,v.tZ)(x.Z,{organization:z,isEditing:!1,widgetLimitReached:!1,selection:z.features.includes("dashboards-top-level-filter")&&M?(0,w.fK)(M):S,dashboardFilters:z.features.includes("dashboards-top-level-filter")?(0,w.lM)(c)??M?.filters:{},widget:j,showStoredAlert:!0})})})})]}),(0,v.tZ)(a,{children:(0,v.BX)(C,{gap:1.5,children:[(0,v.tZ)(r.ZP,{onClick:async function(){if(null===M)return;let e=j.queries[0].orderby;b.FO.AREA&&j.queries[0].columns.length||(e="");const t=j.queries[0],s={...j,title:""===j.title?(0,p.t)("All Events"):j.title,queries:[{...t,orderby:e}]};try{const e={...M,widgets:[...M.widgets,s]};await(0,o.Y)(A,z.slug,e),n(),(0,d.S9)((0,p.t)("Successfully added widget to dashboard"))}catch(e){const t=(0,p.t)("Unable to add widget to dashboard");(0,u.Z)(t)(e),(0,d.Iw)(t)}},disabled:!V||P===y.i0,title:V?void 0:_,children:(0,p.t)("Add + Stay in Discover")}),(0,v.tZ)(r.ZP,{priority:"primary",onClick:function(){const e=P===y.i0?`/organizations/${z.slug}/dashboards/new/widget/new/`:`/organizations/${z.slug}/dashboard/${P}/widget/new/`;T.push({pathname:e,query:{...B,...z.features.includes("dashboards-top-level-filter")&&M?(0,w.aq)(M):{}}}),n()},disabled:!V,title:V?void 0:_,children:(0,p.t)("Open in Widget Builder")})]})})]})}z.displayName="AddToDashboardModal";const T=z,k=(0,a.Z)("div",{target:"erdydty1"})("margin-bottom:",(0,c.Z)(2),";"),C=(0,a.Z)(n.ZP,{target:"erdydty0"})("@media (max-width: ",(e=>e.theme.breakpoints.small),"){grid-template-rows:repeat(2, 1fr);gap:",(0,c.Z)(1.5),";width:100%;>button{width:100%;}}"),S={name:"jzg5s9",styles:"max-width:700px;margin:70px auto"}}}]);
//# sourceMappingURL=../sourcemaps/app_components_charts_styles_tsx-app_components_modals_widgetBuilder_addToDashboardModal_tsx.c6ee8b60a1efb01f76b21bd5977ea101.js.map