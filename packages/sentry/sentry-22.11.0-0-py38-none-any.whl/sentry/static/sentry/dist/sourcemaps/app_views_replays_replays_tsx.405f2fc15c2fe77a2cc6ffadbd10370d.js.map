{"version":3,"file":"chunks/app_views_replays_replays_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/components/onboardingPanel.tsx","webpack:///./app/components/replays/replaysFeatureBadge.tsx","webpack:///./app/utils/replays/hooks/useReplayList.tsx","webpack:///./app/views/replays/replaySearchBar.tsx","webpack:///./app/views/replays/filters.tsx","webpack:///./app/views/replays/list/replayOnboardingPanel.tsx","webpack:///./app/views/replays/replays.tsx"],"sourcesContent":["import styled from '@emotion/styled';\n\nimport {Panel} from 'sentry/components/panels';\nimport space from 'sentry/styles/space';\n\ninterface Props extends React.ComponentProps<typeof Panel> {\n  children: React.ReactNode;\n  image?: React.ReactNode;\n}\n\nfunction OnboardingPanel({image, children, ...props}: Props) {\n  return (\n    <Panel {...props}>\n      <Container>\n        {image ? <IlloBox>{image}</IlloBox> : null}\n        <StyledBox centered={!image}>{children}</StyledBox>\n      </Container>\n    </Panel>\n  );\n}\n\nconst Container = styled('div')`\n  padding: ${space(3)};\n  position: relative;\n\n  @media (min-width: ${p => p.theme.breakpoints.small}) {\n    display: flex;\n    align-items: center;\n    flex-direction: row;\n    justify-content: center;\n    flex-wrap: wrap;\n    min-height: 300px;\n    max-width: 1000px;\n    margin: 0 auto;\n  }\n\n  @media (min-width: ${p => p.theme.breakpoints.medium}) {\n    min-height: 350px;\n  }\n`;\n\nconst StyledBox = styled('div')<{centered?: boolean}>`\n  z-index: 1;\n\n  ${p => (p.centered ? 'text-align: center;' : '')}\n  ${p => (p.centered ? 'max-width: 600px;' : '')}\n\n  @media (min-width: ${p => p.theme.breakpoints.small}) {\n    flex: 2;\n  }\n`;\n\nconst IlloBox = styled(StyledBox)`\n  position: relative;\n  min-height: 100px;\n  max-width: 300px;\n  margin: ${space(2)} auto;\n\n  @media (min-width: ${p => p.theme.breakpoints.small}) {\n    flex: 1;\n    margin: ${space(3)};\n    max-width: auto;\n  }\n`;\n\nexport default OnboardingPanel;\n","import FeatureBadge from 'sentry/components/featureBadge';\n\nfunction ReplaysFeatureBadge(\n  props: Omit<React.ComponentProps<typeof FeatureBadge>, 'type'>\n) {\n  return <FeatureBadge {...props} type=\"beta\" />;\n}\n\nexport default ReplaysFeatureBadge;\n","import {useCallback, useEffect, useRef, useState} from 'react';\n\nimport type {Organization} from 'sentry/types';\nimport type EventView from 'sentry/utils/discover/eventView';\nimport fetchReplayList from 'sentry/utils/replays/fetchReplayList';\nimport useApi from 'sentry/utils/useApi';\nimport {useLocation} from 'sentry/utils/useLocation';\nimport type {ReplayListLocationQuery} from 'sentry/views/replays/types';\n\ntype Options = {\n  eventView: EventView;\n  organization: Organization;\n};\n\ntype State = Awaited<ReturnType<typeof fetchReplayList>>;\n\ntype Result = State;\n\nfunction useReplayList({eventView, organization}: Options): Result {\n  const api = useApi();\n  const location = useLocation<ReplayListLocationQuery>();\n  const querySearchRef = useRef<string>();\n  const controllerRef = useRef<AbortController | null>(null);\n\n  const [data, setData] = useState<State>({\n    fetchError: undefined,\n    isFetching: true,\n    pageLinks: null,\n    replays: [],\n  });\n\n  const loadReplays = useCallback(\n    async (abortSignal: AbortSignal) => {\n      setData(prev => ({\n        ...prev,\n        isFetching: true,\n      }));\n      const response = await fetchReplayList({\n        api,\n        organization,\n        location,\n        eventView,\n      });\n\n      if (!abortSignal.aborted) {\n        setData(response);\n      }\n    },\n    [api, organization, location, eventView]\n  );\n\n  useEffect(() => {\n    if (!querySearchRef.current || querySearchRef.current !== location.search) {\n      controllerRef.current = new AbortController();\n      querySearchRef.current = location.search;\n\n      loadReplays(controllerRef.current.signal);\n    }\n  }, [loadReplays, location.search]);\n\n  useEffect(() => {\n    const controller = controllerRef?.current;\n    return () => {\n      if (controller) {\n        controller.abort();\n      }\n    };\n  }, []);\n\n  return data;\n}\n\nexport default useReplayList;\n","import SmartSearchBar from 'sentry/components/smartSearchBar';\nimport {MAX_QUERY_LENGTH, NEGATION_OPERATOR, SEARCH_WILDCARD} from 'sentry/constants';\nimport {t} from 'sentry/locale';\nimport {Organization, PageFilters, SavedSearchType, TagCollection} from 'sentry/types';\nimport {getFieldDefinition, REPLAY_FIELDS} from 'sentry/utils/fields';\n\nconst SEARCH_SPECIAL_CHARS_REGEXP = new RegExp(\n  `^${NEGATION_OPERATOR}|\\\\${SEARCH_WILDCARD}`,\n  'g'\n);\n\n/**\n * Prepare query string (e.g. strip special characters like negation operator)\n */\nfunction prepareQuery(searchQuery: string) {\n  return searchQuery.replace(SEARCH_SPECIAL_CHARS_REGEXP, '');\n}\nconst getReplayFieldDefinition = (key: string) => getFieldDefinition(key, 'replay');\n\nfunction fieldDefinitionsToTagCollection(fieldKeys: string[]): TagCollection {\n  return Object.fromEntries(\n    fieldKeys.map(key => [\n      key,\n      {\n        key,\n        name: key,\n        kind: getReplayFieldDefinition(key)?.kind,\n      },\n    ])\n  );\n}\n\nconst REPLAY_TAGS = fieldDefinitionsToTagCollection(REPLAY_FIELDS);\n\ntype Props = React.ComponentProps<typeof SmartSearchBar> & {\n  organization: Organization;\n  pageFilters: PageFilters;\n};\n\nfunction SearchBar(props: Props) {\n  return (\n    <SmartSearchBar\n      {...props}\n      onGetTagValues={undefined}\n      supportedTags={REPLAY_TAGS}\n      placeholder={t('Search for users, duration, countErrors, and more')}\n      prepareQuery={prepareQuery}\n      maxQueryLength={MAX_QUERY_LENGTH}\n      searchSource=\"replay_index\"\n      savedSearchType={SavedSearchType.REPLAY}\n      maxMenuHeight={500}\n      hasRecentSearches\n      highlightUnsupportedTags\n      fieldDefinitionGetter={getReplayFieldDefinition}\n    />\n  );\n}\n\nexport default SearchBar;\n","import {browserHistory} from 'react-router';\nimport styled from '@emotion/styled';\n\nimport DatePageFilter from 'sentry/components/datePageFilter';\nimport EnvironmentPageFilter from 'sentry/components/environmentPageFilter';\nimport PageFilterBar from 'sentry/components/organizations/pageFilterBar';\nimport ProjectPageFilter from 'sentry/components/projectPageFilter';\nimport space from 'sentry/styles/space';\nimport {decodeScalar} from 'sentry/utils/queryString';\nimport {useLocation} from 'sentry/utils/useLocation';\nimport useOrganization from 'sentry/utils/useOrganization';\nimport usePageFilters from 'sentry/utils/usePageFilters';\nimport ReplaySearchBar from 'sentry/views/replays/replaySearchBar';\n\nfunction ReplaysFilters() {\n  const {selection} = usePageFilters();\n  const location = useLocation();\n  const organization = useOrganization();\n\n  const {pathname, query} = location;\n\n  return (\n    <FilterContainer>\n      <PageFilterBar condensed>\n        <ProjectPageFilter resetParamsOnChange={['cursor']} />\n        <EnvironmentPageFilter resetParamsOnChange={['cursor']} />\n        <DatePageFilter alignDropdown=\"left\" resetParamsOnChange={['cursor']} />\n      </PageFilterBar>\n      <ReplaySearchBar\n        organization={organization}\n        pageFilters={selection}\n        defaultQuery={decodeScalar(location.query?.query, '')}\n        onSearch={searchQuery => {\n          browserHistory.push({\n            pathname,\n            query: {\n              ...query,\n              cursor: undefined,\n              query: searchQuery.trim(),\n            },\n          });\n        }}\n      />\n    </FilterContainer>\n  );\n}\n\nconst FilterContainer = styled('div')`\n  display: inline-grid;\n  grid-template-columns: minmax(0, max-content) minmax(20rem, 1fr);\n  gap: ${space(2)};\n  width: 100%;\n  margin-bottom: ${space(2)};\n\n  @media (max-width: ${p => p.theme.breakpoints.small}) {\n    grid-template-columns: minmax(0, 1fr);\n  }\n`;\n\nexport default ReplaysFilters;\n","import styled from '@emotion/styled';\n\nimport ButtonBar from 'sentry/components/buttonBar';\nimport OnboardingPanel from 'sentry/components/onboardingPanel';\nimport {t} from 'sentry/locale';\n\ninterface Props {\n  children?: React.ReactNode;\n}\n\nexport default function ReplayOnboardingPanel(props: Props) {\n  return (\n    <OnboardingPanel image={null}>\n      <h3>{t('Playback of Your App')}</h3>\n      <p>\n        {t(\n          'Get to the root cause of an error or latency issue faster by seeing all the technical details related to that issue in one visual replay of your web application.'\n        )}\n      </p>\n      <ButtonList gap={1}>{props.children}</ButtonList>\n    </OnboardingPanel>\n  );\n}\n\nconst ButtonList = styled(ButtonBar)`\n  grid-template-columns: repeat(auto-fit, minmax(130px, max-content));\n  justify-content: center;\n`;\n","import {Fragment, useCallback, useEffect, useMemo} from 'react';\nimport {browserHistory, RouteComponentProps} from 'react-router';\nimport {useTheme} from '@emotion/react';\nimport styled from '@emotion/styled';\n\nimport Button from 'sentry/components/button';\nimport * as Layout from 'sentry/components/layouts/thirds';\nimport PageFiltersContainer from 'sentry/components/organizations/pageFilters/container';\nimport PageHeading from 'sentry/components/pageHeading';\nimport Pagination from 'sentry/components/pagination';\nimport ReplaysFeatureBadge from 'sentry/components/replays/replaysFeatureBadge';\nimport {SidebarPanelKey} from 'sentry/components/sidebar/types';\nimport {ALL_ACCESS_PROJECTS} from 'sentry/constants/pageFilters';\nimport {t} from 'sentry/locale';\nimport SidebarPanelStore from 'sentry/stores/sidebarPanelStore';\nimport {PageContent} from 'sentry/styles/organization';\nimport {Project} from 'sentry/types';\nimport {PageFilters} from 'sentry/types/core';\nimport EventView from 'sentry/utils/discover/eventView';\nimport {decodeScalar} from 'sentry/utils/queryString';\nimport {DEFAULT_SORT, REPLAY_LIST_FIELDS} from 'sentry/utils/replays/fetchReplayList';\nimport useReplayList from 'sentry/utils/replays/hooks/useReplayList';\nimport {MutableSearch} from 'sentry/utils/tokenizeSearch';\nimport useMedia from 'sentry/utils/useMedia';\nimport useOrganization from 'sentry/utils/useOrganization';\nimport usePageFilters from 'sentry/utils/usePageFilters';\nimport useProjects from 'sentry/utils/useProjects';\nimport {useRouteContext} from 'sentry/utils/useRouteContext';\nimport ReplaysFilters from 'sentry/views/replays/filters';\nimport ReplayOnboardingPanel from 'sentry/views/replays/list/replayOnboardingPanel';\nimport ReplayTable from 'sentry/views/replays/replayTable';\nimport type {ReplayListLocationQuery} from 'sentry/views/replays/types';\n\ntype Props = RouteComponentProps<{orgId: string}, {}, any, ReplayListLocationQuery>;\n\nfunction getProjectList(selectedProjects: PageFilters['projects'], projects: Project[]) {\n  if (selectedProjects[0] === ALL_ACCESS_PROJECTS || selectedProjects.length === 0) {\n    return projects;\n  }\n\n  const projectsByProjectId = projects.reduce<Record<string, Project>>((acc, project) => {\n    acc[project.id] = project;\n    return acc;\n  }, {});\n  return selectedProjects.map(id => projectsByProjectId[id]).filter(Boolean);\n}\n\nfunction useShouldShowOnboardingPanel() {\n  const {projects} = useProjects();\n  const {selection} = usePageFilters();\n\n  const shouldShowOnboardingPanel = useMemo(() => {\n    const projectList = getProjectList(selection.projects, projects);\n    const hasSentOneReplay = projectList.some(project => project.hasReplays);\n    return !hasSentOneReplay;\n  }, [selection.projects, projects]);\n\n  return shouldShowOnboardingPanel;\n}\n\nfunction useReplayOnboardingSidebarPanel() {\n  const {location} = useRouteContext();\n  const enabled = useShouldShowOnboardingPanel();\n\n  useEffect(() => {\n    if (enabled && location.hash === '#replay-sidequest') {\n      SidebarPanelStore.activatePanel(SidebarPanelKey.ReplaysOnboarding);\n    }\n  }, [enabled, location.hash]);\n\n  const activate = useCallback(event => {\n    event.preventDefault();\n    window.location.hash = 'replay-sidequest';\n    SidebarPanelStore.activatePanel(SidebarPanelKey.ReplaysOnboarding);\n  }, []);\n\n  return {enabled, activate};\n}\n\nfunction Replays({location}: Props) {\n  const organization = useOrganization();\n  const theme = useTheme();\n  const minWidthIsSmall = useMedia(`(min-width: ${theme.breakpoints.small})`);\n\n  const eventView = useMemo(() => {\n    const query = decodeScalar(location.query.query, '');\n    const conditions = new MutableSearch(query);\n\n    return EventView.fromNewQueryWithLocation(\n      {\n        id: '',\n        name: '',\n        version: 2,\n        fields: REPLAY_LIST_FIELDS,\n        projects: [],\n        query: conditions.formatString(),\n        orderby: decodeScalar(location.query.sort, DEFAULT_SORT),\n      },\n      location\n    );\n  }, [location]);\n\n  const {replays, pageLinks, isFetching, fetchError} = useReplayList({\n    organization,\n    eventView,\n  });\n\n  const {enabled: shouldShowOnboardingPanel, activate: activateOnboardingSidebarPanel} =\n    useReplayOnboardingSidebarPanel();\n\n  return (\n    <Fragment>\n      <Layout.Header>\n        <StyledLayoutHeaderContent>\n          <StyledHeading>\n            {t('Replays')} <ReplaysFeatureBadge space={1} />\n          </StyledHeading>\n        </StyledLayoutHeaderContent>\n      </Layout.Header>\n      <PageFiltersContainer>\n        <StyledPageContent>\n          <ReplaysFilters />\n          {shouldShowOnboardingPanel ? (\n            <ReplayOnboardingPanel>\n              <Button onClick={activateOnboardingSidebarPanel} priority=\"primary\">\n                {t('Get Started')}\n              </Button>\n              <Button\n                href=\"https://github.com/getsentry/sentry-replay/blob/main/README.md\"\n                external\n              >\n                {t('See Readme')}\n              </Button>\n            </ReplayOnboardingPanel>\n          ) : (\n            <Fragment>\n              <ReplayTable\n                isFetching={isFetching}\n                fetchError={fetchError}\n                replays={replays}\n                showProjectColumn={minWidthIsSmall}\n                sort={eventView.sorts[0]}\n              />\n              <Pagination\n                pageLinks={pageLinks}\n                onCursor={(cursor, path, searchQuery) => {\n                  browserHistory.push({\n                    pathname: path,\n                    query: {...searchQuery, cursor},\n                  });\n                }}\n              />\n            </Fragment>\n          )}\n        </StyledPageContent>\n      </PageFiltersContainer>\n    </Fragment>\n  );\n}\n\nconst StyledLayoutHeaderContent = styled(Layout.HeaderContent)`\n  display: flex;\n  justify-content: space-between;\n  flex-direction: row;\n`;\n\nconst StyledHeading = styled(PageHeading)`\n  line-height: 40px;\n  display: flex;\n`;\n\nconst StyledPageContent = styled(PageContent)`\n  box-shadow: 0px 0px 1px ${p => p.theme.gray200};\n  background-color: ${p => p.theme.background};\n`;\n\nexport default Replays;\n"],"names":["OnboardingPanel","image","children","props","Container","IlloBox","StyledBox","centered","space","p","theme","breakpoints","small","medium","ReplaysFeatureBadge","type","eventView","organization","api","useApi","location","useLocation","querySearchRef","useRef","controllerRef","data","setData","useState","fetchError","undefined","isFetching","pageLinks","replays","loadReplays","useCallback","async","prev","response","fetchReplayList","abortSignal","aborted","useEffect","current","search","AbortController","signal","controller","abort","SEARCH_SPECIAL_CHARS_REGEXP","RegExp","NEGATION_OPERATOR","SEARCH_WILDCARD","prepareQuery","searchQuery","replace","getReplayFieldDefinition","key","getFieldDefinition","REPLAY_TAGS","fieldKeys","REPLAY_FIELDS","Object","fromEntries","map","name","kind","SearchBar","onGetTagValues","supportedTags","placeholder","t","maxQueryLength","MAX_QUERY_LENGTH","searchSource","savedSearchType","SavedSearchType","maxMenuHeight","hasRecentSearches","highlightUnsupportedTags","fieldDefinitionGetter","ReplaysFilters","selection","usePageFilters","useOrganization","pathname","query","FilterContainer","condensed","resetParamsOnChange","alignDropdown","pageFilters","defaultQuery","decodeScalar","onSearch","browserHistory","cursor","trim","ReplayOnboardingPanel","ButtonList","gap","ButtonBar","Replays","useTheme","minWidthIsSmall","useMedia","useMemo","conditions","MutableSearch","EventView","id","version","fields","REPLAY_LIST_FIELDS","projects","formatString","orderby","sort","DEFAULT_SORT","useReplayList","enabled","shouldShowOnboardingPanel","activate","activateOnboardingSidebarPanel","useRouteContext","useProjects","projectList","selectedProjects","ALL_ACCESS_PROJECTS","length","projectsByProjectId","reduce","acc","project","filter","Boolean","getProjectList","some","hasReplays","useShouldShowOnboardingPanel","hash","SidebarPanelStore","SidebarPanelKey","event","preventDefault","window","useReplayOnboardingSidebarPanel","Fragment","StyledLayoutHeaderContent","StyledHeading","StyledPageContent","onClick","priority","href","external","showProjectColumn","sorts","onCursor","path","Layout","PageHeading","PageContent","gray200","background"],"sourceRoot":""}