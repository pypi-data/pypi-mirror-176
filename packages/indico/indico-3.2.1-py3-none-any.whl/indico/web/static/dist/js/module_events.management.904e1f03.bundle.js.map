{"version":3,"file":"js/module_events.management.904e1f03.bundle.js","mappings":"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","sources":["webpack:///indico/modules/events/management/client/js/badges.js","webpack:///indico/modules/events/management/client/js/SeriesManagement.module.scss?d286","webpack:///indico/modules/events/management/client/js/SeriesManagement.jsx","webpack:///indico/modules/events/management/client/js/index.js"],"sourcesContent":["// This file is part of Indico.\n// Copyright (C) 2002 - 2022 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\n(function(global) {\n  global.setupBadgePrinting = function setupBadgePrinting(templates) {\n    const $template = $('#template');\n    const $pageLayout = $('#page_layout');\n    const $dashedBorder = $('#dashed_border');\n    const $pageSize = $('#page_size');\n    const $pageOrientation = $('#page_orientation');\n    const $marginEditor = $('.margin-editor');\n    const $infoMessage = $('.info');\n\n    function toggleFoldableOption(template, pageSize, pageOrientation) {\n      const foldablePairs = {\n        A0: 'A2',\n        A1: 'A3',\n        A2: 'A4',\n        A3: 'A5',\n        A4: 'A6',\n        A5: 'A7',\n        A6: 'A8',\n      };\n      if (foldablePairs[pageSize] === template.format && pageOrientation === template.orientation) {\n        $(\"#page_layout option[value='foldable']\").prop('disabled', false);\n      } else {\n        $(\"#page_layout option[value='foldable']\").prop('disabled', true);\n        if ($('#page_layout :selected').val() === 'foldable') {\n          $('#page_layout :selected')\n            .next()\n            .prop('selected', true);\n        }\n      }\n    }\n\n    $template\n      .on('change', function() {\n        const $this = $(this);\n        const template = templates[parseInt($this.val(), 10)];\n\n        $pageLayout.closest('.form-group').toggle(!!template.backside_tpl_id);\n        $pageLayout.val('front_only');\n        toggleFoldableOption(template, $pageSize.val(), $pageOrientation.val());\n      })\n      .change();\n\n    $pageLayout\n      .on('change', function() {\n        $marginEditor.add($infoMessage).toggle($(this).val() !== 'foldable');\n        $dashedBorder.closest('.form-group').toggle($(this).val() !== 'foldable');\n      })\n      .change();\n    $pageSize\n      .add($pageOrientation)\n      .on('change', function() {\n        toggleFoldableOption(\n          templates[parseInt($template.val(), 10)],\n          $pageSize.val(),\n          $pageOrientation.val()\n        );\n        $pageLayout.change();\n      })\n      .change();\n  };\n})(window);\n","// extracted by mini-css-extract-plugin\nexport default {\"evt-list\":\"events-management-client-js-___SeriesManagement-module__evt-list___PkKqH\",\"evt-item\":\"events-management-client-js-___SeriesManagement-module__evt-item___5iu8a\",\"detail\":\"events-management-client-js-___SeriesManagement-module__detail___mXZyy\",\"delete-button\":\"events-management-client-js-___SeriesManagement-module__delete-button___BZmEH\",\"list-flex\":\"events-management-client-js-___SeriesManagement-module__list-flex___DE65m\",\"disabled\":\"events-management-client-js-___SeriesManagement-module__disabled___CB78C\",\"date-span\":\"events-management-client-js-___SeriesManagement-module__date-span___8yRl2\",\"category-chain\":\"events-management-client-js-___SeriesManagement-module__category-chain___SNXOv\",\"event-title\":\"events-management-client-js-___SeriesManagement-module__event-title___961dm\",\"warning-reason\":\"events-management-client-js-___SeriesManagement-module__warning-reason___ag6NQ\",\"positive-note\":\"events-management-client-js-___SeriesManagement-module__positive-note___TNVKv\"};","// This file is part of Indico.\n// Copyright (C) 2002 - 2022 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport eventSearch from 'indico-url:categories.event_search';\nimport eventSeriesURL from 'indico-url:event_series.event_series';\nimport singleEventAPI from 'indico-url:events.single_event_api';\n\nimport _ from 'lodash';\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\nimport React, {useState} from 'react';\nimport {Button, Dimmer, Divider, Dropdown, Icon, List, Loader, Popup} from 'semantic-ui-react';\n\nimport {TooltipIfTruncated, IButton, RequestConfirmDelete} from 'indico/react/components';\nimport {FinalCheckbox, FinalField, FinalInput, handleSubmitError} from 'indico/react/forms';\nimport {FinalModalForm, getChangedValues, getValuesForFields} from 'indico/react/forms/final-form';\nimport {useIndicoAxios} from 'indico/react/hooks';\nimport {Param, Translate} from 'indico/react/i18n';\nimport {indicoAxios, handleAxiosError} from 'indico/utils/axios';\nimport {makeAsyncDebounce} from 'indico/utils/debounce';\n\nimport './SeriesManagement.module.scss';\n\nconst debounce = makeAsyncDebounce(250);\nconst debounceSingle = makeAsyncDebounce(250);\n\nexport function SeriesManagement({eventId, categoryId, seriesId, timezone}) {\n  const hasSeries = seriesId !== null;\n  const [open, setOpen] = useState(false);\n  const {loading, reFetch, data} = useIndicoAxios(\n    hasSeries ? eventSeriesURL({series_id: seriesId}) : singleEventAPI({event_id: eventId}),\n    {manual: true}\n  );\n\n  const handleOpenClick = async () => {\n    await reFetch();\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  // either an actual series or a new series-like object containing the initial event\n  const series = data\n    ? hasSeries\n      ? data\n      : {\n          id: null,\n          events: [data],\n          show_sequence_in_title: false,\n          show_links: false,\n          event_title_pattern: '',\n        }\n    : null;\n\n  return (\n    <>\n      {hasSeries ? (\n        <IButton\n          borderless\n          icon=\"stack\"\n          title={Translate.string('Manage event series')}\n          onClick={handleOpenClick}\n        >\n          <Translate>Manage series</Translate>\n        </IButton>\n      ) : (\n        <IButton\n          borderless\n          icon=\"stack\"\n          title={Translate.string('Create event series')}\n          onClick={handleOpenClick}\n        >\n          <Translate>Create series</Translate>\n        </IButton>\n      )}\n      <Dimmer active={loading} page inverted>\n        <Loader />\n      </Dimmer>\n      {open && (\n        <SeriesManagementModal\n          currentEventId={eventId}\n          categoryId={categoryId}\n          timezone={timezone}\n          series={series}\n          onClose={handleClose}\n        />\n      )}\n    </>\n  );\n}\n\nSeriesManagement.propTypes = {\n  eventId: PropTypes.number.isRequired,\n  categoryId: PropTypes.number.isRequired,\n  timezone: PropTypes.string.isRequired,\n  seriesId: PropTypes.number,\n};\n\nSeriesManagement.defaultProps = {\n  seriesId: null,\n};\n\nfunction SeriesManagementModal({currentEventId, categoryId, series, timezone, onClose}) {\n  const [deleteConfirmOpen, setDeleteConfirmOpen] = useState(false);\n\n  const existingSeries = series.id !== null;\n  const localMoment = dt => moment(dt).tz(timezone);\n\n  const handleSubmit = async (data, form) => {\n    const payload = existingSeries ? getChangedValues(data, form) : getValuesForFields(data, form);\n    if (payload.events) {\n      payload.event_ids = payload.events.map(e => e.id);\n      delete payload.events;\n    }\n\n    try {\n      if (existingSeries) {\n        await indicoAxios.patch(eventSeriesURL({series_id: series.id}), payload);\n      } else {\n        await indicoAxios.post(eventSeriesURL(), payload);\n      }\n    } catch (e) {\n      return handleSubmitError(e, {event_ids: 'events'});\n    }\n\n    location.reload();\n    // never finish submitting to avoid fields being re-enabled\n    await new Promise(() => {});\n  };\n\n  const deleteSeries = async () => {\n    try {\n      await indicoAxios.delete(eventSeriesURL({series_id: series.id}));\n    } catch (e) {\n      handleAxiosError(e);\n      return true;\n    }\n    location.reload();\n  };\n\n  return (\n    <>\n      <FinalModalForm\n        id=\"event-series\"\n        header={\n          existingSeries ? Translate.string('Manage series') : Translate.string('Create series')\n        }\n        size=\"standard\"\n        alignTop\n        onSubmit={handleSubmit}\n        onClose={onClose}\n        initialValues={series}\n        disabledUntilChange={existingSeries}\n        extraActions={fprops =>\n          existingSeries && (\n            <Button\n              style={{marginRight: 'auto'}}\n              onClick={() => setDeleteConfirmOpen(true)}\n              disabled={fprops.submitting}\n              negative\n            >\n              <Translate>Delete series</Translate>\n            </Button>\n          )\n        }\n        submitLabel={\n          existingSeries ? Translate.string('Update series') : Translate.string('Create series')\n        }\n      >\n        {() => (\n          <>\n            <FinalField\n              name=\"events\"\n              isEqual={(a, b) => _.isEqual((a || []).map(e => e.id), (b || []).map(e => e.id))}\n              validate={val => {\n                if (!val.length) {\n                  return Translate.string('A series needs to contain at least one event.');\n                }\n              }}\n              component={SeriesEvents}\n              localMoment={localMoment}\n              categoryId={categoryId}\n              currentEventId={currentEventId}\n              existingSeriesId={series.id}\n              divider={\n                <Divider horizontal>\n                  {existingSeries ? (\n                    <Translate>Events in series</Translate>\n                  ) : (\n                    <Translate>Events to add</Translate>\n                  )}\n                </Divider>\n              }\n            />\n            <Divider horizontal>\n              <Translate>Series options</Translate>\n            </Divider>\n            <FinalCheckbox\n              name=\"show_sequence_in_title\"\n              label={Translate.string(\n                'Show the sequence number in the event titles (lectures only)'\n              )}\n            />\n            <FinalCheckbox\n              name=\"show_links\"\n              label={Translate.string(\n                'Show links to the other events of the series on the main event page'\n              )}\n            />\n            <FinalInput\n              name=\"event_title_pattern\"\n              label={Translate.string('Event title pattern')}\n              description={\n                <Translate>\n                  Title pattern for cloned events. Must contain the{' '}\n                  <Param name=\"placeholder\" wrapper={<code />} value=\"{n}\" /> placeholder which will\n                  indicate the new event's position in the series.\n                </Translate>\n              }\n              validate={val => {\n                if (val && !val.includes('{n}')) {\n                  return Translate.string(\n                    'Title pattern must contain the {placeholder} placeholder',\n                    {placeholder: '{n}'}\n                  );\n                }\n              }}\n            />\n          </>\n        )}\n      </FinalModalForm>\n      <RequestConfirmDelete\n        open={deleteConfirmOpen}\n        onClose={() => setDeleteConfirmOpen(false)}\n        requestFunc={deleteSeries}\n        persistent\n      >\n        <Translate>\n          Do you really want to delete this series? The associated events will not be deleted.\n        </Translate>\n      </RequestConfirmDelete>\n    </>\n  );\n}\n\nSeriesManagementModal.propTypes = {\n  currentEventId: PropTypes.number.isRequired,\n  categoryId: PropTypes.number.isRequired,\n  series: PropTypes.shape({\n    id: PropTypes.number,\n    events: PropTypes.arrayOf(PropTypes.object).isRequired,\n    show_sequence_in_title: PropTypes.bool.isRequired,\n    show_links: PropTypes.bool.isRequired,\n    event_title_pattern: PropTypes.string.isRequired,\n  }).isRequired,\n  timezone: PropTypes.string.isRequired,\n  onClose: PropTypes.func.isRequired,\n};\n\nfunction SeriesEvents({\n  value: currentEvents,\n  onChange,\n  onFocus,\n  onBlur,\n  divider,\n  localMoment,\n  categoryId,\n  currentEventId,\n  existingSeriesId,\n}) {\n  const [searchQuery, setSearchQuery] = useState(undefined);\n  const [results, setResults] = useState([]);\n  const [isSearching, setSearching] = useState(false);\n  const [denialReason, setDenialReason] = useState(null);\n\n  const existingSeries = existingSeriesId !== null;\n\n  const setTouched = () => {\n    // pretend focus+blur to mark the field as touched even if the dropdown was never focused\n    onFocus();\n    onBlur();\n  };\n\n  const getSingleEventInfo = async eventId => {\n    let resp;\n    try {\n      resp = await debounceSingle(() => indicoAxios.get(singleEventAPI({event_id: +eventId})));\n    } catch (error) {\n      handleAxiosError(error);\n      return;\n    }\n    if (resp.data === null) {\n      setDenialReason(Translate.string('No event found with this ID.'));\n    } else if (!resp.data.can_access) {\n      setDenialReason(Translate.string(\"You don't have rights to access this event.\"));\n    } else if (!resp.data.category_chain) {\n      setDenialReason(Translate.string('This event is unlisted.'));\n    } else {\n      setResults([resp.data]);\n      setDenialReason(null);\n      setSearching(false);\n      return;\n    }\n    setSearching(false);\n    setResults([]);\n  };\n\n  const searchEvents = async q => {\n    let resp;\n    try {\n      resp = await debounce(() => indicoAxios.get(eventSearch({category_id: categoryId, q})));\n    } catch (error) {\n      handleAxiosError(error);\n      return;\n    }\n    setResults(resp.data);\n    setDenialReason(null);\n    setSearching(false);\n  };\n\n  const handleSearch = async (__, {searchQuery: query}) => {\n    setSearchQuery(query);\n    query = query.trim();\n    setDenialReason(null);\n    if (!query) {\n      setSearching(false);\n      setResults([]);\n      return;\n    }\n    const regexUrl = new RegExp(`^${location.origin.replace('/', '\\\\/')}\\\\/event\\\\/([0-9]+)`);\n    const match = query.match(regexUrl);\n    if (match) {\n      setSearching(true);\n      getSingleEventInfo(match[1], setResults);\n    } else if (/^#([0-9])+$/.test(query)) {\n      setSearching(true);\n      getSingleEventInfo(query.substr(1), setResults);\n    } else if (query !== '#') {\n      setSearching(true);\n      searchEvents(query);\n    }\n  };\n\n  const currentEventIdsSet = new Set(currentEvents.map(e => e.id));\n\n  const eventOptions = results.map(evt => ({\n    key: evt.id,\n    value: evt.id,\n    text: evt.title,\n    disabled:\n      !evt.can_manage ||\n      !evt.category_chain ||\n      (evt.series_id !== existingSeriesId && evt.series_id !== null) ||\n      currentEventIdsSet.has(evt.id),\n    content: (\n      <div styleName=\"list-flex\">\n        <span styleName=\"date-span\">{localMoment(evt.start_dt).format('ll')}</span>\n        <span styleName=\"event-title\">\n          {evt.title}\n          <br />\n          <TooltipIfTruncated>\n            <span styleName=\"category-chain\">\n              {evt.category_chain ? (\n                evt.category_chain.join(' » ')\n              ) : (\n                <Translate>Unlisted</Translate>\n              )}\n            </span>\n          </TooltipIfTruncated>\n          {!evt.can_manage && (\n            <span styleName=\"warning-reason\">\n              <br />\n              <Translate>You do not have editing rights for this event.</Translate>\n            </span>\n          )}\n          {!evt.category_chain && (\n            <span styleName=\"warning-reason\">\n              <br />\n              <Translate>This event is unlisted.</Translate>\n            </span>\n          )}\n          {evt.series_id !== existingSeriesId && evt.series_id !== null && (\n            <span styleName=\"warning-reason\">\n              <br />\n              <Translate>This event is already part of a different series.</Translate>\n            </span>\n          )}\n          {currentEventIdsSet.has(evt.id) && (\n            <span styleName=\"positive-note\">\n              <br />\n              <Translate>This event is already part of this series.</Translate>\n            </span>\n          )}\n        </span>\n      </div>\n    ),\n  }));\n\n  return (\n    <>\n      <Dropdown\n        fluid\n        selection\n        search={x => x}\n        icon=\"search\"\n        selectOnBlur={false}\n        selectOnNavigation={false}\n        placeholder={Translate.string(\n          'Search for an event title or paste an event URL or event ID (#123)'\n        )}\n        options={eventOptions}\n        value={null}\n        loading={isSearching}\n        onSearchChange={handleSearch}\n        searchQuery={searchQuery}\n        onChange={(__, {value}) => {\n          const event = results.find(e => e.id === value);\n          const newEvents = [...currentEvents, event].sort(\n            (a, b) => moment(a.start_dt) - moment(b.start_dt)\n          );\n          onChange(newEvents);\n        }}\n        onFocus={onFocus}\n        onBlur={onBlur}\n        noResultsMessage={\n          isSearching\n            ? Translate.string('Searching...')\n            : denialReason !== null\n            ? denialReason\n            : searchQuery\n            ? Translate.string('No results found.')\n            : Translate.string('Enter search term')\n        }\n      />\n      {divider}\n      <List divided relaxed styleName=\"evt-list\">\n        {currentEvents.map(event => (\n          <List.Item key={event.id} styleName=\"evt-item\">\n            <List.Content>\n              <div styleName=\"list-flex\">\n                <span styleName=\"date-span\">\n                  {localMoment(event.start_dt).format('ll')}\n                  <br />\n                  {currentEventId === event.id && (\n                    <span styleName=\"positive-note\">\n                      (<Translate>this event</Translate>)\n                    </span>\n                  )}\n                </span>\n                <span styleName=\"event-title\">\n                  {event.title}\n                  <br />\n                  <TooltipIfTruncated>\n                    <span styleName=\"detail\">\n                      {event.category_chain ? (\n                        event.category_chain.join(' » ')\n                      ) : (\n                        <span styleName=\"warning-reason\">\n                          <Translate>Unlisted</Translate>\n                        </span>\n                      )}\n                    </span>\n                  </TooltipIfTruncated>\n                </span>\n                {(currentEventId !== event.id || existingSeries) && (\n                  <Popup\n                    trigger={\n                      <Icon\n                        styleName=\"delete-button\"\n                        name=\"close\"\n                        onClick={() => {\n                          setTouched();\n                          onChange(currentEvents.filter(e => e.id !== event.id));\n                        }}\n                        link\n                      />\n                    }\n                    content={Translate.string('Remove from event series')}\n                    position=\"bottom center\"\n                  />\n                )}\n              </div>\n            </List.Content>\n          </List.Item>\n        ))}\n      </List>\n    </>\n  );\n}\n\nSeriesEvents.propTypes = {\n  value: PropTypes.arrayOf(PropTypes.object).isRequired,\n  onChange: PropTypes.func.isRequired,\n  divider: PropTypes.node.isRequired,\n  localMoment: PropTypes.func.isRequired,\n  categoryId: PropTypes.number.isRequired,\n  currentEventId: PropTypes.number.isRequired,\n  existingSeriesId: PropTypes.number,\n  onFocus: PropTypes.func.isRequired,\n  onBlur: PropTypes.func.isRequired,\n};\n\nSeriesEvents.defaultProps = {\n  existingSeriesId: null,\n};\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2022 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\n/* global setupSearchBox:false, cornerMessage:false, handleAjaxError:false,\n          enableIfChecked:false */\n\nimport _ from 'lodash';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport 'indico/modules/events/util/list_generator';\nimport 'indico/modules/events/util/static_filters';\n\nimport './badges';\n\nimport {$T} from 'indico/utils/i18n';\nimport {natSortCompare} from 'indico/utils/sort';\n\nimport {SingleEventMove, EventPublish} from './EventMove';\nimport {SeriesManagement} from './SeriesManagement';\n\n(function(global) {\n  global.setupEventManagementActionMenu = function setupEventManagementActionMenu() {\n    const moveContainer = document.querySelector('#event-action-move-container');\n    if (moveContainer) {\n      ReactDOM.render(\n        React.createElement(SingleEventMove, {\n          eventId: +moveContainer.dataset.eventId,\n          currentCategoryId: +moveContainer.dataset.categoryId,\n          hasPendingMoveRequest: moveContainer.dataset.pendingRequest !== undefined,\n        }),\n        moveContainer\n      );\n    }\n\n    const manageSeriesContainer = document.querySelector('#event-action-manage-series-container');\n    if (manageSeriesContainer) {\n      const seriesId =\n        manageSeriesContainer.dataset.seriesId !== undefined\n          ? +manageSeriesContainer.dataset.seriesId\n          : null;\n      ReactDOM.render(\n        React.createElement(SeriesManagement, {\n          eventId: +manageSeriesContainer.dataset.eventId,\n          categoryId: +manageSeriesContainer.dataset.categoryId,\n          timezone: manageSeriesContainer.dataset.timezone,\n          seriesId,\n        }),\n        manageSeriesContainer\n      );\n    }\n\n    const publishContainer = document.querySelector('#event-action-publish-container');\n    if (publishContainer) {\n      ReactDOM.render(\n        React.createElement(EventPublish, {\n          eventId: +publishContainer.dataset.eventId,\n          hasPendingPublishRequest: publishContainer.dataset.pendingRequest !== undefined,\n        }),\n        publishContainer\n      );\n    }\n\n    $('#event-action-menu-clones-target').qbubble({\n      content: {\n        text: $('#event-action-menu-clones'),\n      },\n    });\n\n    $('#event-action-menu-actions-target').qbubble({\n      content: {\n        text: $('#event-action-menu-actions'),\n      },\n      style: {\n        classes: 'qtip-allow-overflow',\n      },\n    });\n\n    const selectors = [\n      '#event-action-menu-actions button:not(.js-dropdown)',\n      '#event-action-menu-actions a:not(.disabled)',\n    ];\n    $(selectors.join(', ')).on('click', function() {\n      $('#event-action-menu-actions-target').qbubble('hide');\n    });\n  };\n\n  function refreshPersonFilters() {\n    $('#person-filters ul > li').removeClass('enabled');\n    const personRows = $('.js-event-person-list tr[data-person-roles]');\n    const filters = $('.js-event-person-list [data-filter]:checked')\n      .map(function() {\n        const $this = $(this);\n        $this.closest('li').addClass('enabled');\n        return $this.data('filter');\n      })\n      .get();\n\n    const visibleEntries = personRows.filter(\n      (idx, entry) =>\n        !filters.length || filters.find(filterName => $(entry).data('person-roles')[filterName])\n    );\n\n    personRows.addClass('hidden');\n    visibleEntries.removeClass('hidden');\n    $('.js-event-person-list').trigger('indico:syncEnableIfChecked');\n  }\n\n  function toggleResetBtn() {\n    $('.js-reset-role-filter').toggleClass(\n      'disabled',\n      $('#person-filters [data-filter]:checked').length === 0\n    );\n  }\n\n  function initTooltip() {\n    $('.js-show-regforms').qtip({\n      content: {\n        text() {\n          return $(this).data('title');\n        },\n      },\n      hide: {\n        delay: 100,\n        fixed: true,\n      },\n    });\n  }\n\n  global.setupEventPersonsList = function setupEventPersonsList(options) {\n    options = $.extend(\n      {\n        hasNoAccountFilter: false,\n        hasNoRegistrationFilter: false,\n        hasNoBuiltinRolesFilter: false,\n      },\n      options\n    );\n\n    const filterConfig = {\n      itemHandle: 'tr',\n      listItems: '#event-participants-list tbody tr:not(.hidden)',\n      term: '#search-input',\n      state: '#filtering-state',\n      placeholder: '#filter-placeholder',\n    };\n    const applySearchFilters = setupSearchBox(filterConfig);\n\n    enableIfChecked(\n      '.js-event-person-list',\n      '.select-row:visible',\n      '.js-event-person-list .js-requires-selected-row'\n    );\n    if ($('.js-event-person-list').closest('.ui-dialog').length) {\n      $('.js-event-person-list [data-toggle=dropdown]')\n        .closest('.toolbar')\n        .dropdown();\n    }\n    $('.js-event-person-list [data-filter]').on('click', refreshPersonFilters);\n\n    $('.js-event-person-list td').on('mouseenter', function() {\n      const $this = $(this);\n      if (this.offsetWidth < this.scrollWidth && !$this.attr('title')) {\n        $this.attr('title', $this.text());\n      }\n    });\n\n    $('.js-event-person-list .tablesorter').tablesorter({\n      cssAsc: 'header-sort-asc',\n      cssDesc: 'header-sort-desc',\n      headerTemplate: '',\n      sortList: [[1, 0]],\n    });\n\n    const $roleLabels = $('.js-event-person-list .roles-column > span');\n    $roleLabels.qbubble({\n      show: {\n        event: 'mouseover',\n      },\n      hide: {\n        fixed: true,\n        delay: 100,\n        event: 'mouseleave',\n      },\n      position: {\n        my: 'left center',\n        at: 'right center',\n      },\n      content: {\n        text() {\n          const $this = $(this);\n          const html = $('<div>');\n          const role = $('<strong>', {text: $(this).data('role-name')});\n          html.append(role);\n          if ($this.is('.js-count-label')) {\n            const list = $('<ul>', {class: 'qbubble-item-list'});\n            const items = _.values($this.data('items')).sort(function(a, b) {\n              return natSortCompare(a.title.toLowerCase(), b.title.toLowerCase());\n            });\n\n            $.each(items, function() {\n              const item = $('<li>');\n              if (this.url) {\n                item.append($('<a>', {text: this.title, href: this.url}));\n              } else {\n                item.text(this.title);\n              }\n              list.append(item);\n            });\n            html.append(list);\n          }\n\n          return html;\n        },\n      },\n    });\n\n    // Sets background color of custom role labels based on their font color\n    $roleLabels.filter('.custom').each(function() {\n      const $this = $(this);\n      $this.css('background-color', $.Color($this.css('color')).alpha(0.1));\n    });\n\n    if (options.hasNoAccountFilter) {\n      $('.js-event-person-list [data-filter]:not(#filter-no-account)').on('change', function() {\n        $('#filter-no-account').prop('checked', false);\n        refreshPersonFilters();\n        applySearchFilters();\n      });\n      $('#filter-no-account').on('change', function() {\n        if (this.checked) {\n          $('.js-event-person-list [data-filter]:checked:not(#filter-no-account)').prop(\n            'checked',\n            false\n          );\n        }\n        refreshPersonFilters();\n        applySearchFilters();\n      });\n    }\n\n    if (options.hasNoRegistrationFilter) {\n      $('.js-event-person-list [data-filter]:not(#filter-no-registration)').on(\n        'change',\n        function() {\n          $('#filter-no-registration').prop('checked', false);\n          refreshPersonFilters();\n          applySearchFilters();\n        }\n      );\n      $('#filter-no-registration').on('change', function() {\n        if (this.checked) {\n          $('.js-event-person-list [data-filter]:checked:not(#filter-no-registration)').prop(\n            'checked',\n            false\n          );\n        }\n        refreshPersonFilters();\n        applySearchFilters();\n      });\n    }\n\n    if (options.hasNoBuiltinRolesFilter) {\n      $('.js-event-person-list [data-filter]:not(#filter-no-builtin-roles)').on(\n        'change',\n        function() {\n          $('#filter-no-builtin-roles').prop('checked', false);\n          refreshPersonFilters();\n          applySearchFilters();\n        }\n      );\n      $('#filter-no-builtin-roles').on('change', function() {\n        if (this.checked) {\n          $('.js-event-person-list [data-filter]:checked:not(#filter-no-builtin-roles)').prop(\n            'checked',\n            false\n          );\n        }\n        refreshPersonFilters();\n        applySearchFilters();\n      });\n    }\n\n    initTooltip();\n\n    const $personFilters = $('#person-filters');\n    // Sets background color of role filter items based on their colored squared color\n    $personFilters.find('li .colored-square').each(function() {\n      const $this = $(this);\n      $this.closest('li').css('background-color', $.Color($this.css('color')).alpha(0.1));\n    });\n\n    // Reset role filters\n    $personFilters.find('.js-reset-role-filter').on('click', function() {\n      $('.js-event-person-list [data-filter]').each(function() {\n        const $this = $(this);\n        $this.prop('checked', false);\n        $this.parent().toggleClass('enabled', false);\n      });\n      refreshPersonFilters();\n      applySearchFilters();\n      toggleResetBtn();\n    });\n\n    // Allows to click in the whole list item area to enable/disable role filters\n    $personFilters.find('li label').on('click', function(evt) {\n      evt.preventDefault();\n    });\n    $personFilters.find('li').on('click', function() {\n      const $checkbox = $(this).find('[data-filter]');\n      $checkbox.prop('checked', !$checkbox.prop('checked')).trigger('change');\n      toggleResetBtn();\n    });\n\n    $('#event-participants-list').on('indico:htmlUpdated', initTooltip);\n  };\n\n  global.showUndoWarning = function showUndoWarning(message, feedbackMessage, actionCallback) {\n    cornerMessage({\n      message,\n      progressMessage: $T.gettext('Undoing previous operation...'),\n      feedbackMessage,\n      actionLabel: $T.gettext('Undo'),\n      actionCallback,\n      duration: 10000,\n      feedbackDuration: 4000,\n      class: 'warning',\n    });\n  };\n\n  global.handleSelectedRowHighlight = function handleSelectedRowHighlight(trigger) {\n    const $obj = $('table.i-table input.select-row').on('change', function() {\n      $(this)\n        .closest('tr')\n        .toggleClass('selected', this.checked);\n    });\n\n    if (trigger) {\n      $obj.trigger('change');\n    }\n  };\n\n  global.showThemeSettingsForm = function showThemeSettingsForm(options) {\n    options = $.extend(\n      true,\n      {\n        formUrl: null,\n        themeFieldId: null,\n        lastFieldId: null,\n      },\n      options\n    );\n    $(`#${options.themeFieldId}`).on('change', function() {\n      $.ajax({\n        url: options.formUrl,\n        data: {\n          theme: $(this).val(),\n        },\n        complete: IndicoUI.Dialogs.Util.progress(),\n        error: handleAjaxError,\n        success(data) {\n          const lastField = $(`#${options.lastFieldId}`);\n          lastField.nextAll(':not(.form-group-footer)').remove();\n          if (data.html) {\n            lastField.after(data.html);\n          }\n          if (data.js) {\n            $('body').append(data.js);\n          }\n        },\n      });\n    });\n  };\n})(window);\n"],"names":["window","setupBadgePrinting","templates","$template","$","$pageLayout","$dashedBorder","$pageSize","$pageOrientation","$marginEditor","$infoMessage","toggleFoldableOption","template","pageSize","pageOrientation","A0","A1","A2","A3","A4","A5","A6","format","orientation","prop","val","next","on","$this","this","parseInt","closest","toggle","backside_tpl_id","change","add","debounce","makeAsyncDebounce","debounceSingle","SeriesManagement","eventId","categoryId","seriesId","timezone","hasSeries","open","setOpen","useState","loading","reFetch","data","useIndicoAxios","eventSeriesURL","series_id","singleEventAPI","event_id","manual","handleOpenClick","async","series","id","events","show_sequence_in_title","show_links","event_title_pattern","IButton","borderless","icon","title","Translate","onClick","Dimmer","active","page","inverted","Loader","SeriesManagementModal","currentEventId","onClose","deleteConfirmOpen","setDeleteConfirmOpen","existingSeries","localMoment","dt","moment","tz","header","size","alignTop","onSubmit","form","payload","getChangedValues","getValuesForFields","event_ids","map","e","indicoAxios","handleSubmitError","location","reload","Promise","initialValues","disabledUntilChange","extraActions","fprops","Button","style","marginRight","disabled","submitting","negative","submitLabel","name","isEqual","a","b","validate","length","component","SeriesEvents","existingSeriesId","divider","Divider","horizontal","label","description","wrapper","value","includes","placeholder","RequestConfirmDelete","requestFunc","handleAxiosError","persistent","currentEvents","onChange","onFocus","onBlur","searchQuery","setSearchQuery","undefined","results","setResults","isSearching","setSearching","denialReason","setDenialReason","getSingleEventInfo","resp","error","can_access","category_chain","currentEventIdsSet","Set","eventOptions","evt","key","text","can_manage","has","content","start_dt","TooltipIfTruncated","join","Dropdown","fluid","selection","search","x","selectOnBlur","selectOnNavigation","options","onSearchChange","__","query","trim","regexUrl","RegExp","origin","replace","match","test","substr","eventSearch","category_id","q","searchEvents","event","find","newEvents","sort","noResultsMessage","List","divided","relaxed","Popup","trigger","Icon","filter","link","position","propTypes","PropTypes","defaultProps","isRequired","global","refreshPersonFilters","removeClass","personRows","filters","addClass","get","visibleEntries","idx","entry","filterName","toggleResetBtn","toggleClass","initTooltip","qtip","hide","delay","fixed","setupEventManagementActionMenu","moveContainer","document","querySelector","ReactDOM","React","SingleEventMove","dataset","currentCategoryId","hasPendingMoveRequest","pendingRequest","manageSeriesContainer","publishContainer","EventPublish","hasPendingPublishRequest","qbubble","classes","setupEventPersonsList","extend","hasNoAccountFilter","hasNoRegistrationFilter","hasNoBuiltinRolesFilter","applySearchFilters","setupSearchBox","itemHandle","listItems","term","state","enableIfChecked","dropdown","offsetWidth","scrollWidth","attr","tablesorter","cssAsc","cssDesc","headerTemplate","sortList","$roleLabels","show","my","at","html","role","append","is","list","class","items","natSortCompare","toLowerCase","each","item","url","href","css","Color","alpha","checked","$personFilters","parent","preventDefault","$checkbox","showUndoWarning","message","feedbackMessage","actionCallback","cornerMessage","progressMessage","$T","actionLabel","duration","feedbackDuration","handleSelectedRowHighlight","$obj","showThemeSettingsForm","formUrl","themeFieldId","lastFieldId","ajax","theme","complete","IndicoUI","Dialogs","Util","progress","handleAjaxError","success","lastField","nextAll","remove","after","js"],"sourceRoot":""}