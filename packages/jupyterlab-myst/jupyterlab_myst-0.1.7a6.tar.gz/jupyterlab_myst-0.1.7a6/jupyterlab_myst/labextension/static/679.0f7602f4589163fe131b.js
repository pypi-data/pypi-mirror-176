"use strict";(self.webpackChunkjupyterlab_myst=self.webpackChunkjupyterlab_myst||[]).push([[679],{679:(e,t,n)=>{function r(e,t){e.block.ruler.before("blockquote","amsmath",l,{alt:["paragraph","reference","blockquote","list","footnote_def"]});const n=null==t?void 0:t.renderer;e.renderer.rules.amsmath=n?(t,r)=>{const a=t[r].content;let s;try{s=n(a)}catch(t){s=e.utils.escapeHtml(`${a}:${t.message}`)}return s}:(t,n)=>`<div class="math amsmath">\n${e.utils.escapeHtml(t[n].content)}\n</div>\n`}n.r(t),n.d(t,{amsmathPlugin:()=>r,default:()=>a});const a=r,s=new RegExp(`^\\\\begin{(${["equation","multline","gather","align","alignat","flalign","matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","eqnarray"].join("|")})([*]?)}`);function l(e,t,n,r){if(e.sCount[t]-e.blkIndent>=4)return!1;const a=e.bMarks[t]+e.tShift[t],l=function(e){const t=e.match(s);if(!t)return null;const[,n,r]=t,a=`\\end{${n}${r}}`,l=e.indexOf(a);return-1===l?null:{environment:n,numbered:r,endpos:l+a.length}}(e.src.slice(a));if(!l)return!1;const{environment:i,numbered:o}=l;let{endpos:m}=l;m+=a;let u=t;for(;u<n;){if(m>=e.bMarks[u]&&m<=e.eMarks[u]){e.line=u+1;break}u+=1}if(!r){const n=e.push("amsmath","math",0);n.block=!0,n.content=e.src.slice(a,m),n.meta={environment:i,numbered:o},n.map=[t,u]}return!0}}}]);