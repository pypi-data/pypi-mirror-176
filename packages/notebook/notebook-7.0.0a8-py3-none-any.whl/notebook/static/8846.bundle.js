(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[8846,4397,2040],{69934:(t,e,s)=>{"use strict";s.r(e),s.d(e,{YBaseCell:()=>m,YCodeCell:()=>_,YDocument:()=>l,YFile:()=>c,YMarkdownCell:()=>M,YNotebook:()=>u,YRawCell:()=>f,convertYMapEventToMapChange:()=>v,createCell:()=>h,createCellModelFromSharedType:()=>d,createMutex:()=>w,createStandaloneCell:()=>g});var n=s(39787),a=s(6691),o=s(47941),r=s(90157),i=s(67792);class l{constructor(){this.ydoc=new i.Doc,this.ystate=this.ydoc.getMap("state"),this.undoManager=new i.UndoManager([],{trackedOrigins:new Set([this]),doc:this.ydoc}),this.awareness=new r.GL(this.ydoc),this._changed=new a.Signal(this),this._isDisposed=!1}get changed(){return this._changed}get isDisposed(){return this._isDisposed}canUndo(){return this.undoManager.undoStack.length>0}canRedo(){return this.undoManager.redoStack.length>0}dispose(){this._isDisposed||(this._isDisposed=!0,this.ydoc.destroy(),a.Signal.clearData(this))}undo(){this.undoManager.undo()}redo(){this.undoManager.redo()}clearUndoHistory(){this.undoManager.clear()}transact(t,e=!0){this.ydoc.transact(t,e?this:null)}}class c extends l{constructor(){super(),this.ysource=this.ydoc.getText("source"),this._modelObserver=t=>{const e={};e.sourceChange=t.changes.delta,this._changed.emit(e)},this._onStateChanged=t=>{const e=[];t.keysChanged.forEach((s=>{const n=t.changes.keys.get(s);n&&e.push({name:s,oldValue:n.oldValue,newValue:this.ystate.get(s)})})),this._changed.emit({stateChange:e})},this.undoManager.addToScope(this.ysource),this.ysource.observe(this._modelObserver),this.ystate.observe(this._onStateChanged)}static create(){return new c}dispose(){this.isDisposed||(this.ysource.unobserve(this._modelObserver),this.ystate.unobserve(this._onStateChanged),super.dispose())}getSource(){return this.ysource.toString()}setSource(t){this.transact((()=>{const e=this.ysource;e.delete(0,e.length),e.insert(0,t)}))}updateSource(t,e,s=""){this.transact((()=>{const n=this.ysource;n.insert(t,s),n.delete(t+s.length,e-t)}))}}class u extends l{constructor(t={}){var e,s;super(),this.ycells=this.ydoc.getArray("cells"),this.ymeta=this.ydoc.getMap("meta"),this.ymodel=this.ydoc.getMap("model"),this._onMetaChanged=t=>{if(t.keysChanged.has("metadata")){const e=t.changes.keys.get("metadata"),s={oldValue:(null==e?void 0:e.oldValue)?e.oldValue:void 0,newValue:this.getMetadata()};this._changed.emit({metadataChange:s})}if(t.keysChanged.has("nbformat")){const e=t.changes.keys.get("nbformat"),s={key:"nbformat",oldValue:(null==e?void 0:e.oldValue)?e.oldValue:void 0,newValue:this.nbformat};this._changed.emit({nbformatChanged:s})}if(t.keysChanged.has("nbformat_minor")){const e=t.changes.keys.get("nbformat_minor"),s={key:"nbformat_minor",oldValue:(null==e?void 0:e.oldValue)?e.oldValue:void 0,newValue:this.nbformat_minor};this._changed.emit({nbformatChanged:s})}},this._onStateChanged=t=>{const e=[];t.keysChanged.forEach((s=>{const n=t.changes.keys.get(s);n&&e.push({name:s,oldValue:n.oldValue,newValue:this.ystate.get(s)})})),this._changed.emit({stateChange:e})},this._onYCellsChanged=t=>{t.changes.added.forEach((t=>{const e=t.content.type;this._ycellMapping.has(e)||this._ycellMapping.set(e,d(e));const s=this._ycellMapping.get(e);s._notebook=this,s._undoManager=this.disableDocumentWideUndoRedo?new i.UndoManager([s.ymodel],{}):this.undoManager})),t.changes.deleted.forEach((t=>{const e=t.content.type,s=this._ycellMapping.get(e);s&&(s.dispose(),this._ycellMapping.delete(e))}));let e=0;const s=[];t.changes.delta.forEach((t=>{if(null!=t.insert){const n=t.insert.map((t=>this._ycellMapping.get(t)));s.push({insert:n}),this.cells.splice(e,0,...n),e+=t.insert.length}else null!=t.delete?(s.push(t),this.cells.splice(e,t.delete)):null!=t.retain&&(s.push(t),e+=t.retain)})),this._changed.emit({cellsChange:s})},this._ycellMapping=new WeakMap,this._disableDocumentWideUndoRedo=null!==(e=t.disableDocumentWideUndoRedo)&&void 0!==e&&e,this.undoManager.addToScope(this.ycells),this.ycells.observe(this._onYCellsChanged),this.cells=this.ycells.toArray().map((t=>(this._ycellMapping.has(t)||this._ycellMapping.set(t,d(t)),this._ycellMapping.get(t)))),this.ymeta.observe(this._onMetaChanged),this.ystate.observe(this._onStateChanged);let n=null;switch(null!==(s=t.initialCellType)&&void 0!==s?s:"code"){case"raw":n="AAAGyp/SnR8DAgECAAUHACcAKCQeY2VsbHNzb3VyY2VtZXRhZGF0YWNlbGxfdHlwZWlkBQYICQIDAQAAAgECAkEBAQUAdgB3A3Jhd3ckN2M4MGMyMWYtNjIxZi00MWFlLTg5YTAtZGE2YzAzOGE2NjQzAA==";break;case"markdown":n="AAAF+8KuWAMCAQIABQcAJwAoJB5jZWxsc3NvdXJjZW1ldGFkYXRhY2VsbF90eXBlaWQFBggJAgMBAAACAQICQQEBBQB2AHcIbWFya2Rvd253JDE2MWUyNDFjLTI3ZWEtNDQ3NC1hMTljLWI5NzZkZDJhN2YxZQA=";break;case"code":n="AAAWo+3Yxg2IqMqfBePt2MYNBMioyp8FBQIBCgEAD0cAJwAoAycABwAnACgDJ3Fjc291cmNlbWV0YWRhdGFjZWxsX3R5cGVpZGV4ZWN1dGlvbl9jb3VudG91dHB1dHNjZWxsc3NvdXJjZW1ldGFkYXRhY2VsbF90eXBlaWRleGVjdXRpb25fY291bnRvdXRwdXRzBggJAg8HBQYICQIPBwUABQEAAAYBAgABAgACQQYCBwB2AHcEY29kZXckNTZhODQwMTItZWRlNS00MmVjLTg1OTAtMTQyMWVlNjE3NDk3fQAHAHYAdwRjb2RldyRlNTEzZTc5Ni0zODZiLTQ4N2YtYTRhYy00OTI2ZDU3MmRiYjV9AAGIlOXPAgEABg=="}n&&i.applyUpdateV2(this.ydoc,o.Gh(n))}static create(t={}){return new u(t)}get disableDocumentWideUndoRedo(){return this._disableDocumentWideUndoRedo}get nbformat(){return this.ymeta.get("nbformat")}set nbformat(t){this.transact((()=>{this.ymeta.set("nbformat",t)}),!1)}get nbformat_minor(){return this.ymeta.get("nbformat_minor")}set nbformat_minor(t){this.transact((()=>{this.ymeta.set("nbformat_minor",t)}),!1)}dispose(){this.isDisposed||(this.ycells.unobserve(this._onYCellsChanged),this.ymeta.unobserve(this._onMetaChanged),this.ystate.unobserve(this._onStateChanged),super.dispose())}getCell(t){return this.cells[t]}insertCell(t,e){this.insertCells(t,[e])}insertCells(t,e){e.forEach((t=>{this._ycellMapping.set(t.ymodel,t),this.disableDocumentWideUndoRedo||(t.undoManager=this.undoManager)})),this.transact((()=>{this.ycells.insert(t,e.map((t=>t.ymodel)))}))}moveCell(t,e){this.transact((()=>{const s=this.getCell(t).clone();this.deleteCell(t),this.insertCell(e,s)}))}deleteCell(t){this.deleteCellRange(t,t+1)}deleteCellRange(t,e){this.transact((()=>{this.ycells.delete(t,e-t)}))}getMetadata(){const t=this.ymeta.get("metadata");return n.JSONExt.deepCopy(null!=t?t:{})}setMetadata(t){this.ymeta.set("metadata",n.JSONExt.deepCopy(t))}updateMetadata(t){this.ymeta.set("metadata",Object.assign({},this.getMetadata(),t))}}const d=t=>{switch(t.get("cell_type")){case"code":return new _(t,t.get("source"));case"markdown":return new M(t,t.get("source"));case"raw":return new f(t,t.get("source"));default:throw new Error("Found unknown cell type")}},h=(t,e=y)=>{switch(t.cell_type){case"markdown":{const s=t,n=e.createMarkdownCell(s.id);return null!=s.source&&n.setSource("string"==typeof s.source?s.source:s.source.join("\n")),null!=s.metadata&&n.setMetadata(s.metadata),null!=s.attachments&&n.setAttachments(s.attachments),n}case"code":{const s=t,n=e.createCodeCell(s.id);return null!=s.source&&n.setSource("string"==typeof s.source?s.source:s.source.join("\n")),null!=s.metadata&&n.setMetadata(s.metadata),null!=s.execution_count&&(n.execution_count=s.execution_count),s.outputs&&n.setOutputs(s.outputs),n}default:{const s=t,n=e.createRawCell(s.id);return null!=s.source&&n.setSource("string"==typeof s.source?s.source:s.source.join("\n")),null!=s.metadata&&n.setMetadata(s.metadata),s.attachments&&n.setAttachments(s.attachments),n}}},g=t=>h(t,p);class p{static createMarkdownCell(t){return M.createStandalone(t)}static createCodeCell(t){return _.createStandalone(t)}static createRawCell(t){return f.createStandalone(t)}}class y{static createMarkdownCell(t){return M.create({id:t})}static createCodeCell(t){return _.create({id:t})}static createRawCell(t){return f.create({id:t})}}class m{constructor(t,e,s=!1){this._modelObserver=t=>{const e={},s=t.find((t=>t.target===this.ymodel.get("source")));s&&(e.sourceChange=s.changes.delta);const n=t.find((t=>t.target===this.ymodel.get("outputs")));n&&(e.outputsChange=n.changes.delta);const a=t.find((t=>t.target===this.ymodel));if(a&&a.keysChanged.has("metadata")){const t=a.changes.keys.get("metadata");e.metadataChange={oldValue:(null==t?void 0:t.oldValue)?t.oldValue:void 0,newValue:this.getMetadata()}}if(a&&a.keysChanged.has("execution_count")){const t=a.changes.keys.get("execution_count");e.executionCountChange={oldValue:t.oldValue,newValue:this.ymodel.get("execution_count")}}const o=this.ymodel.get("source");a&&a.keysChanged.has("source")&&(e.sourceChange=[{delete:this._prevSourceLength},{insert:o.toString()}]),this._prevSourceLength=o.length,this._changed.emit(e)},this._notebook=null,this._changed=new a.Signal(this),this._isDisposed=!1,this._undoManager=null,this.isStandalone=s,this.ymodel=t,this._ysource=e,this._prevSourceLength=e?e.length:0,this.ymodel.observeDeep(this._modelObserver),this._awareness=null}static create(t={}){var e,s;const a=new i.Map,o=new i.Text;return a.set("source",o),a.set("metadata",{}),a.set("cell_type",this.prototype.cell_type),a.set("id",null!==(e=t.id)&&void 0!==e?e:n.UUID.uuid4()),new this(a,o,null!==(s=t.isStandalone)&&void 0!==s&&s)}static createStandalone(t){const e=this.create({id:t,isStandalone:!0}),s=new i.Doc;return s.getArray().insert(0,[e.ymodel]),e._awareness=new r.GL(s),e._undoManager=new i.UndoManager([e.ymodel],{trackedOrigins:new Set([e])}),e}get awareness(){var t,e,s;return null!==(s=null!==(t=this._awareness)&&void 0!==t?t:null===(e=this.notebook)||void 0===e?void 0:e.awareness)&&void 0!==s?s:null}get cell_type(){throw new Error("A YBaseCell must not be constructed")}get changed(){return this._changed}get isDisposed(){return this._isDisposed}get notebook(){return this._notebook}get undoManager(){var t;return this.notebook?(null===(t=this.notebook)||void 0===t?void 0:t.disableDocumentWideUndoRedo)?this._undoManager:this.notebook.undoManager:this._undoManager}set undoManager(t){this._undoManager=t}get ysource(){return this._ysource}canUndo(){return!!this.undoManager&&this.undoManager.undoStack.length>0}canRedo(){return!!this.undoManager&&this.undoManager.redoStack.length>0}clearUndoHistory(){var t;null===(t=this.undoManager)||void 0===t||t.clear()}clone(){const t=new i.Map,e=new i.Text(this.getSource());t.set("source",e),t.set("metadata",this.getMetadata()),t.set("cell_type",this.cell_type),t.set("id",n.UUID.uuid4());const s=new(0,this.constructor)(t,e);return s._undoManager=this.undoManager,s}undo(){var t;null===(t=this.undoManager)||void 0===t||t.undo()}redo(){var t;null===(t=this.undoManager)||void 0===t||t.redo()}dispose(){var t;this._isDisposed||(this._isDisposed=!0,this.ymodel.unobserveDeep(this._modelObserver),null===(t=this._awareness)||void 0===t||t.destroy(),!this.notebook&&this._undoManager&&this._undoManager.destroy(),a.Signal.clearData(this))}getAttachments(){return this.ymodel.get("attachments")}setAttachments(t){this.transact((()=>{null==t?this.ymodel.delete("attachments"):this.ymodel.set("attachments",t)}))}getId(){return this.ymodel.get("id")}getSource(){return this.ysource.toString()}setSource(t){this.transact((()=>{this.ysource.delete(0,this.ysource.length),this.ysource.insert(0,t)}))}updateSource(t,e,s=""){this.transact((()=>{const n=this.ysource;n.insert(t,s),n.delete(t+s.length,e-t)}))}getMetadata(){return n.JSONExt.deepCopy(this.ymodel.get("metadata"))}setMetadata(t){var e;const s=n.JSONExt.deepCopy(t);null!=s.collapsed?(s.jupyter=s.jupyter||{},s.jupyter.outputs_hidden=s.collapsed):null!=(null===(e=null==s?void 0:s.jupyter)||void 0===e?void 0:e.outputs_hidden)&&(s.collapsed=s.jupyter.outputs_hidden),null!=this.ymodel.doc&&n.JSONExt.deepEqual(s,this.getMetadata())||this.transact((()=>{this.ymodel.set("metadata",s)}))}toJSON(){return{id:this.getId(),cell_type:this.cell_type,source:this.getSource(),metadata:this.getMetadata()}}transact(t,e=!0){this.notebook&&e?this.notebook.transact(t):null==this.ymodel.doc?t():this.ymodel.doc.transact(t,this)}}class _ extends m{constructor(t,e,s=!1){super(t,e,s),this._youtputs=new i.Array}static create(t={}){const e=super.create(t);return e.ymodel.set("execution_count",null),e.ymodel.set("outputs",e._youtputs),e}static createStandalone(t){return super.createStandalone(t)}get cell_type(){return"code"}get execution_count(){return this.ymodel.get("execution_count")||null}set execution_count(t){this.execution_count!==t&&this.transact((()=>{this.ymodel.set("execution_count",t)}))}getOutputs(){return n.JSONExt.deepCopy(this._youtputs.toArray())}setOutputs(t){this.transact((()=>{this._youtputs.delete(0,this._youtputs.length),this._youtputs.insert(0,t)}),!1)}updateOutputs(t,e,s=[]){const n=e<this._youtputs.length?e-t:this._youtputs.length-t;this.transact((()=>{this._youtputs.delete(t,n),this._youtputs.insert(t,s)}),!1)}clone(){const t=super.clone();return t._youtputs.insert(0,this.getOutputs()),t.ymodel.set("execution_count",this.execution_count),t.ymodel.set("outputs",t._youtputs),t}toJSON(){return{id:this.getId(),cell_type:"code",source:this.getSource(),metadata:this.getMetadata(),outputs:this.getOutputs(),execution_count:this.execution_count}}}class f extends m{static create(t={}){return super.create(t)}static createStandalone(t){return super.createStandalone(t)}get cell_type(){return"raw"}toJSON(){return{id:this.getId(),cell_type:"raw",source:this.getSource(),metadata:this.getMetadata(),attachments:this.getAttachments()}}}class M extends m{static create(t={}){return super.create(t)}static createStandalone(t){return super.createStandalone(t)}get cell_type(){return"markdown"}toJSON(){return{id:this.getId(),cell_type:"markdown",source:this.getSource(),metadata:this.getMetadata(),attachments:this.getAttachments()}}}function v(t){let e=new Map;return t.changes.keys.forEach(((t,s)=>{e.set(s,{action:t.action,oldValue:t.oldValue,newValue:this.ymeta.get(s)})})),e}const w=()=>{let t=!0;return e=>{if(t){t=!1;try{e()}finally{t=!0}}}}},79504:(t,e,s)=>{"use strict";s.d(e,{Dp:()=>o,Z$:()=>n,kJ:()=>r,s7:()=>a});const n=t=>t[t.length-1],a=(t,e)=>{for(let s=0;s<e.length;s++)t.push(e[s])},o=Array.from,r=Array.isArray},38828:(t,e,s)=>{"use strict";s.d(e,{Hi:()=>o,PP:()=>a});var n=s(36498);const a=(t,e,s=0)=>{try{for(;s<t.length;s++)t[s](...e)}finally{s<t.length&&a(t,e,s+1)}},o=(t,e)=>{if(null==t||null==e)return((t,e)=>t===e)(t,e);if(t.constructor!==e.constructor)return!1;if(t===e)return!0;switch(t.constructor){case ArrayBuffer:t=new Uint8Array(t),e=new Uint8Array(e);case Uint8Array:if(t.byteLength!==e.byteLength)return!1;for(let s=0;s<t.length;s++)if(t[s]!==e[s])return!1;break;case Set:if(t.size!==e.size)return!1;for(const s of t)if(!e.has(s))return!1;break;case Map:if(t.size!==e.size)return!1;for(const s of t.keys())if(!e.has(s)||!o(t.get(s),e.get(s)))return!1;break;case Object:if(n.kE(t)!==n.kE(e))return!1;for(const s in t)if(!n.l$(t,s)||!o(t[s],e[s]))return!1;break;case Array:if(t.length!==e.length)return!1;for(let s=0;s<t.length;s++)if(!o(t[s],e[s]))return!1;break;default:return!1}return!0}},22592:(t,e,s)=>{"use strict";s.d(e,{JG:()=>a,UI:()=>r,Ue:()=>n,Yj:()=>i,Yu:()=>o});const n=()=>new Map,a=t=>{const e=n();return t.forEach(((t,s)=>{e.set(s,t)})),e},o=(t,e,s)=>{let n=t.get(e);return void 0===n&&t.set(e,n=s()),n},r=(t,e)=>{const s=[];for(const[n,a]of t)s.push(e(a,n));return s},i=(t,e)=>{for(const[s,n]of t)if(e(n,s))return!0;return!1}},11182:(t,e,s)=>{"use strict";s.d(e,{Fp:()=>r,GR:()=>l,GW:()=>n,VV:()=>o,Wn:()=>a,sQ:()=>i});const n=Math.floor,a=(Math.ceil,Math.abs),o=(Math.imul,Math.round,Math.log10,Math.log2,Math.log,Math.sqrt,(t,e)=>t<e?t:e),r=(t,e)=>t>e?t:e,i=(Number.isNaN,Math.pow),l=(Math.sign,t=>0!==t?t<0:1/t<0)},36498:(t,e,s)=>{"use strict";s.d(e,{$m:()=>i,UI:()=>a,kE:()=>o,l$:()=>r}),Object.assign;const n=Object.keys,a=(t,e)=>{const s=[];for(const n in t)s.push(e(t[n],n));return s},o=t=>n(t).length,r=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i=(t,e)=>t===e||o(t)===o(e)&&((t,e)=>{for(const s in t)if(!e(t[s],s))return!1;return!0})(t,((t,s)=>(void 0!==t||r(e,s))&&e[s]===t))},12330:(t,e,s)=>{"use strict";s.d(e,{y:()=>r});var n=s(22592),a=s(79287),o=s(79504);class r{constructor(){this._observers=n.Ue()}on(t,e){n.Yu(this._observers,t,a.Ue).add(e)}once(t,e){const s=(...n)=>{this.off(t,s),e(...n)};this.on(t,s)}off(t,e){const s=this._observers.get(t);void 0!==s&&(s.delete(e),0===s.size&&this._observers.delete(t))}emit(t,e){return o.Dp((this._observers.get(t)||n.Ue()).values()).forEach((t=>t(...e)))}destroy(){this._observers=n.Ue()}}},79287:(t,e,s)=>{"use strict";s.d(e,{Ue:()=>n});const n=()=>new Set},2431:(t,e,s)=>{"use strict";s.d(e,{ZG:()=>n});const n=Date.now},27061:t=>{var e,s,n=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function r(t){if(e===setTimeout)return setTimeout(t,0);if((e===a||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(s){try{return e.call(null,t,0)}catch(s){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:a}catch(t){e=a}try{s="function"==typeof clearTimeout?clearTimeout:o}catch(t){s=o}}();var i,l=[],c=!1,u=-1;function d(){c&&i&&(c=!1,i.length?l=i.concat(l):u=-1,l.length&&h())}function h(){if(!c){var t=r(d);c=!0;for(var e=l.length;e;){for(i=l,l=[];++u<e;)i&&i[u].run();u=-1,e=l.length}i=null,c=!1,function(t){if(s===clearTimeout)return clearTimeout(t);if((s===o||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(t);try{s(t)}catch(e){try{return s.call(null,t)}catch(e){return s.call(this,t)}}}(t)}}function g(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)e[s-1]=arguments[s];l.push(new g(t,e)),1!==l.length||c||r(h)},g.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},90157:(t,e,s)=>{"use strict";s.d(e,{Ag:()=>u,GL:()=>c,oy:()=>h,xq:()=>d});var n=s(74833),a=s(66962),o=s(2431),r=s(11182),i=s(12330),l=s(38828);s(67792);class c extends i.y{constructor(t){super(),this.doc=t,this.clientID=t.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval((()=>{const t=o.ZG();null!==this.getLocalState()&&15e3<=t-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const e=[];this.meta.forEach(((s,n)=>{n!==this.clientID&&3e4<=t-s.lastUpdated&&this.states.has(n)&&e.push(n)})),e.length>0&&u(this,e,"timeout")}),r.GW(3e3)),t.on("destroy",(()=>{this.destroy()})),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(t){const e=this.clientID,s=this.meta.get(e),n=void 0===s?0:s.clock+1,a=this.states.get(e);null===t?this.states.delete(e):this.states.set(e,t),this.meta.set(e,{clock:n,lastUpdated:o.ZG()});const r=[],i=[],c=[],u=[];null===t?u.push(e):null==a?null!=t&&r.push(e):(i.push(e),l.Hi(a,t)||c.push(e)),(r.length>0||c.length>0||u.length>0)&&this.emit("change",[{added:r,updated:c,removed:u},"local"]),this.emit("update",[{added:r,updated:i,removed:u},"local"])}setLocalStateField(t,e){const s=this.getLocalState();null!==s&&this.setLocalState({...s,[t]:e})}getStates(){return this.states}}const u=(t,e,s)=>{const n=[];for(let s=0;s<e.length;s++){const a=e[s];if(t.states.has(a)){if(t.states.delete(a),a===t.clientID){const e=t.meta.get(a);t.meta.set(a,{clock:e.clock+1,lastUpdated:o.ZG()})}n.push(a)}}n.length>0&&(t.emit("change",[{added:[],updated:[],removed:n},s]),t.emit("update",[{added:[],updated:[],removed:n},s]))},d=(t,e,s=t.states)=>{const a=e.length,o=n.Mf();n.uE(o,a);for(let r=0;r<a;r++){const a=e[r],i=s.get(a)||null,l=t.meta.get(a).clock;n.uE(o,a),n.uE(o,l),n.uw(o,JSON.stringify(i))}return n._f(o)},h=(t,e,s)=>{const n=a.l1(e),r=o.ZG(),i=[],c=[],u=[],d=[],h=a.yg(n);for(let e=0;e<h;e++){const e=a.yg(n);let s=a.yg(n);const o=JSON.parse(a.kf(n)),h=t.meta.get(e),g=t.states.get(e),p=void 0===h?0:h.clock;(p<s||p===s&&null===o&&t.states.has(e))&&(null===o?e===t.clientID&&null!=t.getLocalState()?s++:t.states.delete(e):t.states.set(e,o),t.meta.set(e,{clock:s,lastUpdated:r}),void 0===h&&null!==o?i.push(e):void 0!==h&&null===o?d.push(e):null!==o&&(l.Hi(o,g)||u.push(e),c.push(e)))}(i.length>0||u.length>0||d.length>0)&&t.emit("change",[{added:i,updated:u,removed:d},s]),(i.length>0||c.length>0||d.length>0)&&t.emit("update",[{added:i,updated:c,removed:d},s])}}}]);