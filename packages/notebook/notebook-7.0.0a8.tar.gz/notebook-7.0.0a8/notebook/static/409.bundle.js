(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[409,4397,2040],{35375:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>p});var n=r(67792),s=r(90157),o=r(90829),a=r(22554),i=r(2815),l=r(4574),c=r(26629),u=r(34340),d=r(42081),h=r(56963),f=r(52969);const p=[{id:"@jupyterlab/collaboration-extension:user",autoStart:!0,provides:l.ICurrentUser,activate:t=>new l.User},{id:"@jupyterlab/collaboration-extension:userMenu",autoStart:!0,requires:[l.ICurrentUser],provides:l.IUserMenu,activate:(t,e)=>{const{commands:r}=t;return new l.UserMenu({commands:r,user:e})}},{id:"@jupyterlab/collaboration-extension:userMenuBar",autoStart:!0,requires:[l.ICurrentUser,l.IUserMenu],activate:(t,e,r)=>{const{shell:n}=t;if("true"!==a.PageConfig.getOption("collaborative"))return;const s=new u.MenuBar({forceItemsPosition:{forceX:!1,forceY:!1},renderer:new l.RendererUserMenu(e)});s.id="jp-UserMenu",e.changed.connect((()=>s.update())),s.addMenu(r),n.add(s,"top",{rank:1e3})}},{id:"@jupyterlab/collaboration-extension:rtcGlobalAwareness",autoStart:!0,requires:[l.ICurrentUser,h.IStateDB],provides:l.IGlobalAwareness,activate:(t,e,r)=>{const i=new n.Doc;if("true"!==a.PageConfig.getOption("collaborative"))return new l.AwarenessMock(i);const c=new s.GL(i),u=d.ServerConnection.makeSettings(),h=a.URLExt.join(u.wsUrl,"api/yjs");new o.WebsocketProvider(h,"JupyterLab:globalAwareness",i,{awareness:c});const f=()=>{const t=""!==e.displayName?e.displayName:e.name;c.setLocalStateField("user",{...e.toJSON(),name:t})};return e.isReady&&f(),e.ready.connect(f),e.changed.connect(f),r.changed.connect((async()=>{var t,e;const n=(null===(e=null===(t=(await r.toJSON())["layout-restorer:data"])||void 0===t?void 0:t.main)||void 0===e?void 0:e.current)||"";n.startsWith("editor")||n.startsWith("notebook")?c.setLocalStateField("current",n):c.setLocalStateField("current",null)})),c}},{id:"@jupyterlab/collaboration-extension:rtcPanel",autoStart:!0,requires:[l.ICurrentUser,l.IGlobalAwareness,f.ITranslator],activate:(t,e,r,n)=>{if("true"!==a.PageConfig.getOption("collaborative"))return;const s=n.load("jupyterlab"),o=new c.SidePanel;o.id=i.DOMUtils.createDomID(),o.title.icon=c.usersIcon,o.title.caption=s.__("Collaboration"),o.addClass("jp-RTCPanel"),t.shell.add(o,"left",{rank:300});const u=new l.UserInfoPanel(e);u.title.label=s.__("User info"),u.title.caption=s.__("User information"),o.addWidget(u);const d=new l.CollaboratorsPanel(e,r,(e=>{t.commands.execute("docmanager:open",{path:e})}));d.title.label=s.__("Online Collaborators"),o.addWidget(d)}}]},79504:(t,e,r)=>{"use strict";r.d(e,{Dp:()=>o,Z$:()=>n,kJ:()=>a,s7:()=>s});const n=t=>t[t.length-1],s=(t,e)=>{for(let r=0;r<e.length;r++)t.push(e[r])},o=Array.from,a=Array.isArray},38828:(t,e,r)=>{"use strict";r.d(e,{Hi:()=>o,PP:()=>s});var n=r(36498);const s=(t,e,r=0)=>{try{for(;r<t.length;r++)t[r](...e)}finally{r<t.length&&s(t,e,r+1)}},o=(t,e)=>{if(null==t||null==e)return((t,e)=>t===e)(t,e);if(t.constructor!==e.constructor)return!1;if(t===e)return!0;switch(t.constructor){case ArrayBuffer:t=new Uint8Array(t),e=new Uint8Array(e);case Uint8Array:if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;break;case Set:if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;break;case Map:if(t.size!==e.size)return!1;for(const r of t.keys())if(!e.has(r)||!o(t.get(r),e.get(r)))return!1;break;case Object:if(n.kE(t)!==n.kE(e))return!1;for(const r in t)if(!n.l$(t,r)||!o(t[r],e[r]))return!1;break;case Array:if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!o(t[r],e[r]))return!1;break;default:return!1}return!0}},22592:(t,e,r)=>{"use strict";r.d(e,{JG:()=>s,UI:()=>a,Ue:()=>n,Yj:()=>i,Yu:()=>o});const n=()=>new Map,s=t=>{const e=n();return t.forEach(((t,r)=>{e.set(r,t)})),e},o=(t,e,r)=>{let n=t.get(e);return void 0===n&&t.set(e,n=r()),n},a=(t,e)=>{const r=[];for(const[n,s]of t)r.push(e(s,n));return r},i=(t,e)=>{for(const[r,n]of t)if(e(n,r))return!0;return!1}},11182:(t,e,r)=>{"use strict";r.d(e,{Fp:()=>a,GR:()=>l,GW:()=>n,VV:()=>o,Wn:()=>s,sQ:()=>i});const n=Math.floor,s=(Math.ceil,Math.abs),o=(Math.imul,Math.round,Math.log10,Math.log2,Math.log,Math.sqrt,(t,e)=>t<e?t:e),a=(t,e)=>t>e?t:e,i=(Number.isNaN,Math.pow),l=(Math.sign,t=>0!==t?t<0:1/t<0)},36498:(t,e,r)=>{"use strict";r.d(e,{$m:()=>i,UI:()=>s,kE:()=>o,l$:()=>a}),Object.assign;const n=Object.keys,s=(t,e)=>{const r=[];for(const n in t)r.push(e(t[n],n));return r},o=t=>n(t).length,a=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i=(t,e)=>t===e||o(t)===o(e)&&((t,e)=>{for(const r in t)if(!e(t[r],r))return!1;return!0})(t,((t,r)=>(void 0!==t||a(e,r))&&e[r]===t))},12330:(t,e,r)=>{"use strict";r.d(e,{y:()=>a});var n=r(22592),s=r(79287),o=r(79504);class a{constructor(){this._observers=n.Ue()}on(t,e){n.Yu(this._observers,t,s.Ue).add(e)}once(t,e){const r=(...n)=>{this.off(t,r),e(...n)};this.on(t,r)}off(t,e){const r=this._observers.get(t);void 0!==r&&(r.delete(e),0===r.size&&this._observers.delete(t))}emit(t,e){return o.Dp((this._observers.get(t)||n.Ue()).values()).forEach((t=>t(...e)))}destroy(){this._observers=n.Ue()}}},79287:(t,e,r)=>{"use strict";r.d(e,{Ue:()=>n});const n=()=>new Set},2431:(t,e,r)=>{"use strict";r.d(e,{ZG:()=>n});const n=Date.now},27061:t=>{var e,r,n=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(e===setTimeout)return setTimeout(t,0);if((e===s||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(r){try{return e.call(null,t,0)}catch(r){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:s}catch(t){e=s}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(t){r=o}}();var i,l=[],c=!1,u=-1;function d(){c&&i&&(c=!1,i.length?l=i.concat(l):u=-1,l.length&&h())}function h(){if(!c){var t=a(d);c=!0;for(var e=l.length;e;){for(i=l,l=[];++u<e;)i&&i[u].run();u=-1,e=l.length}i=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];l.push(new f(t,e)),1!==l.length||c||a(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},90157:(t,e,r)=>{"use strict";r.d(e,{Ag:()=>u,GL:()=>c,oy:()=>h,xq:()=>d});var n=r(74833),s=r(66962),o=r(2431),a=r(11182),i=r(12330),l=r(38828);r(67792);class c extends i.y{constructor(t){super(),this.doc=t,this.clientID=t.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval((()=>{const t=o.ZG();null!==this.getLocalState()&&15e3<=t-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const e=[];this.meta.forEach(((r,n)=>{n!==this.clientID&&3e4<=t-r.lastUpdated&&this.states.has(n)&&e.push(n)})),e.length>0&&u(this,e,"timeout")}),a.GW(3e3)),t.on("destroy",(()=>{this.destroy()})),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(t){const e=this.clientID,r=this.meta.get(e),n=void 0===r?0:r.clock+1,s=this.states.get(e);null===t?this.states.delete(e):this.states.set(e,t),this.meta.set(e,{clock:n,lastUpdated:o.ZG()});const a=[],i=[],c=[],u=[];null===t?u.push(e):null==s?null!=t&&a.push(e):(i.push(e),l.Hi(s,t)||c.push(e)),(a.length>0||c.length>0||u.length>0)&&this.emit("change",[{added:a,updated:c,removed:u},"local"]),this.emit("update",[{added:a,updated:i,removed:u},"local"])}setLocalStateField(t,e){const r=this.getLocalState();null!==r&&this.setLocalState({...r,[t]:e})}getStates(){return this.states}}const u=(t,e,r)=>{const n=[];for(let r=0;r<e.length;r++){const s=e[r];if(t.states.has(s)){if(t.states.delete(s),s===t.clientID){const e=t.meta.get(s);t.meta.set(s,{clock:e.clock+1,lastUpdated:o.ZG()})}n.push(s)}}n.length>0&&(t.emit("change",[{added:[],updated:[],removed:n},r]),t.emit("update",[{added:[],updated:[],removed:n},r]))},d=(t,e,r=t.states)=>{const s=e.length,o=n.Mf();n.uE(o,s);for(let a=0;a<s;a++){const s=e[a],i=r.get(s)||null,l=t.meta.get(s).clock;n.uE(o,s),n.uE(o,l),n.uw(o,JSON.stringify(i))}return n._f(o)},h=(t,e,r)=>{const n=s.l1(e),a=o.ZG(),i=[],c=[],u=[],d=[],h=s.yg(n);for(let e=0;e<h;e++){const e=s.yg(n);let r=s.yg(n);const o=JSON.parse(s.kf(n)),h=t.meta.get(e),f=t.states.get(e),p=void 0===h?0:h.clock;(p<r||p===r&&null===o&&t.states.has(e))&&(null===o?e===t.clientID&&null!=t.getLocalState()?r++:t.states.delete(e):t.states.set(e,o),t.meta.set(e,{clock:r,lastUpdated:a}),void 0===h&&null!==o?i.push(e):void 0!==h&&null===o?d.push(e):null!==o&&(l.Hi(o,f)||u.push(e),c.push(e)))}(i.length>0||u.length>0||d.length>0)&&t.emit("change",[{added:i,updated:u,removed:d},r]),(i.length>0||c.length>0||d.length>0)&&t.emit("update",[{added:i,updated:c,removed:d},r])}}}]);