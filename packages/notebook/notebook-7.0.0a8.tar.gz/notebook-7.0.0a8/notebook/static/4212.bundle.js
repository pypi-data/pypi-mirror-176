"use strict";(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[4212],{24212:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var a=n(17080),s=n(2815),c=n(85609),o=n(79576),d=n(52969),i=n(34340);const r="jp-mod-searchable";var l;!function(e){e.search="documentsearch:start",e.searchAndReplace="documentsearch:startWithReplace",e.findNext="documentsearch:highlightNext",e.findPrevious="documentsearch:highlightPrevious"}(l||(l={}));const h={id:"@jupyterlab/documentsearch-extension:labShellWidgetListener",requires:[a.ILabShell,c.ISearchProviderRegistry],autoStart:!0,activate:(e,t,n)=>{const a=e=>{e&&(n.hasProvider(e)?e.addClass(r):e.removeClass(r))};n.changed.connect((()=>a(t.activeWidget))),t.activeChanged.connect(((e,t)=>{const n=t.oldValue;n&&n.removeClass(r),a(t.newValue)}))}},u={id:"@jupyterlab/documentsearch-extension:plugin",provides:c.ISearchProviderRegistry,requires:[d.ITranslator],optional:[s.ICommandPalette,o.ISettingRegistry],autoStart:!0,activate:(e,t,n,a)=>{const o=t.load("jupyterlab");let d=500;const r=new c.SearchProviderRegistry(t),h=new Map;if(a){const t=a.load(u.id),n=e=>{d=e.get("searchDebounceTime").composite};Promise.all([t,e.restored]).then((([e])=>{n(e),e.changed.connect((e=>{n(e)}))})).catch((e=>{console.error(e.message)}))}const m=()=>{const t=e.shell.currentWidget;return!!t&&r.hasProvider(t)},g=n=>{if(!n)return;const a=n.id;let o=h.get(a);if(!o){const s=r.getProvider(n);if(!s)return;const i=new c.SearchDocumentModel(s,d),u=new c.SearchDocumentView(i,t);h.set(a,u),[l.findNext,l.findPrevious].forEach((t=>{e.commands.notifyCommandChanged(t)})),u.closed.connect((()=>{n.isDisposed||n.activate()})),u.disposed.connect((()=>{n.isDisposed||n.activate(),h.delete(a),[l.findNext,l.findPrevious].forEach((t=>{e.commands.notifyCommandChanged(t)}))})),n.disposed.connect((()=>{u.dispose(),i.dispose(),s.dispose()})),o=u}return o.isAttached||(i.Widget.attach(o,n.node),n instanceof s.MainAreaWidget&&(o.node.style.top=`${n.toolbar.node.getBoundingClientRect().height+n.contentHeader.node.getBoundingClientRect().height}px`),o.model.searchExpression&&o.model.refresh()),o};return e.commands.addCommand(l.search,{label:o.__("Find…"),isEnabled:m,execute:t=>{const n=g(e.shell.currentWidget);if(n){const e=t.searchText;e&&n.setSearchText(e),n.focusSearchInput()}}}),e.commands.addCommand(l.searchAndReplace,{label:o.__("Find and Replace…"),isEnabled:m,execute:t=>{const n=g(e.shell.currentWidget);if(n){const e=t.searchText;e&&n.setSearchText(e);const a=t.replaceText;a&&n.setReplaceText(a),n.showReplace(),n.focusSearchInput()}}}),e.commands.addCommand(l.findNext,{label:o.__("Find Next"),isEnabled:()=>!!e.shell.currentWidget&&h.has(e.shell.currentWidget.id),execute:async()=>{var t;const n=e.shell.currentWidget;n&&await(null===(t=h.get(n.id))||void 0===t?void 0:t.model.highlightNext())}}),e.commands.addCommand(l.findPrevious,{label:o.__("Find Previous"),isEnabled:()=>!!e.shell.currentWidget&&h.has(e.shell.currentWidget.id),execute:async()=>{var t;const n=e.shell.currentWidget;n&&await(null===(t=h.get(n.id))||void 0===t?void 0:t.model.highlightPrevious())}}),n&&[l.search,l.findNext,l.findPrevious].forEach((e=>{n.addItem({command:e,category:o.__("Main Area")})})),r}},m=[u,h]}}]);